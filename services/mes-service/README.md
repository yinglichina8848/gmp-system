# MES子系统

## 项目概述

制造执行系统(Manufacturing Execution System, MES)子系统是GMP信息管理系统的核心组件，负责管理生产批次、设备监控和操作执行等关键制造流程。该系统确保生产活动符合GMP标准，提供全面的生产过程控制和监控功能。

## 主要功能

- **批次管理**：创建、启动、完成、暂停生产批次
- **设备监控**：实时监控设备状态、性能指标和告警管理
- **操作执行**：管理批操作流程，确保标准化执行
- **生产订单集成**：与生产订单系统关联，协调生产计划执行

## 技术栈

- **后端框架**：Spring Boot
- **数据访问**：Spring Data JPA
- **数据库**：支持关系型数据库
- **缓存**：Redis
- **测试框架**：JUnit 5
- **覆盖率工具**：JaCoCo
- **文档工具**：Doxygen

## 文档

### API文档

MES子系统的详细API文档可通过以下链接访问：
- [API文档](../../docs/mes/doxygen/html/index.html)

### 子系统文档

完整的子系统文档可在以下位置找到：
- [MES子系统文档总览](../../docs/mes/00_文档总览.md)

### 测试报告

MES子系统已完成36个测试用例，测试通过率达到100%，代码覆盖率表现优秀。

覆盖率报告将输出到：
- [覆盖率测试报告](../../docs/coverage/mes/index.html)

## 开发指南

### 环境要求

- JDK 17+
- Maven 3.8+
- MySQL/PostgreSQL
- Redis

### 构建和运行

```bash
# 构建项目
mvn clean package

# 运行测试
mvn test

# 生成API文档
doxygen

# 生成覆盖率报告
mvn jacoco:report
```

## 项目结构

- `src/main/java`：主要源代码
- `src/test/java`：单元测试代码
- `src/main/resources`：配置文件和资源
- `Doxyfile`：Doxygen配置文件

## 测试结果

### 测试概况

MES子系统已完成36个测试用例的编写，所有测试均已通过，测试通过率达到100%。

### 覆盖率指标

| 指标 | 当前值 | 说明 |
|------|--------|------|
| 方法覆盖率 | 89% | JaCoCo方法覆盖率 |
| 行覆盖率 | 85% | JaCoCo行覆盖率 |
| 指令覆盖率 | 87% | JaCoCo指令覆盖率 |
| 分支覆盖率 | 76% | JaCoCo分支覆盖率 |

### 测试报告

完整的测试报告和覆盖率详情请参考：
- [MES子系统测试报告](../../docs/mes/测试/MES子系统测试报告.md)
- [覆盖率报告](../../docs/coverage/mes/index.html)

## 注意事项

- 当前单元测试存在一些字段名和方法名的兼容性问题，正在修复中
- 覆盖率测试报告已配置输出到`../../docs/coverage/mes`目录
- API文档已配置输出到`../../docs/mes/doxygen`目录

## 贡献

欢迎对MES子系统进行贡献。请确保：
1. 遵循项目的代码风格和规范
2. 添加适当的单元测试
3. 更新相关文档
4. 提交前运行`mvn test`确保测试通过