# 质量管理系统(QMS)测试计划

## 文档信息
- **文档版本**: v1.0
- **创建日期**: 2025-11-22
- **最后更新**: 2025-11-22
- **作者**: 测试工程师
- **审核人**: 质量保证工程师

## 目录
1. [概述](#概述)
2. [测试范围](#测试范围)
3. [测试策略](#测试策略)
4. [测试环境](#测试环境)
5. [测试用例](#测试用例)
6. [测试进度安排](#测试进度安排)
7. [风险评估](#风险评估)
8. [测试交付物](#测试交付物)

---

## 概述

### 文档目的
本文档定义了GMP系统质量管理子系统(QMS)的测试计划，包括测试范围、策略、环境、用例和进度安排等内容，确保QMS系统符合GMP法规要求并满足业务需求。

### 参考文档
- [QMS系统总体需求](总体需求.md)
- [QMS系统架构设计](架构设计.md)
- [QMS系统详细需求](详细需求.md)
- [QMS系统用户故事](用例与用户故事.md)

### GMP特殊要求
- **合规性验证**: 所有功能必须符合GMP法规要求
- **审计可追溯**: 关键操作必须支持完整审计追踪
- **数据完整性**: 质量相关信息必须准确记录和存储
- **审批流程**: 所有关键质量活动必须遵循批准流程

---

## 测试范围

### 包含的功能模块
1. **偏差管理模块**
   - 偏差报告创建与审批
   - 偏差调查与分析
   - 纠正预防措施跟踪
   
2. **CAPA管理模块**
   - CAPA计划制定与执行
   - CAPA效果评估与关闭
   - CAPA跟踪与监督
   
3. **变更控制模块**
   - 变更申请与评估
   - 变更审批与实施
   - 变更效果确认
   
4. **审计管理模块**
   - 审计计划制定与执行
   - 审计发现问题跟踪
   - 审计报告生成与分发
   
5. **质量文档管理模块**
   - SOP文档管理
   - 质量标准文档管理
   - 质量记录管理

### 不包含的内容
- 与外部监管机构的直接通信功能
- 复杂的统计分析功能
- 移动端专用APP功能

---

## 测试策略

### 测试类型
1. **单元测试**
   - 验证各服务类的方法逻辑正确性
   - 覆盖率目标：85%以上
   
2. **集成测试**
   - 验证各模块间的接口调用正确性
   - 验证数据库操作正确性
   
3. **接口测试**
   - 验证RESTful API的功能正确性
   - 验证请求/响应数据格式
   
4. **业务流程测试**
   - 验证完整的偏差处理流程
   - 验证CAPA闭环管理流程
   - 验证变更控制审批流程
   - 验证审计执行和整改流程
   
5. **安全测试**
   - 验证数据访问权限控制
   - 验证敏感操作审批流程
   
6. **性能测试**
   - 验证大量质量文档查询性能
   - 验证并发审批处理能力

### 测试方法
- **黑盒测试**: 验证功能是否符合需求
- **白盒测试**: 验证代码逻辑是否正确
- **灰盒测试**: 结合前后端验证业务流程

---

## 测试环境

### 硬件环境
| 组件 | 配置 | 数量 |
|------|------|------|
| 应用服务器 | 4核CPU, 8GB内存 | 1台 |
| 数据库服务器 | 4核CPU, 8GB内存, 100GB存储 | 1台 |
| 文件存储服务器 | 4核CPU, 8GB内存, 500GB存储 | 1台 |
| 测试客户端 | 2核CPU, 4GB内存 | 2台 |

### 软件环境
| 软件 | 版本 | 说明 |
|------|------|------|
| 操作系统 | Ubuntu 24.04 | 服务器环境 |
| JDK | OpenJDK 17 | 运行环境 |
| 数据库 | PostgreSQL 13 | 数据存储 |
| 文件存储 | MinIO | 文档存储 |
| Web服务器 | Nginx 1.20 | 反向代理 |
| 测试工具 | JUnit 5, Postman | 测试执行 |

### 网络环境
- 内网环境，支持HTTPS协议
- 网络延迟 < 10ms
- 带宽 >= 100Mbps

---

## 测试用例

### 功能测试用例

#### TC001: 偏差报告创建与审批
- **前置条件**: 用户具有偏差报告权限
- **测试步骤**:
  1. 登录系统，进入偏差管理模块
  2. 点击"新建偏差报告"按钮
  3. 填写偏差基本信息和详细描述
  4. 提交偏差报告
  5. 审批人员登录系统审批
- **预期结果**: 
  1. 偏差报告成功创建并分配编号
  2. 审批流程正确触发
  3. 审批后状态正确更新
  4. 操作日志完整记录

#### TC002: CAPA闭环管理
- **前置条件**: 存在一个已批准的偏差报告
- **测试步骤**:
  1. 基于偏差报告创建CAPA计划
  2. 分配责任人并设定完成期限
  3. 责任人执行CAPA措施
  4. QA部门验证CAPA效果
  5. 关闭CAPA
- **预期结果**: 
  1. CAPA计划成功创建
  2. 各环节责任人正确通知
  3. CAPA状态正确跟踪更新
  4. 最终正确关闭并记录效果

#### TC003: 变更控制流程
- **前置条件**: 用户具有变更申请权限
- **测试步骤**:
  1. 登录系统，进入变更控制模块
  2. 创建变更申请并填写详情
  3. 提交变更申请进入评估阶段
  4. 评估委员会成员进行风险评估
  5. 变更委员会审批变更
  6. 实施变更并确认效果
- **预期结果**: 
  1. 变更流程严格按照阶段推进
  2. 各阶段审批人员正确接收通知
  3. 变更记录完整保存
  4. 变更影响正确评估

### 安全测试用例

#### TC004: 审计追踪完整性
- **前置条件**: 系统中存在质量相关操作记录
- **测试步骤**:
  1. 尝试删除或修改关键质量记录
  2. 查询相关记录的审计追踪信息
- **预期结果**: 
  1. 删除或修改操作被拒绝
  2. 完整的审计追踪信息可供查询

#### TC005: 权限分级控制
- **前置条件**: 不同角色的用户账户
- **测试步骤**:
  1. 使用QA人员账号尝试关闭未完成的CAPA
  2. 使用普通员工账号尝试审批变更
- **预期结果**: 
  1. 系统拒绝越权操作
  2. 提示相应权限不足信息

---

## 测试进度安排

| 阶段 | 时间 | 任务 | 负责人 |
|------|------|------|--------|
| 需求分析 | 2天 | 分析测试需求，编写测试用例 | 测试工程师 |
| 测试准备 | 1天 | 搭建测试环境，准备测试数据 | 测试工程师 |
| 单元测试 | 4天 | 执行单元测试，修复缺陷 | 开发工程师 |
| 集成测试 | 3天 | 执行集成测试，验证接口 | 测试工程师 |
| 系统测试 | 5天 | 执行系统测试，验证功能 | 测试工程师 |
| 业务流程测试 | 4天 | 执行业务流程测试 | 测试工程师 |
| 安全测试 | 2天 | 执行安全测试，验证防护 | 安全工程师 |
| 性能测试 | 2天 | 执行性能测试，优化瓶颈 | 性能工程师 |
| 回归测试 | 2天 | 验证缺陷修复情况 | 测试工程师 |
| 测试总结 | 1天 | 编写测试报告 | 测试经理 |

---

## 风险评估

| 风险项 | 描述 | 影响程度 | 应对措施 |
|--------|------|----------|----------|
| 环境不稳定 | 测试环境频繁出现故障 | 高 | 提前准备备用环境 |
| 人员不足 | 测试人员临时缺席 | 中 | 安排人员备份 |
| 需求变更 | 需求发生重大变化 | 高 | 加强需求评审 |
| 工具缺陷 | 测试工具存在bug | 低 | 准备替代方案 |
| 流程复杂 | QMS业务流程复杂，容易遗漏 | 高 | 详细梳理流程，制定检查清单 |

---

## 测试交付物

### 测试过程中交付
1. 测试用例文档
2. 测试执行记录
3. 缺陷报告

### 测试完成后交付
1. 测试计划文档
2. 测试报告
3. 测试覆盖率报告
4. 性能测试报告
5. 安全测试报告
6. 业务流程测试报告
7. GMP合规性验证报告