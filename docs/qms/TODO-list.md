# QMSå­ç³»ç»Ÿå®ç°TODOæ¸…å• (ä¸ºAIå¼€å‘è€…å‡†å¤‡)

## ğŸ¯ æ€»ä½“ç›®æ ‡
å®ç°å®Œæ•´çš„GMPè´¨é‡ç®¡ç†ç³»ç»Ÿ( QMS )å¾®æœåŠ¡ï¼ŒåŒ…æ‹¬åå·®ç®¡ç†ã€CAPAç®¡ç†ã€å˜æ›´æ§åˆ¶å’Œå®¡è®¡ç®¡ç†å››ä¸ªæ ¸å¿ƒæ¨¡å—ã€‚

## ğŸ“‹ å®ç°æ­¥éª¤æ€»è§ˆ

### Phase 1: é¡¹ç›®åŸºç¡€è®¾ç½® (å®Œæˆæ ‡å¿—: æ‰€æœ‰ä¾èµ–å’Œé…ç½®å‡†å¤‡å°±ç»ª)
- [ ] 1.1 åˆ›å»ºQMSå¾®æœåŠ¡åŸºç¡€ç»“æ„
- [ ] 1.2 é…ç½®æ•°æ®åº“è¿æ¥å’Œè¿ç§»
- [ ] 1.3 é…ç½®ç¼“å­˜å’Œæ¶ˆæ¯é˜Ÿåˆ—
- [ ] 1.4 é…ç½®å®‰å…¨å’Œæƒé™éªŒè¯

### Phase 2: æ ¸å¿ƒæ•°æ®æ¨¡å‹ (å®Œæˆæ ‡å¿—: æ‰€æœ‰å®ä½“ç±»å’ŒRepositoryå®Œæˆ)
- [ ] 2.1 è®¾è®¡å’Œå®ç°åå·®ç®¡ç†æ•°æ®æ¨¡å‹
- [ ] 2.2 è®¾è®¡å’Œå®ç°CAPAç®¡ç†æ•°æ®æ¨¡å‹
- [ ] 2.3 è®¾è®¡å’Œå®ç°å˜æ›´æ§åˆ¶æ•°æ®æ¨¡å‹
- [ ] 2.4 è®¾è®¡å’Œå®ç°å®¡è®¡ç®¡ç†æ•°æ®æ¨¡å‹
- [ ] 2.5 åˆ›å»ºæšä¸¾ç±»å’Œå¸¸é‡å®šä¹‰

### Phase 3: ä¸šåŠ¡æœåŠ¡å±‚ (å®Œæˆæ ‡å¿—: æ‰€æœ‰ä¸šåŠ¡é€»è¾‘å®ç°å®Œæˆ)
- [ ] 3.1 å®ç°åå·®ç®¡ç†ä¸šåŠ¡æœåŠ¡
- [ ] 3.2 å®ç°CAPAç®¡ç†ä¸šåŠ¡æœåŠ¡
- [ ] 3.3 å®ç°å˜æ›´æ§åˆ¶ä¸šåŠ¡æœåŠ¡
- [ ] 3.4 å®ç°å®¡è®¡ç®¡ç†ä¸šåŠ¡æœåŠ¡
- [ ] 3.5 å®ç°ä¸šåŠ¡è§„åˆ™å¼•æ“

### Phase 4: REST APIå±‚ (å®Œæˆæ ‡å¿—: æ‰€æœ‰APIæ¥å£å®Œæˆå¹¶å¯æµ‹è¯•)
- [ ] 4.1 å®ç°åå·®ç®¡ç†RESTæ§åˆ¶å™¨
- [ ] 4.2 å®ç°CAPAç®¡ç†RESTæ§åˆ¶å™¨
- [ ] 4.3 å®ç°å˜æ›´æ§åˆ¶RESTæ§åˆ¶å™¨
- [ ] 4.4 å®ç°å®¡è®¡ç®¡ç†RESTæ§åˆ¶å™¨
- [ ] 4.5 ç»Ÿä¸€å¼‚å¸¸å¤„ç†å’Œå“åº”æ ¼å¼

### Phase 5: å•å…ƒæµ‹è¯• (å®Œæˆæ ‡å¿—: å•æµ‹è¦†ç›–ç‡â‰¥85%)
- [ ] 5.1 ç¼–å†™å®ä½“ç±»å•å…ƒæµ‹è¯•
- [ ] 5.2 ç¼–å†™ä¸šåŠ¡æœåŠ¡å±‚å•å…ƒæµ‹è¯•
- [ ] 5.3 ç¼–å†™æ§åˆ¶å™¨å±‚å•å…ƒæµ‹è¯•
- [ ] 5.4 ç¼–å†™æ•°æ®è®¿é—®å±‚å•å…ƒæµ‹è¯•
- [ ] 5.5 ç”Ÿæˆå•å…ƒæµ‹è¯•è¦†ç›–ç‡æŠ¥å‘Š

### Phase 6: é›†æˆæµ‹è¯• (å®Œæˆæ ‡å¿—: é›†æˆæµ‹è¯•é€šè¿‡ä¸”è¦†ç›–å…³é”®ä¸šåŠ¡æµç¨‹)
- [ ] 6.1 è®¾ç½®æµ‹è¯•ç¯å¢ƒå’Œå®¹å™¨åŒ–æµ‹è¯•
- [ ] 6.2 ç¼–å†™æ•°æ®åº“é›†æˆæµ‹è¯•
- [ ] 6.3 ç¼–å†™APIé›†æˆæµ‹è¯•
- [ ] 6.4 ç¼–å†™ç«¯åˆ°ç«¯ä¸šåŠ¡æµç¨‹æµ‹è¯•
- [ ] 6.5 ç”Ÿæˆé›†æˆæµ‹è¯•æŠ¥å‘Š

### Phase 7: ä¸šåŠ¡æµ‹è¯•åœºæ™¯ (å®Œæˆæ ‡å¿—: æ‰€æœ‰GMPåˆè§„åœºæ™¯éªŒè¯å®Œæˆ)
- [ ] 7.1 åå·®æŠ¥å‘Šå’Œå¤„ç†å…¨æµç¨‹æµ‹è¯•
- [ ] 7.2 CAPAé—­ç¯ç®¡ç†æµç¨‹æµ‹è¯•
- [ ] 7.3 å˜æ›´æ§åˆ¶å®¡æ‰¹æµç¨‹æµ‹è¯•
- [ ] 7.4 å®¡è®¡æ‰§è¡Œå’Œæ•´æ”¹æµç¨‹æµ‹è¯•
- [ ] 7.5 GMPåˆè§„æ€§éªŒè¯

---

## ğŸ“ è¯¦ç»†å®ç°æŒ‡å—

### Phase 1: é¡¹ç›®åŸºç¡€è®¾ç½®

#### 1.1 åˆ›å»ºQMSå¾®æœåŠ¡åŸºç¡€ç»“æ„
**è¾“å…¥**: `services/qms-service/pom.xml` (å·²å­˜åœ¨)
**å®ç°æ­¥éª¤**:
1. éªŒè¯ç°æœ‰çš„Mavenä¾èµ–é…ç½®æ˜¯å¦å®Œæ•´
2. æŒ‰ä¸šåŠ¡æ¨¡å—åˆ›å»ºJavaåŒ…ç»“æ„:
   ```
   src/main/java/com/gmp/qms/
   â”œâ”€â”€ config/
   â”œâ”€â”€ controller/
   â”œâ”€â”€ service/
   â”œâ”€â”€ repository/
   â”œâ”€â”€ entity/
   â”œâ”€â”€ dto/
   â”œâ”€â”€ exception/
   â””â”€â”€ enums/
   ```
3. åˆ›å»ºä¸»åº”ç”¨ç±» `QmsApplication.java` (å·²æœ‰)
4. åˆ›å»ºé…ç½®æ–‡ä»¶ `application.yml` å’Œ `application-dev.yml`

**éªŒè¯æ ‡å‡†**: é¡¹ç›®èƒ½æˆåŠŸç¼–è¯‘é€šè¿‡

#### 1.2 é…ç½®æ•°æ®åº“è¿æ¥å’Œè¿ç§»
**ç›¸å…³æ–‡ä»¶**: 
- `infrastructure/postgres/init/03-init-qms-db.sql` (éœ€è¦åˆ›å»º)
- `src/main/resources/application.yml`

**å®ç°æ­¥éª¤**:
1. åˆ›å»ºQMSæ•°æ®åº“åˆå§‹åŒ–è„šæœ¬ï¼ŒåŒ…æ‹¬æ‰€æœ‰æ•°æ®è¡¨
2. é…ç½®Spring Data JPAå’ŒPostgreSQLè¿æ¥
3. é…ç½®Flywayæ•°æ®åº“è¿ç§»è„šæœ¬
4. éªŒè¯æ•°æ®åº“è¿æ¥æ­£å¸¸

**SQLè„šæœ¬å†…å®¹ç¤ºä¾‹**:
```sql
CREATE DATABASE qms_db;
-- deviationsè¡¨, capasè¡¨, change_controlsè¡¨, auditsè¡¨ç­‰
-- ç´¢å¼•å’Œçº¦æŸé…ç½®
```

#### 1.3 é…ç½®ç¼“å­˜å’Œæ¶ˆæ¯é˜Ÿåˆ—
**å®ç°æ­¥éª¤**:
1. é…ç½®Redisç¼“å­˜
2. é…ç½®RabbitMQæ¶ˆæ¯é˜Ÿåˆ—å’Œäº¤æ¢å™¨
3. åˆ›å»ºç¼“å­˜é…ç½®ç±» `RedisConfig.java`
4. åˆ›å»ºæ¶ˆæ¯é˜Ÿåˆ—é…ç½®ç±» `RabbitConfig.java`

#### 1.4 é…ç½®å®‰å…¨å’Œæƒé™éªŒè¯
**å®ç°æ­¥éª¤**:
1. é…ç½®Spring Securityä¸JWTé›†æˆ
2. åˆ›å»ºOAuth2èµ„æºæœåŠ¡å™¨é…ç½®
3. å®ç°åŸºäºè§’è‰²çš„æƒé™è®¿é—®æ§åˆ¶
4. åˆ›å»ºæƒé™éªŒè¯æ³¨è§£

### Phase 2: æ ¸å¿ƒæ•°æ®æ¨¡å‹

#### 2.1 åå·®ç®¡ç†æ•°æ®æ¨¡å‹
**å…³é”®ç±»**:
- `Deviation.java` - å®ä½“ç±»
- `DeviationStatus.java` - çŠ¶æ€æšä¸¾
- `DeviationSeverity.java` - ä¸¥é‡ç¨‹åº¦æšä¸¾
- `DeviationRepository.java` - æ•°æ®è®¿é—®æ¥å£
- `DeviationAttachment.java` - é™„ä»¶å®ä½“

**å…·ä½“è¦æ±‚**:
1. å®ç°å®Œæ•´çš„JPAå®ä½“æ˜ å°„
2. é…ç½®å®¡è®¡å­—æ®µ (@CreatedDate, @LastModifiedDate)
3. å®ç°å…³è”å…³ç³»æ˜ å°„
4. é…ç½®æ ¡éªŒæ³¨è§£ (@NotNull, @Sizeç­‰)

#### 2.2 CAPAç®¡ç†æ•°æ®æ¨¡å‹
**å…³é”®ç±»**:
- `Capa.java` - CAPAå®ä½“
- `CapaAction.java` - è¡ŒåŠ¨é¡¹å®ä½“
- `CapaPriority.java` - ä¼˜å…ˆçº§æšä¸¾
- `CapaRepository.java` & `CapaActionRepository.java`

**ä¸šåŠ¡è§„åˆ™**:
- CAPAå¿…é¡»å…³è”æ¥æº (åå·®ã€å®¡è®¡ã€æŠ•è¯‰ç­‰)
- æ”¯æŒå¤šä¸ªè¡ŒåŠ¨é¡¹è·Ÿè¸ª
- éœ€è¦è®°å½•æœ‰æ•ˆæ€§éªŒè¯ç»“æœ

#### 2.5 åˆ›å»ºæšä¸¾ç±»å’Œå¸¸é‡å®šä¹‰
**æšä¸¾ç±»**:
```java
public enum DeviationSeverity { LOW, MEDIUM, HIGH, CRITICAL }
public enum DeviationStatus { OPEN, IN_ANALYSIS, IN_CORRECTION, CLOSED }
public enum CapaPriority { LOW, MEDIUM, HIGH, CRITICAL }
public enum ChangeType { PROCESS, EQUIPMENT, DOCUMENT, SUPPLIER, SYSTEM }
public enum AuditType { INTERNAL, EXTERNAL, SUPPLIER, SPECIAL }
```

### Phase 3: ä¸šåŠ¡æœåŠ¡å±‚

#### 3.1 å®ç°åå·®ç®¡ç†ä¸šåŠ¡æœåŠ¡
**å…³é”®ç»„ä»¶**:
- `DeviationService.java` - æ¥å£
- `DeviationServiceImpl.java` - å®ç°ç±»
- `DeviationBusinessRules.java` - ä¸šåŠ¡è§„åˆ™å¼•æ“

**æ ¸å¿ƒæ–¹æ³•**:
```java
// åˆ›å»ºåå·®
DeviationDto createDeviation(CreateDeviationRequest request);
// æ›´æ–°åå·®çŠ¶æ€
DeviationDto updateDeviationStatus(Long id, DeviationStatus status);
// åˆ†é…è´Ÿè´£äºº
DeviationDto assignDeviation(Long id, String assignee);
// ä¸Šä¼ é™„ä»¶
DeviationAttachment uploadAttachment(Long deviationId, MultipartFile file);
```

**ä¸šåŠ¡é€»è¾‘**:
1. è‡ªåŠ¨ç”Ÿæˆåå·®ç¼–å· (DEV-YYYY-MMDD-001)
2. æ ¹æ®ä¸¥é‡ç¨‹åº¦è‡ªåŠ¨è®¡ç®—æˆªæ­¢æ—¶é—´
3. å‘é€çŸ­ä¿¡é€šçŸ¥è´¨é‡ç»ç† (CRITICALçº§åˆ«)
4. è‡ªåŠ¨åˆ†é…è´¨é‡å·¥ç¨‹å¸ˆå¤„ç†

#### 3.2 å®ç°CAPAç®¡ç†ä¸šåŠ¡æœåŠ¡
**æ ¸å¿ƒä¸šåŠ¡æµç¨‹**:
1. **æ ¹æœ¬åŸå› åˆ†æ**: é±¼éª¨å›¾æ³•è¯†åˆ«æ ¹æœ¬åŸå› 
2. **æªæ–½åˆ¶å®š**: åˆ¶å®šçº æ­£å’Œé¢„é˜²æªæ–½
3. **æ‰§è¡Œè·Ÿè¸ª**: è·Ÿè¸ªè¡ŒåŠ¨é¡¹å®Œæˆæƒ…å†µ
4. **æœ‰æ•ˆæ€§éªŒè¯**: é€šè¿‡è¯•éªŒæˆ–è§‚å¯ŸéªŒè¯æªæ–½æœ‰æ•ˆæ€§

#### 3.5 å®ç°ä¸šåŠ¡è§„åˆ™å¼•æ“
**ç”¨é€”**: å°è£…æ‰€æœ‰ä¸šåŠ¡è§„åˆ™ï¼Œæä¾›ç»Ÿä¸€çš„è§„åˆ™éªŒè¯å’Œè®¡ç®—æœåŠ¡
```java
@Service
public class QmsBusinessRuleEngine {
    // è‡ªåŠ¨ç¼–å·ç”Ÿæˆ
    public String generateNumber(String prefix, LocalDate date);
    // æˆªæ­¢æ—¶é—´è®¡ç®—
    public LocalDateTime calculateDueDate(Object severity);
    // è‡ªåŠ¨åˆ†é…è§„åˆ™
    public String autoAssign(Object entity);
}
```

### Phase 4: REST APIå±‚

#### 4.1 å®ç°åå·®ç®¡ç†RESTæ§åˆ¶å™¨
**APIæ¥å£åˆ—è¡¨**:
```
POST   /api/qms/deviations           - åˆ›å»ºåå·®
GET    /api/qms/deviations/{id}      - è·å–åå·®è¯¦æƒ…
GET    /api/qms/deviations           - åˆ†é¡µæŸ¥è¯¢åå·®
PUT    /api/qms/deviations/{id}      - æ›´æ–°åå·®
PATCH  /api/qms/deviations/{id}/status - æ›´æ–°çŠ¶æ€
POST   /api/qms/deviations/{id}/attachments - ä¸Šä¼ é™„ä»¶
```

**æ§åˆ¶å™¨å®ç°è¦ç‚¹**:
1. ä½¿ç”¨Spring Validationè¿›è¡Œè¾“å…¥éªŒè¯
2. ç»Ÿä¸€å¼‚å¸¸å¤„ç† (@RestControllerAdvice)
3. åˆ†é¡µæŸ¥è¯¢æ”¯æŒ (Pageable)
4. æ–‡ä»¶ä¸Šä¼ å¤šéƒ¨åˆ†è¯·æ±‚å¤„ç†

#### 4.5 ç»Ÿä¸€å¼‚å¸¸å¤„ç†å’Œå“åº”æ ¼å¼
**å…¨å±€å¼‚å¸¸å¤„ç†å™¨**:
```java
@RestControllerAdvice
public class GlobalExceptionHandler {
    @ExceptionHandler(ValidationException.class)
    public ResponseEntity<ApiResponse<Void>> handleValidation(ValidationException e) {
        // è¿”å›å­—æ®µéªŒè¯é”™è¯¯ä¿¡æ¯
    }
}
```

**ç»Ÿä¸€å“åº”æ ¼å¼**:
```json
{
    "success": true,
    "code": 200,
    "message": "æ“ä½œæˆåŠŸ",
    "data": { ... },
    "timestamp": "2024-01-01T00:00:00Z"
}
```

### Phase 5: å•å…ƒæµ‹è¯•

#### 5.1 ç¼–å†™å®ä½“ç±»å•å…ƒæµ‹è¯•
**æµ‹è¯•å†…å®¹**:
- JPAæ³¨è§£é…ç½®éªŒè¯
- éªŒè¯å™¨æ³¨è§£åŠŸèƒ½
- Equalså’ŒHashCodeæ–¹æ³•
- ToStringæ–¹æ³•

**ç¤ºä¾‹æµ‹è¯•**:
```java
@Test
public void testDeviationEntityValidation() {
    Deviation deviation = new Deviation();
    // æµ‹è¯•å¿…å¡«å­—æ®µéªŒè¯
    Set<ConstraintViolation<Deviation>> violations = validator.validate(deviation);
    assertFalse(violations.isEmpty());
}
```

#### 5.2 ç¼–å†™ä¸šåŠ¡æœåŠ¡å±‚å•å…ƒæµ‹è¯•
**Mockç­–ç•¥**:
- ä½¿ç”¨Mockitoè¿›è¡Œä¾èµ–mock
- é‡ç‚¹æµ‹è¯•ä¸šåŠ¡é€»è¾‘åˆ†æ”¯
- éªŒè¯è§„åˆ™å¼•æ“è°ƒç”¨
- æµ‹è¯•å¼‚å¸¸å¤„ç†

**ç¤ºä¾‹æµ‹è¯•**:
```java
@ExtendWith(MockitoExtension.class)
class DeviationServiceImplTest {

    @Mock private DeviationRepository repository;
    @Mock private BusinessRuleEngine ruleEngine;

    @Test
    void createDeviation_ShouldGenerateNumberAndCalculateDueDate() {
        // Given
        CreateDeviationRequest request = createValidRequest();
        when(ruleEngine.generateNumber(any(), any())).thenReturn("DEV-2024-0101-001");

        // When
        DeviationDto result = service.createDeviation(request);

        // Then
        assertNotNull(result.getDeviationNumber());
        verify(ruleEngine).calculateDueDate(any());
    }
}
```

#### 5.5 ç”Ÿæˆå•å…ƒæµ‹è¯•è¦†ç›–ç‡æŠ¥å‘Š
**å·¥å…·é…ç½®**:
1. é…ç½®Jacocoæ’ä»¶åœ¨pom.xml
2. æ‰§è¡Œè¦†ç›–ç‡æµ‹è¯•: `mvn test jacoco:report`
3. é…ç½®è¦†ç›–ç‡è§„åˆ™ (jacoco-rules.properties)
4. ç›®æ ‡è¦†ç›–ç‡: ç±»è¦†ç›–ç‡â‰¥90%, åˆ†æ”¯è¦†ç›–ç‡â‰¥80%

### Phase 6: é›†æˆæµ‹è¯•

#### 6.1 è®¾ç½®æµ‹è¯•ç¯å¢ƒå’Œå®¹å™¨åŒ–æµ‹è¯•
**ä½¿ç”¨Testcontainers**:
```java
@SpringBootTest
@Testcontainers
class QmsIntegrationTest {

    @Container
    static PostgreSQLContainer<?> postgres = new PostgreSQLContainer<>("postgres:13")
            .withDatabaseName("qms_test")
            .withUsername("test")
            .withPassword("test");

    @DynamicPropertySource
    static void configureProperties(DynamicPropertyRegistry registry) {
        registry.add("spring.datasource.url", postgres::getJdbcUrl);
    }
}
```

#### 6.2 ç¼–å†™æ•°æ®åº“é›†æˆæµ‹è¯•
**æµ‹è¯•å†…å®¹**:
- æ•°æ®æŒä¹…åŒ–æ“ä½œ
- å…³è”æŸ¥è¯¢åŠŸèƒ½
- äº‹åŠ¡å®Œæ•´æ€§
- çº§è”æ“ä½œ

#### 6.3 ç¼–å†™APIé›†æˆæµ‹è¯•
**ä½¿ç”¨RestAssured**:
```java
@Test
void createDeviation_ShouldReturn201_WhenValidRequest() {
    given()
        .contentType(ContentType.JSON)
        .body(createValidDeviationJson())
    .when()
        .post("/api/qms/deviations")
    .then()
        .statusCode(201)
        .body("success", equalTo(true))
        .body("data.deviationNumber", notNullValue());
}
```

#### 6.4 ç¼–å†™ç«¯åˆ°ç«¯ä¸šåŠ¡æµç¨‹æµ‹è¯•
**å…¨æµç¨‹æµ‹è¯•åœºæ™¯**:
1. åˆ›å»ºåå·® â†’ æŸ¥è¯¢åå·® â†’ æ›´æ–°çŠ¶æ€ â†’ å…³é—­åå·®
2. åˆ›å»ºCAPA â†’ æ·»åŠ è¡ŒåŠ¨é¡¹ â†’ å®Œæˆè¡ŒåŠ¨é¡¹ â†’ éªŒè¯æœ‰æ•ˆæ€§
3. å˜æ›´ç”³è¯· â†’ è¯„å®¡å®¡æ‰¹ â†’ æ‰§è¡Œå˜æ›´ â†’ éªŒè¯æ•ˆæœ

### Phase 7: ä¸šåŠ¡æµ‹è¯•åœºæ™¯

#### 7.1 åå·®æŠ¥å‘Šå’Œå¤„ç†å…¨æµç¨‹æµ‹è¯•
**æµ‹è¯•åœºæ™¯** (ç”¨è‡ªç„¶è¯­è¨€æè¿°ï¼Œæ¨¡æ‹Ÿå®é™…ä¸šåŠ¡æ“ä½œ):

**åœºæ™¯1: ç”Ÿäº§åå·®æŠ¥å‘Šæµç¨‹**
1. ç”Ÿäº§æ“ä½œå‘˜å‘ç°æå–å·¥åºæ¸©åº¦è¶…æ ‡5â„ƒ
2. ç™»å½•QMSç³»ç»Ÿï¼Œç‚¹å‡»"æŠ¥å‘Šåå·®"
3. å¡«å†™åå·®ä¿¡æ¯: æ ‡é¢˜"æå–æ¸©åº¦è¶…æ ‡", æè¿°è¯¦ç»†æƒ…å†µ, é€‰æ‹©ä¸¥é‡ç¨‹åº¦HIGH
4. ç³»ç»Ÿè‡ªåŠ¨ç”Ÿæˆç¼–å·DEV-2024-0101-001, è®¡ç®—æˆªæ­¢æ—¶é—´24å°æ—¶
5. ä¸Šä¼ è®¾å¤‡æˆªå›¾ä½œä¸ºé™„ä»¶
6. åˆ›å»ºæˆåŠŸåï¼ŒçŸ­ä¿¡é€šçŸ¥è´¨é‡å·¥ç¨‹å¸ˆç«‹å³å¤„ç†

**åœºæ™¯2: è´¨é‡å·¥ç¨‹å¸ˆå¤„ç†æµç¨‹**
1. è´¨é‡å·¥ç¨‹å¸ˆæ”¶åˆ°é€šçŸ¥ï¼ŒæŸ¥çœ‹åå·®è¯¦æƒ…
2. è¯„ä¼°æ ¹æœ¬åŸå› : æ¸©åº¦ä¼ æ„Ÿå™¨æ•…éšœ
3. åˆ¶å®šçº æ­£æªæ–½: æ›´æ¢ä¼ æ„Ÿå™¨å¹¶é‡æ–°éªŒè¯
4. çŠ¶æ€æ›´æ–°ä¸º"çº æ­£ä¸­"
5. ç³»ç»Ÿè‡ªåŠ¨é€šçŸ¥æ“ä½œå‘˜æ‰§è¡Œçº æ­£æªæ–½

#### 7.2 CAPAé—­ç¯ç®¡ç†æµç¨‹æµ‹è¯•
**ä¸šåŠ¡åœºæ™¯**:
- æ¥æº: æ¥è‡ªç”Ÿäº§åå·®
- æ ¹æœ¬åŸå› : è®¾å¤‡ç»´æŠ¤ä¸åŠæ—¶
- çº æ­£æªæ–½: å»ºç«‹å®šæœŸç»´æŠ¤åˆ¶åº¦
- é¢„é˜²æªæ–½: æ·»åŠ è®¾å¤‡é¢„è­¦ç³»ç»Ÿ
- éªŒè¯æ–¹å¼: è§‚å¯Ÿ6ä¸ªæœˆç»´æŠ¤è®°å½•

#### 7.5 GMPåˆè§„æ€§éªŒè¯
**éªŒè¯è¦ç‚¹**:
- æ‰€æœ‰æ“ä½œæœ‰å®¡è®¡è¿½è¸ª
- æ•°æ®ç”µå­ç­¾åå®Œå–„
- æƒé™æ§åˆ¶ä¸¥æ ¼ (æ•°æ®éš”ç¦»)
- æ“ä½œæ—¥å¿—å®Œæ•´
- ç”µå­åŒ–è®°å½•ç¬¦åˆFDA 21 CFR Part 11

---

## ğŸ“Š æµ‹è¯•æŒ‡æ ‡å’Œæ ‡å‡†

### è´¨é‡é—¨ç¦ (Quality Gates)
- [ ] **å•å…ƒæµ‹è¯•è¦†ç›–ç‡**: ç±»è¦†ç›–ç‡ â‰¥ 90%, åˆ†æ”¯è¦†ç›–ç‡ â‰¥ 80%
- [ ] **é›†æˆæµ‹è¯•é€šè¿‡ç‡**: â‰¥ 95%
- [ ] **æ€§èƒ½æµ‹è¯•**: APIå“åº”æ—¶é—´ < 500ms (95åˆ†ä½)
- [ ] **é™æ€ä»£ç åˆ†æ**: SonarQubeè´¨é‡é—¨ç¦é€šè¿‡
- [ ] **å®‰å…¨æ‰«æ**: æ— é«˜å±å®‰å…¨æ¼æ´

### ç›‘æ§æŒ‡æ ‡
- [ ] åº”ç”¨å¥åº·æ£€æŸ¥ç«¯ç‚¹æ­£å¸¸
- [ ] JVMå†…å­˜ä½¿ç”¨ç‡ < 80%
- [ ] æ•°æ®åº“è¿æ¥æ± ä½¿ç”¨ç‡ < 80%
- [ ] æ¶ˆæ¯é˜Ÿåˆ—ç§¯å‹ < 1000æ¡

### åˆè§„æ£€æŸ¥
- [ ] æ•°æ®å®¡è®¡æ—¥å¿—å®Œæ•´
- [ ] ç”¨æˆ·æ“ä½œè®°å½•å¯è¿½æº¯
- [ ] æƒé™æ§åˆ¶ä¸¥æ ¼
- [ ] æ•°æ®å¤‡ä»½ç­–ç•¥åˆ°ä½

---

## ğŸ› ï¸ å¼€å‘ç¯å¢ƒå‡†å¤‡

### å¿…éœ€è½¯ä»¶
- JDK 17+
- Maven 3.6+
- PostgreSQL 13+
- Redis 6+
- RabbitMQ 3.8+
- Docker & Docker Compose

### å¼€å‘å·¥å…·
- IntelliJ IDEA æˆ– VS Code
- Postman ç”¨äºAPIæµ‹è¯•
- DBeaver ç”¨äºæ•°æ®åº“ç®¡ç†
- Git ç”¨äºç‰ˆæœ¬æ§åˆ¶

### æœ¬åœ°ç¯å¢ƒå¯åŠ¨
```bash
# å¯åŠ¨åŸºç¡€æœåŠ¡
docker-compose up postgres redis rabbitmq

# å¯åŠ¨QMSæœåŠ¡
cd services/qms-service
mvn spring-boot:run

# è¿è¡Œæµ‹è¯•
mvn test                    # å•å…ƒæµ‹è¯•
mvn verify -P integration   # é›†æˆæµ‹è¯•
mvn test jacoco:report      # è¦†ç›–ç‡æŠ¥å‘Š
```

---

## ğŸš€ å®æ–½å»ºè®®

### å¼€å‘é¡ºåºå»ºè®®
1. **ä»æ•°æ®æ¨¡å‹å¼€å§‹**: å…ˆå»ºç«‹åšå®çš„æ•°æ®åŸºç¡€
2. **åˆ†æ¨¡å—å¹¶è¡Œå¼€å‘**: å››ä¸ªæ ¸å¿ƒæ¨¡å—å¯ä»¥å¹¶è¡Œå¼€å‘
3. **å…ˆæœåŠ¡å±‚å†APIå±‚**: ä¸šåŠ¡é€»è¾‘å…ˆè¡Œï¼Œç¡®ä¿APIå±‚åªå¤„ç†HTTPåè®®
4. **æµ‹è¯•è´¯ç©¿å§‹ç»ˆ**: æ¯ä¸ªåŠŸèƒ½å®Œæˆå³ç¼–å†™ç›¸åº”æµ‹è¯•
5. **æŒç»­é›†æˆ**: ä½¿ç”¨GitHub Actionsè¿›è¡Œè‡ªåŠ¨åŒ–æµ‹è¯•

### æ—¶é—´ä¼°ç®—
- Phase 1-2: 1å‘¨ (åŸºç¡€å»ºè®¾)
- Phase 3-4: 2å‘¨ (æ ¸å¿ƒåŠŸèƒ½)
- Phase 5: 1å‘¨ (å•å…ƒæµ‹è¯•)
- Phase 6: 1å‘¨ (é›†æˆæµ‹è¯•)
- Phase 7: 1å‘¨ (ä¸šåŠ¡éªŒè¯)

### é£é™©æ§åˆ¶
- **æŠ€æœ¯é£é™©**: å¤šèŠ±æ—¶é—´åœ¨å®ä½“å…³ç³»è®¾è®¡ä¸Š
- **æµ‹è¯•é£é™©**: é‡è§†é›†æˆæµ‹è¯•ï¼Œç¡®ä¿æ¨¡å—é—´åä½œæ­£å¸¸
- **åˆè§„é£é™©**: GMPè¦æ±‚ä¸¥æ ¼ï¼Œé‡ç‚¹å…³æ³¨å®¡è®¡è¿½è¸ª
- **æ€§èƒ½é£é™©**: æ³¨æ„æ•°æ®åº“æŸ¥è¯¢ä¼˜åŒ–ï¼Œå¤§è¡¨åˆ†é¡µå¤„ç†

---

**æ­¤TODOæ¸…å•ç”±AIä¸“ç”¨æ ¼å¼ç¼–å†™ï¼ŒæŒ‡å¯¼AIå¼€å‘è€…ç³»ç»Ÿæ€§å®ŒæˆQMSå­ç³»ç»Ÿçš„å®Œæ•´å®ç°ã€‚**
