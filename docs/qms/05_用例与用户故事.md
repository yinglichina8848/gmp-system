# QMS子系统（质量管理系统）用例与用户故事

## 1. QMS核心功能用例

### 1.1 偏差管理用例

#### 用例ID：UC-QMS-DEV-001
#### 用例名称：偏差事件报告与分级
#### 参与者：生产操作员、质量工程师、质量经理
#### 前置条件：用户已登录系统，具有偏差报告权限
#### 基本流程：
1. 生产操作员在生产过程中发现偏差事件
2. 登录QMS系统，点击"报告偏差"
3. 系统显示偏差报告表单
4. 填写偏差基本信息：
   - 标题（必填，200字符以内）
   - 偏差描述（必填，详细说明偏差情况）
   - 发生时间（必填，日期时间选择器）
   - 发生地点（必填，选择生产工序/生产线）
   - 严重程度预估（必选：LOW/MEDIUM/HIGH/CRITICAL）
   - 影响范围（多选：产品质量/生产过程/设备安全/人员安全/环境影响）
5. 上传相关文件证据（可选，支持多文件上传，最大10MB）
6. 点击"提交"按钮
7. 系统验证表单完整性
8. 系统自动生成偏差编号（格式：DEV-YYYY-MMDD-001）
9. 系统根据严重程度确定响应时间：
   - CRITICAL：立即通知质量经理（短信+系统内消息）
   - HIGH：4小时内响应通知
   - MEDIUM：24小时内响应通知
   - LOW：7天内响应通知
10. 系统自动将偏差分配给指定的质量工程师处理

#### 异常流程：
- **表单不完整**：系统提示必填字段不能为空
- **文件上传失败**：系统提示文件大小超限或格式不支持
- **网络异常**：系统提示保存草稿并支持后续提交

#### 后置条件：
- 偏差记录保存到数据库
- 相关人员收到系统通知
- 偏差状态更新为"OPEN"
- 操作日志记录完整

#### 替代流程：
1. **草稿保存**：用户可保存为草稿，后续完善后再提交
2. **模板选择**：系统提供不同类型的偏差报告模板

#### 验收标准：
- [ ] 偏差报告表单完整且易用
- [ ] 编号自动生成且唯一
- [ ] 通知机制按严重程度分级
- [ ] 文件上传功能正常
- [ ] 权限控制正确实施

### 1.2 CAPA管理用例

#### 用例ID：UC-QMS-CAPA-001
#### 用例名称：CAPA计划创建与执行跟踪
#### 参与者：质量工程师、责任部门负责人、质量经理
#### 前置条件：存在需要CAPA处理的偏差或质量事件
#### 基本流程：
1. 质量工程师基于偏差调查结果，识别需要CAPA的问题
2. 点击"创建CAPA"按钮
3. 选择CAPA来源（偏差/审计发现/投诉/主动改进）
4. 填写CAPA基本信息：
   - CAPA编号（自动生成：CAPA-YYYY-MMDD-001）
   - 标题（必填，详细描述CAPA目标）
   - 问题描述（必填，说明问题的背景和影响）
5. 系统自动进行根本原因分析引导：
   - 提供5W2H分析框架
   - 支持鱼骨图工具
   - 记录分析过程
6. 制定纠正措施和预防措施：
   - 纠正措施（短期解决方案）
   - 预防措施（长期解决方案）
   - 责任人分配
   - 完成期限设置
7. 设置验证标准：
   - 效果验证标准
   - 验证完成时间
   - 验证负责人
8. 质量工程师提交CAPA计划审批
9. 质量经理进行审批：
   - 审核内容完整性
   - 评估措施有效性
   - 决定是否通过
10. 审批通过后，系统向责任人发送任务通知
11. 责任人接收任务并开始执行
12. 系统提供进度跟踪：
    - 状态更新（未开始/进行中/已完成/延期）
    - 进度百分比
    - 备注说明
13. 系统在到期前3天自动提醒责任人
14. CAPA完成后，责任人提交完成报告
15. 质量部门进行有效性验证
16. 验证通过后质量经理确认关闭CAPA

#### 异常流程：
- **审批驳回**：返工修改后重新提交
- **执行延期**：提交延期申请说明原因
- **验证不通过**：制定新的措施重新执行

#### 验收标准：
- [ ] CAPA流程全链路跟踪
- [ ] 根本原因分析工具可用
- [ ] 措施区分纠正与预防
- [ ] 有效性验证机制完善
- [ ] 自动提醒功能正常

## 2. QMS用户故事

### 2.1 偏差管理用户故事

**用户故事 1：紧急偏差快速上报**
```
作为一个生产操作员，
我希望能在发现紧急偏差时快速上报系统，
以便及时处理质量风险。

验收标准：
- 从发现问题到完成上报不超过5分钟
- 不需要填写过多元余信息
- 系统自动计算偏差等级
- 关键人员立即收到通知
```

**用户故事 2：质量工程师偏差调查支持**
```
作为一个质量工程师，
我希望系统提供调查模板和工具，
以便高效完成偏差调查。

验收标准：
- 提供标准调查清单
- 支持附件上传
- 自动关联相关生产数据
- 调查结果可导出报告
```

**用户故事 3：质量经理风险监控**
```
作为一个质量经理，
我希望能实时监控质量事件分布，
以便及时识别风险趋势。

验收标准：
- 实时统计偏差数量和趋势
- 支持按严重程度和类别筛选
- 可视化图表展示
- 自动生成月度质量报告
```

### 2.2 CAPA管理用户故事

**用户故事 4：CAPA执行进度跟踪**
```
作为一个责任部门负责人，
我希望能实时更新CAPA执行进度，
以便让质量部门及时了解执行情况。

验收标准：
- 移动端支持进度更新
- 系统自动计算完成百分比
- 支持添加备注和照片证据
- 进度变更后即时通知相关人员
```

**用户故事 5：CAPA有效性验证自动化**
```
作为一个质量工程师，
我希望系统能辅助进行CAPA有效性验证，
以便客观评估措施效果。

验收标准：
- 提供验证指标设置
- 支持数据对比分析
- 自动计算改进效果
- 生成验证报告模板
```

### 2.3 变更控制用户故事

**用户故事 6：生产变更风险评估**
```
作为一个变更负责人，
我希望系统能帮助评估变更风险，
以便做出正确的变更决策。

验收标准：
- 自动识别潜在影响范围
- 提供风险评估清单
- 计算变更实施难度
- 生成风险 mitigation建议
```

**用户故事 7：多部门审批协作**
```
作为一个变更申请人，
我希望能协调各部门审批意见，
以便变更能顺利通过。

验收标准：
- 支持并行审批流程
- 审批状态实时更新
- 邮件通知审批人
- 支持条件审批路线
```

### 2.4 审计管理用户故事

**用户故事 8：审计发现闭环管理**
```
作为一个审计员，
我希望审计发现能自动创建CAPA，
以便确保整改措施落实。

验收标准：
- 审计发现自动关联到CAPA流程
- 整改进展自动跟踪
- 验证结果自动确认
- 审计历史可追溯
```

**用户故事 9：审计计划智能化**
```
作为一个质量经理，
我希望系统能基于历史数据制定审计计划，
以便提高审计效率。

验收标准：
- 风险评估自动计算
- 审计频率动态调整
- 资源配置优化建议
- 计划执行状况监控
```

## 3. QMS验收标准

### 3.1 功能验收标准

#### 偏差管理验收标准
- [ ] **创建功能**：偏差表单填写完整，支持文件上传，编号自动生成
- [ ] **分类功能**：严重程度正确分级，影响范围精确评估
- [ ] **分配功能**：自动分配给相应质量工程师，通知机制完善
- [ ] **调查功能**：提供调查模板，支持根因分析工具
- [ ] **审批功能**：多级审批流程，电子签名支持
- [ ] **关闭功能**：验证措施有效性后正确关闭
- [ ] **追溯功能**：完整审计日志，可追溯所有操作历史

#### CAPA管理验收标准
- [ ] **创建功能**：支持多种CAPA来源，自动编号生成
- [ ] **分析功能**：提供根本原因分析工具，记录分析过程
- [ ] **计划功能**：措施分类明确，责任人和期限清晰
- [ ] **执行功能**：进度实时跟踪，自动提醒机制
- [ ] **验证功能**：效果评估客观，支持数据对比分析
- [ ] **关闭功能**：验证通过后正确关闭并归档

#### 变更控制验收标准
- [ ] **申请功能**：变更表单完善，附件上传支持
- [ ] **评估功能**：风险评估工具，影响分析完备
- [ ] **审批功能**：按类型分级审批，支持条件审批
- [ ] **执行功能**：进度跟踪，验证计划落实
- [ ] **关闭功能**：变更完成验证，文档更新

#### 审计管理验收标准
- [ ] **计划功能**：基于风险制定审计计划
- [ ] **执行功能**：检查项数字化，证据记录完善
- [ ] **发现功能**：不合格项分类记录，影响评估
- [ ] **整改功能**：自动生成CAPA，跟踪整改进度
- [ ] **报告功能**：审计报告自动生成，管理层审阅

### 3.2 性能验收标准

#### 并发处理能力
- [ ] **用户并发**：支持至少100个用户同时操作
- [ ] **数据查询**：复杂查询响应时间小于3秒
- [ ] **报表生成**：标准报表生成时间小于30秒
- [ ] **文件上传**：10MB文件上传时间小于10秒

#### 系统稳定性
- [ ] **可用性**：99.9%的系统可用性
- [ ] **数据完整性**：关键质量数据零丢失
- [ ] **备份恢复**：异地备份恢复时间小于4小时
- [ ] **容灾切换**：自动故障转移时间小于30秒

### 3.3 GMP合规验收标准

#### 电子记录要求
- [ ] **审计追踪**：所有操作均有完整审计日志
- [ ] **电子签名**：符合FDA 21 CFR Part 11要求
- [ ] **数据完整性**：数据防篡改，版本追溯
- [ ] **权限控制**：严格的角色和功能权限管理

#### 质量记录要求
- [ ] **记录唯一性**：每个质量记录都有唯一标识
- [ ] **状态管理**：记录状态变化必须有审批
- [ ] **文档关联**：质量事件与相关文档关联
- [ ] **定期审核**：支持质量记录定期质量审核

### 3.4 用户体验验收标准

#### 界面友好性
- [ ] **操作简单**：核心操作不超过3步完成
- [ ] **导航清晰**：菜单分层合理，查找便捷
- [ ] **反馈及时**：操作结果立即反馈
- [ ] **帮助完善**：在线帮助和操作指南

#### 移动端兼容性
- [ ] **响应式设计**：支持PC、平板、手机端
- [ ] **操作便捷**：触摸操作友好，录入效率高
- [ ] **实时同步**：数据实时同步，云端备份

---

**文档信息：**
- 版本：v1.0
- 更新日期：2024年
- 编制人员：业务分析团队
- 状态：Draft
