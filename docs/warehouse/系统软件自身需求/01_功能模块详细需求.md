# 仓库管理子系统 - 功能模块详细需求文档

## 1. 文档目的

本文档详细描述仓库管理子系统的各个功能模块的具体需求，包括功能点、输入输出、处理逻辑、业务规则等。本文档作为系统设计和开发的重要依据，确保开发团队对每个功能模块有清晰的理解。

## 2. 功能模块概述

仓库管理子系统包含以下核心功能模块：

1. 物料主数据管理
2. 库存管理
3. 入库管理
4. 发放管理
5. 批次追溯管理
6. 货位管理
7. 供应商管理
8. 报表统计管理
9. 系统管理

## 3. 物料主数据管理模块

### 3.1 功能描述

物料主数据管理模块负责维护所有物料的基本信息，为其他模块提供基础数据支持。该模块支持物料信息的创建、查询、修改、删除等操作，并提供物料分类管理功能。

### 3.2 功能点详细需求

#### 3.2.1 物料信息维护

**功能点编号**：WH-F001-01

**功能描述**：允许仓库管理员创建、查询、修改和删除物料的基本信息。

**输入**：
- 物料编号（唯一标识）
- 物料名称
- 物料规格
- 物料型号
- 物料分类
- 计量单位
- 安全库存
- 最小采购量
- 描述信息
- 图片/文档（可选）

**输出**：
- 物料信息维护操作的结果（成功/失败）
- 错误信息（如有）

**处理逻辑**：
1. 验证物料编号的唯一性
2. 验证必填字段的完整性
3. 执行相应的创建/修改/删除操作
4. 记录操作日志

**业务规则**：
- 物料编号必须唯一
- 已被使用的物料信息不允许删除，只能禁用
- 禁用的物料不允许在新的业务操作中使用

#### 3.2.2 物料分类管理

**功能点编号**：WH-F001-02

**功能描述**：允许仓库管理员维护物料的分类体系。

**输入**：
- 分类编号
- 分类名称
- 上级分类
- 描述

**输出**：
- 分类管理操作的结果
- 物料分类树

**处理逻辑**：
1. 维护多级分类结构
2. 支持分类的创建、修改、删除
3. 提供分类树的展示

**业务规则**：
- 分类名称在同级下必须唯一
- 有下级分类的分类不允许删除

#### 3.2.3 物料导入导出

**功能点编号**：WH-F001-03

**功能描述**：支持批量导入和导出物料信息。

**输入**：
- 导入文件（Excel或CSV格式）
- 导出条件

**输出**：
- 导入结果报告
- 导出文件

**处理逻辑**：
1. 导入时验证数据格式和内容合法性
2. 提供导入错误的数据行和错误原因
3. 导出时根据条件筛选数据

**业务规则**：
- 导入文件必须符合指定的模板格式
- 单次导入数量不超过1000条

## 4. 库存管理模块

### 4.1 功能描述

库存管理模块负责监控和管理物料的库存状态，包括当前库存数量、库存变动记录、库存预警等功能，确保库存数据的准确性和及时性。

### 4.2 功能点详细需求

#### 4.2.1 库存查询

**功能点编号**：WH-F002-01

**功能描述**：提供多种条件的库存查询功能，包括按物料、货位、批次等维度查询库存信息。

**输入**：
- 查询条件（物料编号/名称、货位、批次、库存状态等）
- 分页参数

**输出**：
- 库存信息列表，包含：
  - 物料编号、名称、规格
  - 当前库存数量
  - 可用库存数量
  - 分配数量
  - 单位
  - 批次号（如有）
  - 货位信息
  - 有效期（如有）
  - 库存状态

**处理逻辑**：
1. 根据查询条件过滤数据
2. 计算实时库存数量
3. 分页展示结果

**业务规则**：
- 查询结果应实时反映最新库存状态
- 提供模糊查询和精确查询两种方式

#### 4.2.2 库存预警

**功能点编号**：WH-F002-02

**功能描述**：对低于安全库存、接近有效期或长期未使用的物料进行预警提示。

**输入**：
- 预警规则设置：
  - 安全库存阈值
  - 有效期预警天数
  - 呆滞物料判定天数

**输出**：
- 库存预警列表
- 预警通知（系统消息、邮件等）

**处理逻辑**：
1. 定期扫描库存数据
2. 对比预警规则，识别需要预警的物料
3. 生成预警通知

**业务规则**：
- 预警频率可配置（每日、每周等）
- 预警信息需要记录处理状态

#### 4.2.3 库存调整

**功能点编号**：WH-F002-03

**功能描述**：允许在特殊情况下手动调整库存数量，并记录调整原因。

**输入**：
- 物料编号
- 调整数量
- 调整原因
- 备注

**输出**：
- 调整结果
- 调整记录

**处理逻辑**：
1. 验证调整数量的合理性
2. 记录调整前的库存状态
3. 执行库存数量调整
4. 记录调整操作日志

**业务规则**：
- 库存调整必须经过审批
- 调整操作必须记录详细的原因和审批信息
- 调整操作不可撤销，如需纠正需进行新的调整操作

## 5. 入库管理模块

### 5.1 功能描述

入库管理模块负责处理物料进入仓库的全过程，包括入库单的创建、审核、执行和查询等功能，确保入库过程的规范化和数据的准确性。

### 5.2 功能点详细需求

#### 5.2.1 入库单创建

**功能点编号**：WH-F003-01

**功能描述**：创建新的入库单，记录物料入库信息。

**输入**：
- 入库类型（采购入库、生产入库、退货入库等）
- 供应商信息（采购入库时）
- 工单信息（生产入库时）
- 物料列表（物料编号、名称、数量、批次、有效期等）
- 预计到货日期
- 备注

**输出**：
- 入库单编号
- 入库单详情

**处理逻辑**：
1. 生成唯一的入库单编号
2. 验证物料信息的准确性
3. 关联相关业务单据（如采购订单）
4. 保存入库单信息

**业务规则**：
- 入库单编号必须唯一
- 采购入库必须关联有效的采购订单
- 生产入库必须关联有效的生产工单

#### 5.2.2 入库单审核

**功能点编号**：WH-F003-02

**功能描述**：审核入库单的准确性和合法性。

**输入**：
- 入库单编号
- 审核意见（通过/拒绝）
- 备注

**输出**：
- 审核结果
- 入库单状态更新

**处理逻辑**：
1. 检查入库单的完整性
2. 验证关联业务单据的有效性
3. 根据审核意见更新入库单状态
4. 记录审核操作

**业务规则**：
- 只有具有审核权限的用户才能执行审核操作
- 已审核通过的入库单不能修改，只能取消审核

#### 5.2.3 入库执行

**功能点编号**：WH-F003-03

**功能描述**：执行实际的物料入库操作，更新库存数据。

**输入**：
- 入库单编号
- 实际入库数量
- 存放货位
- 操作人员

**输出**：
- 执行结果
- 库存更新确认

**处理逻辑**：
1. 验证入库单状态是否为已审核
2. 记录实际入库信息
3. 更新库存数量
4. 生成入库记录

**业务规则**：
- 实际入库数量不得超过入库单数量
- 入库操作执行后，入库单状态变为已完成
- 入库操作不可逆，如需修改需通过其他业务流程（如退货）处理

## 6. 发放管理模块

### 6.1 功能描述

发放管理模块负责处理物料从仓库发出的全过程，包括发放申请、审核、执行和查询等功能，确保物料按照规定的流程和权限进行发放。

### 6.2 功能点详细需求

#### 6.2.1 发放申请创建

**功能点编号**：WH-F004-01

**功能描述**：创建物料发放申请。

**输入**：
- 申请部门/人员
- 发放用途（生产、研发、维修等）
- 关联单据（如工单编号）
- 物料列表（物料编号、需求数量等）
- 申请日期
- 预计领取日期

**输出**：
- 发放申请编号
- 申请详情

**处理逻辑**：
1. 生成唯一的发放申请编号
2. 验证物料信息的准确性
3. 关联相关业务单据
4. 保存发放申请信息

**业务规则**：
- 发放申请编号必须唯一
- 生产物料发放必须关联有效的生产工单

#### 6.2.2 发放申请审核

**功能点编号**：WH-F004-02

**功能描述**：审核发放申请的合理性和必要性。

**输入**：
- 发放申请编号
- 审核意见（通过/拒绝）
- 备注

**输出**：
- 审核结果
- 申请状态更新

**处理逻辑**：
1. 检查申请的完整性
2. 验证关联业务单据的有效性
3. 检查库存是否充足
4. 根据审核意见更新申请状态
5. 记录审核操作

**业务规则**：
- 只有具有审核权限的用户才能执行审核操作
- 库存不足时，可以部分审核通过

#### 6.2.3 发放执行

**功能点编号**：WH-F004-03

**功能描述**：执行实际的物料发放操作，扣减库存。

**输入**：
- 发放申请编号
- 实际发放数量
- 物料批次选择
- 发放人
- 领取人

**输出**：
- 执行结果
- 发放单号
- 库存更新确认

**处理逻辑**：
1. 验证申请状态是否为已审核
2. 按照先进先出原则选择物料批次
3. 验证库存是否充足
4. 记录实际发放信息
5. 扣减库存数量
6. 生成发放记录

**业务规则**：
- 实际发放数量不得超过申请数量
- 必须按照先进先出原则选择物料批次
- 发放操作执行后，申请状态变为已完成

## 7. 批次追溯管理模块

### 7.1 功能描述

批次追溯管理模块负责记录和跟踪物料的批次信息，支持正向追溯（从原材料到产品）和反向追溯（从产品到原材料），为质量控制和问题排查提供支持。

### 7.2 功能点详细需求

#### 7.2.1 批次信息管理

**功能点编号**：WH-F005-01

**功能描述**：记录和维护物料的批次信息。

**输入**：
- 物料编号
- 批次号
- 生产厂商
- 生产日期
- 有效期
- 入库日期
- 供应商
- 检验状态

**输出**：
- 批次信息记录
- 批次查询结果

**处理逻辑**：
1. 记录物料批次的详细信息
2. 关联相关的入库单和检验记录
3. 维护批次的当前状态

**业务规则**：
- 批次号在同物料下必须唯一
- 批次信息应与入库操作自动关联

#### 7.2.2 正向追溯

**功能点编号**：WH-F005-02

**功能描述**：从原材料批次出发，追踪其用于哪些产品生产。

**输入**：
- 原材料编号
- 原材料批次号
- 查询时间范围

**输出**：
- 使用该批次原材料的所有产品列表
- 每个产品的生产信息和批次信息
- 产品的销售和发货信息

**处理逻辑**：
1. 查询该批次原材料的所有发放记录
2. 关联对应的生产工单
3. 查询工单生产的产品批次
4. 追踪产品的流向

**业务规则**：
- 应提供可视化的追溯路径展示
- 追溯结果应包含完整的时间线信息

#### 7.2.3 反向追溯

**功能点编号**：WH-F005-03

**功能描述**：从产品批次出发，追踪其使用了哪些原材料批次。

**输入**：
- 产品编号
- 产品批次号

**输出**：
- 该批次产品使用的所有原材料列表
- 每个原材料的批次信息和供应商信息
- 原材料的入库和检验信息

**处理逻辑**：
1. 查询该批次产品的生产工单
2. 查询工单使用的所有物料发放记录
3. 关联对应的原材料批次
4. 查询原材料的来源信息

**业务规则**：
- 应提供可视化的追溯路径展示
- 追溯结果应包含完整的时间线信息

#### 7.2.4 追溯报告生成

**功能点编号**：WH-F005-04

**功能描述**：根据追溯结果生成详细的追溯报告。

**输入**：
- 追溯查询条件
- 报告格式选择（PDF、Excel等）

**输出**：
- 追溯报告文件

**处理逻辑**：
1. 根据查询条件执行追溯查询
2. 收集相关的详细信息
3. 按照选定的格式生成报告
4. 提供报告下载功能

**业务规则**：
- 报告应包含完整的追溯链信息
- 应提供打印和导出功能

## 8. 货位管理模块

### 8.1 功能描述

货位管理模块负责管理仓库内的货位信息，支持货位的创建、查询、修改和删除，以及货位状态的跟踪和管理，优化仓库空间利用。

### 8.2 功能点详细需求

#### 8.2.1 货位信息维护

**功能点编号**：WH-F006-01

**功能描述**：创建和维护货位的基本信息。

**输入**：
- 货位编码（区域-货架-层-位）
- 仓库名称
- 区域名称
- 货架编号
- 层号
- 位号
- 货位状态（可用、占用、禁用等）
- 最大容量
- 适合存放的物料类型
- 备注

**输出**：
- 货位信息记录
- 操作结果

**处理逻辑**：
1. 验证货位编码的唯一性
2. 维护货位的层次结构
3. 保存货位信息

**业务规则**：
- 货位编码必须唯一
- 已被使用的货位不允许删除，只能禁用

#### 8.2.2 货位状态查询

**功能点编号**：WH-F006-02

**功能描述**：查询货位的当前状态和占用情况。

**输入**：
- 查询条件（仓库、区域、货位状态等）

**输出**：
- 货位列表，包含：
  - 货位编码
  - 当前状态
  - 存放的物料信息
  - 占用率
  - 上次状态变更时间

**处理逻辑**：
1. 根据查询条件过滤货位
2. 获取每个货位的当前状态和占用信息
3. 计算货位占用率

**业务规则**：
- 应提供货位状态的可视化展示
- 查询结果应实时反映最新状态

#### 8.2.3 货位分配建议

**功能点编号**：WH-F006-03

**功能描述**：根据物料特性和货位状态，推荐合适的货位进行物料存放。

**输入**：
- 物料编号
- 存放数量

**输出**：
- 推荐货位列表及理由
- 推荐排序

**处理逻辑**：
1. 分析物料的特性和存储要求
2. 查询满足条件的空闲或部分空闲货位
3. 根据优化算法进行排序推荐

**业务规则**：
- 应考虑物料与货位的匹配度
- 应考虑存取效率和空间利用率
- 相同物料的不同批次应尽量存放在相邻货位

## 9. 供应商管理模块

### 9.1 功能描述

供应商管理模块负责维护与仓库业务相关的供应商信息，支持供应商的评级和评估，为采购决策提供参考。

### 9.2 功能点详细需求

#### 9.2.1 供应商信息维护

**功能点编号**：WH-F007-01

**功能描述**：创建和维护供应商的基本信息。

**输入**：
- 供应商编号
- 供应商名称
- 联系人
- 联系电话
- 邮箱
- 地址
- 开户银行及账号
- 税号
- 供应商分类
- 合作状态

**输出**：
- 供应商信息记录
- 操作结果

**处理逻辑**：
1. 验证供应商编号的唯一性
2. 保存供应商信息
3. 记录信息变更历史

**业务规则**：
- 供应商编号必须唯一
- 关键信息（如名称、税号）变更时应记录历史版本

#### 9.2.2 供应商评估

**功能点编号**：WH-F007-02

**功能描述**：对供应商进行定期评估，记录评估结果。

**输入**：
- 供应商编号
- 评估周期
- 评估指标及得分（质量、交付及时性、服务等）
- 评估人
- 评估意见

**输出**：
- 供应商评估报告
- 评估等级

**处理逻辑**：
1. 收集评估数据
2. 根据评估标准计算总分
3. 确定评估等级
4. 保存评估记录

**业务规则**：
- 评估周期可配置（季度、半年、年度）
- 评估结果应作为供应商分类和采购决策的依据

#### 9.2.3 供应商绩效分析

**功能点编号**：WH-F007-03

**功能描述**：分析供应商的历史绩效数据，生成绩效趋势报告。

**输入**：
- 供应商编号
- 分析时间范围
- 分析维度（质量、交付、成本等）

**输出**：
- 供应商绩效趋势图
- 绩效统计数据
- 改进建议

**处理逻辑**：
1. 查询指定时间范围内的历史评估数据
2. 计算各项指标的统计值和变化趋势
3. 生成可视化图表
4. 提供分析结论和建议

**业务规则**：
- 分析结果应直观展示供应商的进步或退步情况
- 应支持多供应商的对比分析

## 10. 报表统计管理模块

### 10.1 功能描述

报表统计管理模块提供丰富的报表和统计功能，帮助管理层和业务人员了解仓库运营状况，支持决策分析。

### 10.2 功能点详细需求

#### 10.2.1 库存报表

**功能点编号**：WH-F008-01

**功能描述**：生成各类库存相关报表。

**输入**：
- 报表类型（库存汇总、库存明细、库存周转等）
- 查询条件（时间范围、物料分类、仓库等）

**输出**：
- 库存报表（表格形式）
- 图表展示（饼图、柱状图、趋势图等）

**处理逻辑**：
1. 根据报表类型和查询条件获取数据
2. 进行数据汇总和计算
3. 生成报表内容和图表
4. 提供导出功能

**业务规则**：
- 报表数据应准确反映当前或历史库存状态
- 应支持报表的定制化配置

#### 10.2.2 业务报表

**功能点编号**：WH-F008-02

**功能描述**：生成各类业务操作相关报表。

**输入**：
- 报表类型（入库汇总、发放汇总、移库汇总等）
- 查询条件（时间范围、操作类型、操作人员等）

**输出**：
- 业务报表（表格形式）
- 图表展示

**处理逻辑**：
1. 根据报表类型和查询条件获取业务数据
2. 进行数据汇总和统计
3. 生成报表内容和图表
4. 提供导出功能

**业务规则**：
- 报表应包含必要的业务指标和统计数据
- 应支持报表的定制化配置

#### 10.2.3 自定义报表

**功能点编号**：WH-F008-03

**功能描述**：允许用户自定义报表的格式和内容。

**输入**：
- 报表名称
- 数据源选择
- 字段选择
- 筛选条件设置
- 排序设置
- 分组设置
- 图表类型选择

**输出**：
- 自定义报表
- 报表预览

**处理逻辑**：
1. 保存用户的自定义报表配置
2. 根据配置生成报表数据
3. 提供报表预览功能
4. 支持报表配置的修改和删除

**业务规则**：
- 应提供友好的用户界面进行报表配置
- 应限制报表的数据量，避免性能问题

## 11. 系统管理模块

### 11.1 功能描述

系统管理模块负责系统的基础配置和管理，包括用户管理、权限管理、系统参数设置等功能，确保系统的安全稳定运行。

### 11.2 功能点详细需求

#### 11.2.1 用户管理

**功能点编号**：WH-F009-01

**功能描述**：管理系统用户账号。

**输入**：
- 用户名
- 密码
- 真实姓名
- 所属部门
- 职位
- 联系方式
- 账号状态（启用/禁用）
- 角色分配

**输出**：
- 用户列表
- 操作结果

**处理逻辑**：
1. 验证用户名的唯一性
2. 加密存储用户密码
3. 保存用户信息和角色分配
4. 记录操作日志

**业务规则**：
- 用户名必须唯一
- 密码必须符合安全要求（长度、复杂度等）
- 连续多次登录失败后，账号应自动锁定

#### 11.2.2 角色权限管理

**功能点编号**：WH-F009-02

**功能描述**：管理系统角色和权限。

**输入**：
- 角色名称
- 权限列表（功能权限、数据权限）
- 角色描述

**输出**：
- 角色列表
- 角色权限配置

**处理逻辑**：
1. 创建和维护角色信息
2. 为角色分配权限
3. 管理角色的继承关系

**业务规则**：
- 角色名称必须唯一
- 权限分配应遵循最小权限原则
- 权限变更应记录审计日志

#### 11.2.3 系统参数设置

**功能点编号**：WH-F009-03

**功能描述**：配置系统运行所需的各类参数。

**输入**：
- 参数类别
- 参数名称
- 参数值
- 参数描述
- 是否可修改

**输出**：
- 参数配置结果
- 参数列表

**处理逻辑**：
1. 验证参数值的有效性
2. 保存参数配置
3. 记录参数变更历史

**业务规则**：
- 关键参数的修改应经过审批
- 参数修改后应立即生效或按配置的生效时间生效

#### 11.2.4 系统日志管理

**功能点编号**：WH-F009-04

**功能描述**：记录和查询系统运行日志。

**输入**：
- 日志类型（操作日志、系统日志、错误日志）
- 查询条件（时间范围、操作人员、操作类型、关键字等）

**输出**：
- 日志列表，包含：
  - 操作时间
  - 操作人员
  - 操作内容
  - 操作结果
  - IP地址

**处理逻辑**：
1. 根据查询条件过滤日志
2. 分页展示日志列表
3. 提供日志导出功能

**业务规则**：
- 日志应包含足够详细的信息用于审计
- 日志保存期限应符合数据保留策略

## 12. 文档版本管理

| 版本号 | 修改日期 | 修改人 | 修改内容 | 审批人 |
|--------|----------|--------|----------|--------|
| V1.0   | 2023-XX-XX | XXX | 初始版本 | XXX |

---

*本文档由仓库管理子系统项目组编制，最终解释权归项目组所有。*