# GMP系统电子文档管理模块场景描述和验收标准

## 文档信息
- **文档版本**: v1.0
- **创建日期**: 2025-11-21
- **最后更新**: 2025-11-21
- **作者**: 产品经理
- **审核人**: 开发团队负责人、质量保证经理

## 目录
1. [核心场景描述](#核心场景描述)
2. [验收标准](#验收标准)
3. [测试方法](#测试方法)

---

## 核心场景描述

### 1.1 文档管理场景

#### 1.1.1 文档创建与提交
- **场景描述**: 文档作者创建新的标准操作规程(SOP)文档
- **参与角色**: 文档作者
- **触发条件**: 作者需要创建新的工作指导文件
- **流程步骤**:
  1. 作者登录系统，点击"新建文档"
  2. 选择文档类型为"SOP"，系统加载SOP模板
  3. 填写文档标题、编号、版本号等基本信息
  4. 在编辑器中编写文档内容，上传相关附件
  5. 设置文档访问权限和关键词
  6. 保存文档草稿
  7. 完成编写后提交审核
  8. 系统生成电子签名请求，作者输入密码确认
  9. 文档状态变为"待审核"，通知相关审核人
- **预期结果**: 文档成功创建并提交到审核流程，作者收到提交确认

#### 1.1.2 文档审核与批准
- **场景描述**: 质量保证经理审核并批准一份新的SOP文档
- **参与角色**: 文档审核员（质量保证经理）
- **触发条件**: 审核员收到文档审核通知
- **流程步骤**:
  1. 审核员登录系统，查看"待审核任务"列表
  2. 选择待审核文档，查看文档详情和内容
  3. 使用版本比较功能检查与旧版本的差异
  4. 在审核意见区输入审核意见
  5. 决定批准文档，点击"批准"按钮
  6. 系统生成电子签名请求，审核员输入密码确认
  7. 文档状态变为"已批准"，通知文档作者
  8. 系统记录完整的审核记录和签名信息
- **预期结果**: 文档成功通过审核，状态更新为"已批准"

#### 1.1.3 文档拒绝与修订
- **场景描述**: 审核员拒绝文档并要求修改
- **参与角色**: 文档审核员、文档作者
- **触发条件**: 审核员发现文档存在问题需要修改
- **流程步骤**:
  1. 审核员在审核界面指出文档中的具体问题
  2. 点击"拒绝"按钮，选择拒绝原因
  3. 系统生成电子签名请求，审核员输入密码确认
  4. 文档状态变为"已拒绝"，通知文档作者
  5. 作者收到通知后，查看审核意见
  6. 修改文档内容，解决审核意见中提出的问题
  7. 修改完成后重新提交审核
  8. 系统再次启动审核流程
- **预期结果**: 文档被拒绝，作者收到明确的修改意见并能够重新提交

#### 1.1.4 文档发布与生效
- **场景描述**: 文档管理员发布已批准的文档
- **参与角色**: 文档管理员
- **触发条件**: 文档已通过最终审核
- **流程步骤**:
  1. 文档管理员查看"待发布文档"列表
  2. 选择已批准的文档，确认发布信息
  3. 设置文档生效日期和过期日期
  4. 点击"发布"按钮
  5. 系统生成电子签名请求，文档管理员输入密码确认
  6. 文档状态变为"已发布"，通知相关人员
  7. 系统自动将旧版本设为"已过期"
  8. 文档在指定日期自动生效
- **预期结果**: 文档成功发布，相关人员收到通知，旧版本自动过期

#### 1.1.5 文档归档与检索
- **场景描述**: 文档管理员将过期文档归档
- **参与角色**: 文档管理员、文档查阅者
- **触发条件**: 文档已过期或不再需要在活动文档库中显示
- **流程步骤**:
  1. 文档管理员筛选过期或需归档的文档
  2. 选择文档，点击"归档"按钮
  3. 填写归档原因，设置归档类别
  4. 系统生成电子签名请求，文档管理员输入密码确认
  5. 文档状态变为"已归档"，从活动文档库移除
  6. 用户通过"归档文档"搜索页面查找归档文档
  7. 根据归档日期、类型、关键词等筛选条件检索
  8. 查看或下载归档文档
- **预期结果**: 文档成功归档，用户仍能通过归档搜索功能找到并访问

### 1.2 版本管理场景

#### 1.2.1 创建新版本
- **场景描述**: 作者更新现有文档创建新版本
- **参与角色**: 文档作者
- **触发条件**: 需要对已发布文档进行更新
- **流程步骤**:
  1. 作者在文档详情页点击"创建新版本"
  2. 系统提示版本类型（主版本/次版本）
  3. 作者选择版本类型，填写变更摘要
  4. 系统复制当前版本内容到新版本编辑界面
  5. 作者修改文档内容
  6. 保存并提交新版本进行审核
  7. 新版本进入审核流程，当前版本仍保持有效
- **预期结果**: 新版本成功创建并提交审核，不影响当前版本的使用

#### 1.2.2 版本比较
- **场景描述**: 审核员比较文档不同版本之间的差异
- **参与角色**: 文档审核员
- **触发条件**: 审核新版本或需要查看历史变更
- **流程步骤**:
  1. 在文档详情页的"版本历史"标签页
  2. 选择两个需要比较的版本
  3. 点击"版本比较"按钮
  4. 系统以并排或高亮方式显示版本差异
  5. 审核员查看并分析差异内容
  6. 确认变更的合理性和完整性
- **预期结果**: 系统清晰显示版本间的差异，帮助审核员理解变更内容

#### 1.2.3 版本回滚
- **场景描述**: 因质量问题需要回滚到之前的稳定版本
- **参与角色**: 文档管理员、质量保证经理
- **触发条件**: 当前版本发现严重错误或问题
- **流程步骤**:
  1. 文档管理员发现当前版本存在严重问题
  2. 提交版本回滚申请，说明回滚原因
  3. 质量保证经理审核回滚申请
  4. 审核通过后，选择需要恢复的历史版本
  5. 点击"恢复此版本"按钮
  6. 系统生成电子签名请求，相关人员签字确认
  7. 系统将选定版本设为当前版本，原当前版本标记为"已撤回"
  8. 通知相关人员版本变更情况
- **预期结果**: 系统成功回滚到指定版本，文档状态正确更新

### 1.3 文档检索场景

#### 1.3.1 简单关键词搜索
- **场景描述**: 用户通过关键词搜索文档
- **参与角色**: 所有用户
- **触发条件**: 用户需要查找特定主题的文档
- **流程步骤**:
  1. 用户在系统顶部搜索框输入关键词（如"清洁验证"）
  2. 系统实时显示搜索建议和初步结果
  3. 用户点击搜索按钮或按回车键
  4. 系统显示搜索结果列表，包含匹配的文档
  5. 用户查看搜索结果摘要
  6. 点击感兴趣的文档查看详情
- **预期结果**: 系统快速返回相关文档，搜索结果准确反映关键词匹配

#### 1.3.2 高级复合检索
- **场景描述**: 文档管理员使用高级检索功能查找特定文档集
- **参与角色**: 文档管理员、审核员
- **触发条件**: 需要根据多个条件精确查找文档
- **流程步骤**:
  1. 用户点击"高级搜索"按钮
  2. 在高级搜索面板中设置多个筛选条件：
     - 文档类型：SOP
     - 部门：生产部
     - 状态：已发布
     - 创建日期：过去6个月
     - 作者：张三
  3. 添加关键词："设备"、"维护"
  4. 点击"搜索"按钮
  5. 系统返回符合所有条件的文档列表
  6. 用户可以进一步按相关性或日期排序
- **预期结果**: 系统返回精确匹配所有筛选条件的文档，支持进一步排序

#### 1.3.3 文档导航浏览
- **场景描述**: 新用户通过分类导航浏览文档库
- **参与角色**: 文档查阅者
- **触发条件**: 用户需要了解文档库结构或发现相关文档
- **流程步骤**:
  1. 用户点击左侧导航栏的"文档分类"
  2. 展开"质量管理"分类
  3. 选择"SOP"子分类
  4. 查看该分类下的所有文档列表
  5. 点击"按部门筛选"，选择"质量部"
  6. 浏览过滤后的文档列表
  7. 点击文档标题查看详情
- **预期结果**: 用户能够通过层次化分类结构轻松浏览和定位文档

### 1.4 权限管理场景

#### 1.4.1 用户权限分配
- **场景描述**: 文档管理员为新入职员工分配文档访问权限
- **参与角色**: 文档管理员、新员工
- **触发条件**: 新员工需要访问工作相关文档
- **流程步骤**:
  1. 文档管理员在"用户管理"页面查找新员工账户
  2. 点击"编辑权限"按钮
  3. 从角色列表中选择"文档查阅者"角色
  4. 设置部门级别的文档访问权限
  5. 保存权限设置
  6. 系统发送权限变更通知给新员工
  7. 新员工登录系统后可以访问授权范围内的文档
- **预期结果**: 新员工成功获得指定权限，能够访问授权文档

#### 1.4.2 敏感文档访问申请
- **场景描述**: 技术人员申请访问限制级别的验证文档
- **参与角色**: 文档查阅者、部门主管、文档管理员
- **触发条件**: 员工需要临时访问超出其常规权限的敏感文档
- **流程步骤**:
  1. 用户在文档详情页点击"申请访问权限"
  2. 填写访问理由和需要的访问期限
  3. 系统将申请提交给部门主管审批
  4. 部门主管审核申请，批准访问请求
  5. 文档管理员收到审批通过的通知
  6. 文档管理员为用户临时授予访问权限
  7. 用户收到权限授予通知，可以访问文档
  8. 访问期限到期后，权限自动回收
- **预期结果**: 用户获得临时访问权限，系统记录完整的申请和审批流程

#### 1.4.3 权限定期评审
- **场景描述**: 文档管理员和质量保证人员进行季度权限评审
- **参与角色**: 文档管理员、质量保证人员
- **触发条件**: 定期（季度）权限审查流程
- **流程步骤**:
  1. 文档管理员生成"权限使用情况报告"
  2. 与质量保证人员一起分析报告
  3. 识别长期未使用的权限和异常权限分配
  4. 提出权限调整建议
  5. 审核并批准权限调整方案
  6. 执行权限回收和调整操作
  7. 记录权限调整的详细信息
  8. 更新权限矩阵文档
- **预期结果**: 系统权限配置得到优化，符合最小权限原则

### 1.5 审计与合规场景

#### 1.5.1 审计日志查询
- **场景描述**: 合规官查询系统审计日志以支持外部审计
- **参与角色**: 合规官
- **触发条件**: 外部审计前准备或内部合规检查
- **流程步骤**:
  1. 合规官登录系统，进入"审计日志"页面
  2. 设置查询条件：
     - 时间范围：过去6个月
     - 操作类型：文档审核、发布、删除
     - 用户：质量部所有用户
  3. 点击"查询"按钮
  4. 系统返回符合条件的审计日志记录
  5. 查看日志详情，包括操作时间、用户、操作内容、IP地址等
  6. 导出审计日志报告为PDF格式
- **预期结果**: 系统提供完整、准确的审计日志，支持多条件查询和导出

#### 1.5.2 电子签名验证
- **场景描述**: 质量审计员验证电子签名的有效性
- **参与角色**: 质量审计员
- **触发条件**: 内部质量审计或外部监管检查
- **流程步骤**:
  1. 审计员选择一份已批准的关键文档
  2. 查看文档的"审核历史"和"电子签名"信息
  3. 验证签名者身份、签名时间和签名理由
  4. 检查签名时的系统环境记录
  5. 确认签名的完整性和不可篡改性
  6. 验证签名过程是否符合21 CFR Part 11要求
- **预期结果**: 系统提供可验证的电子签名信息，符合法规要求

#### 1.5.3 文档变更追溯
- **场景描述**: 调查人员追溯特定文档的完整变更历史
- **参与角色**: 质量调查员
- **触发条件**: 产品质量问题调查需要追溯相关文档变更
- **流程步骤**:
  1. 调查员找到相关文档，进入"版本历史"页面
  2. 查看所有历史版本的列表
  3. 选择关键版本，查看详细的变更记录
  4. 检查每个版本的创建原因、审核记录
  5. 查看相关的变更控制请求(CCR)关联信息
  6. 分析变更时间线与产品质量问题的关联性
  7. 生成变更分析报告
- **预期结果**: 系统提供完整的文档变更历史记录，支持变更追溯

### 1.6 系统管理场景

#### 1.6.1 文档模板管理
- **场景描述**: 文档管理员创建和管理文档模板
- **参与角色**: 文档管理员
- **触发条件**: 需要标准化新类型文档的格式
- **流程步骤**:
  1. 文档管理员进入"系统设置"->"模板管理"
  2. 点击"创建新模板"
  3. 定义模板名称、类型和适用范围
  4. 在编辑器中设计模板结构，包括固定文本、可编辑区域
  5. 设置模板的默认属性和元数据
  6. 保存模板并设置为"启用"
  7. 测试模板在文档创建过程中的可用性
- **预期结果**: 新模板成功创建并可供用户在文档创建时使用

#### 1.6.2 系统参数配置
- **场景描述**: 系统管理员配置EDMS系统参数
- **参与角色**: 系统管理员
- **触发条件**: 系统初始化或需要调整系统行为
- **流程步骤**:
  1. 系统管理员使用管理员账户登录系统
  2. 进入"系统设置"->"系统参数"
  3. 配置以下参数：
     - 文档自动保存间隔：5分钟
     - 会话超时时间：30分钟
     - 密码复杂度要求：启用
     - 审计日志保留期限：3年
     - 电子签名超时时间：60秒
  4. 保存参数设置
  5. 验证参数设置是否生效
- **预期结果**: 系统参数成功更新，系统行为按照配置执行

#### 1.6.3 系统备份与恢复演练
- **场景描述**: IT管理员执行系统数据备份和恢复演练
- **参与角色**: 系统管理员、IT运维人员
- **触发条件**: 定期数据安全演练或系统维护
- **流程步骤**:
  1. 系统管理员选择低峰时段执行备份
  2. 在"系统管理"->"备份与恢复"页面
  3. 选择"完整备份"选项
  4. 执行备份操作，系统生成备份文件
  5. 备份完成后，验证备份文件的完整性
  6. 在测试环境中执行恢复操作
  7. 验证恢复后的数据完整性和系统功能
  8. 记录备份和恢复过程，形成演练报告
- **预期结果**: 系统数据成功备份和恢复，所有文档和元数据保持完整

## 验收标准

### 2.1 功能完整性
- **文档生命周期管理**: 系统必须支持完整的文档生命周期管理，包括创建、编辑、审核、批准、发布、归档等所有阶段
- **版本控制**: 系统必须提供完整的版本控制功能，支持版本创建、比较、回滚和历史查看
- **权限管理**: 权限管理功能必须符合角色权限矩阵的要求，精确控制用户对不同文档和功能的访问权限
- **搜索功能**: 搜索功能必须支持关键词搜索、高级复合检索和分类浏览，搜索结果准确且响应迅速
- **审计追踪**: 所有关键操作必须有完整的审计日志，记录操作人、时间、内容和结果
- **电子签名**: 电子签名功能必须符合21 CFR Part 11的要求，确保签名的唯一性、可验证性和不可篡改性
- **系统集成**: 系统必须能够与其他GMP子系统（如变更管理、培训管理）进行数据集成和流程对接

### 2.2 性能要求
- **响应时间**: 页面加载时间不超过3秒，文档搜索响应时间不超过2秒（标准网络环境下）
- **并发处理**: 系统应支持至少50个用户同时在线操作，不出现明显性能下降
- **文档处理**: 系统能够处理至少10MB的大型文档文件，上传和下载速度符合网络带宽限制
- **数据容量**: 系统能够存储和管理至少100,000份文档，保持良好的检索性能
- **扩展性**: 系统架构应支持未来的用户和数据量增长，无需大规模重构

### 2.3 安全要求
- **认证与授权**: 严格的用户认证机制，支持多因素认证，基于角色的细粒度权限控制
- **数据加密**: 敏感数据在传输和存储过程中必须加密，加密算法符合行业标准
- **会话安全**: 会话管理必须安全，包括超时机制、防会话劫持措施
- **漏洞防护**: 系统必须防范常见的安全漏洞，如SQL注入、XSS攻击、CSRF攻击等
- **安全审计**: 完整的安全审计机制，记录所有安全相关事件，支持安全分析和调查

### 2.4 GMP合规性
- **21 CFR Part 11合规**: 电子记录和电子签名功能必须完全符合21 CFR Part 11的要求
- **审计追踪合规**: 审计追踪必须满足GMP对数据完整性的要求，确保数据可追溯、可重现
- **权限分离**: 系统设计必须支持职责分离原则，关键操作需要适当的授权和审核
- **数据完整性**: 确保文档数据的完整性、准确性、一致性和可靠性
- **验证支持**: 系统必须支持GMP验证活动，提供必要的验证文档和功能

### 2.5 用户体验
- **易用性**: 界面设计直观，操作流程符合用户习惯，降低学习成本
- **可访问性**: 系统必须支持基本的无障碍功能，确保不同能力用户都能使用
- **响应式设计**: 支持桌面和移动设备访问，适应不同屏幕尺寸
- **反馈机制**: 提供清晰的操作反馈和错误提示，帮助用户理解系统状态
- **帮助支持**: 提供完善的在线帮助和用户指南，支持常见问题解答

## 测试方法

### 3.1 功能测试
- **手动测试**: 测试人员按照场景描述执行各功能点的操作，验证功能正确性
- **自动化测试**: 使用自动化测试工具（如Selenium）执行重复的功能测试用例
- **集成测试**: 测试系统各模块之间以及与外部系统的集成功能
- **端到端测试**: 测试完整的业务流程，从用户输入到系统输出的全过程
- **回归测试**: 在系统更新或修复后，重新执行已测试的功能，确保没有引入新问题

### 3.2 性能测试
- **负载测试**: 模拟多用户并发访问，测试系统在正常负载下的性能表现
- **压力测试**: 逐步增加用户负载，确定系统的性能极限和瓶颈
- **响应时间测试**: 测量关键操作的响应时间，确保符合性能要求
- **大数据量测试**: 使用大量文档数据测试系统的存储和检索性能
- **并发操作测试**: 测试多用户同时执行相同或不同操作时的系统稳定性

### 3.3 安全测试
- **渗透测试**: 尝试模拟黑客攻击，发现系统潜在的安全漏洞
- **权限测试**: 验证权限控制的有效性，确保用户只能访问授权的功能和数据
- **密码安全测试**: 测试密码策略的实施和密码保护机制
- **加密测试**: 验证数据加密和解密过程的正确性和安全性
- **审计日志测试**: 测试审计日志的完整性、准确性和不可篡改性

### 3.4 合规性测试
- **法规符合性检查**: 对照21 CFR Part 11等法规要求进行系统功能检查
- **电子签名验证测试**: 验证电子签名功能是否符合法规要求
- **审计追踪完整性测试**: 验证审计追踪是否记录了所有必要的信息
- **数据完整性测试**: 测试系统如何防止、检测和报告数据完整性问题
- **验证文件检查**: 检查系统提供的验证文档是否完整和符合要求

### 3.5 用户验收测试
- **用户场景测试**: 最终用户按照实际业务场景测试系统功能
- **用户反馈收集**: 收集用户对系统易用性、效率和满意度的反馈
- **文档验收**: 验证系统是否生成符合要求的文档和报告
- **培训支持测试**: 测试系统是否支持用户培训和学习
- **上线准备检查**: 检查系统是否准备好进行生产环境部署