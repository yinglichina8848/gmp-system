# 仓库管理系统详细需求分析

## 1. 物料库存管理 (Inventory Management)

### 1.1 数据模型

#### 1.1.1 物料主数据表 (materials)
```sql
CREATE TABLE materials (
    id BIGSERIAL PRIMARY KEY,
    material_code VARCHAR(50) UNIQUE NOT NULL,
    material_name VARCHAR(200) NOT NULL,
    material_type VARCHAR(50), -- RAW_MATERIAL, PACKAGING, FINISHED_PRODUCT
    unit VARCHAR(20) DEFAULT 'KG',
    storage_condition VARCHAR(50), -- ROOM_TEMP, COLD_CHAIN, FROZEN
    expiry_months INTEGER,
    supplier VARCHAR(100),
    specifications TEXT,
    is_active BOOLEAN DEFAULT TRUE,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);
```

#### 1.1.2 库存明细表 (inventory)
```sql
CREATE TABLE inventory (
    id BIGSERIAL PRIMARY KEY,
    material_id BIGINT REFERENCES materials(id),
    batch_number VARCHAR(50) NOT NULL,
    location VARCHAR(100) NOT NULL,
    quantity DECIMAL(15,3),
    unit VARCHAR(20),
    expiry_date DATE,
    received_date DATE,
    received_by VARCHAR(100),
    quality_status VARCHAR(20) DEFAULT 'PENDING',
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    UNIQUE(material_id, batch_number, location)
);
```

## 2. 批次追溯管理 (Batch Traceability)

### 2.1 功能需求

#### 2.1.1 入库批次追溯
- 批次号生成规则：按物料类型+日期+序列号
- 供应商批次信息记录
- 检验结果与批次关联
- 存储位置二维码绑定

#### 2.1.2 出库批次追溯
- 先进先出原则 (FIFO)
- 批次选择算法优化
- 出库批次与生产批次关联
- 追溯记录完整保存

#### 2.1.3 批次库存监控
- 批次过期提前预警
- 库存积压分原因类型
- 批次质量状态实时更新

---

**文档信息：**
- 版本：v1.0
- 状态：Draft
