# 人事管理子系统 - 总体设计

## 📋 文档信息

| 属性 | 值 |
|------|---|
| 文档标题 | 人事管理子系统 - 总体设计 |
| 版本号 | v0.1.0 |
| 创建日期 | 2025年11月20日 |
| 更新日期 | 2025年11月20日 |
| 作者 | GMP系统开发团队 |
| 状态 | 初稿 |

## 1. 概述

### 1.1 文档目的
本文档定义了GMP系统中人事管理子系统的总体设计方案，包括系统架构、功能模块、数据模型、接口设计、安全考虑及部署架构等内容。该文档将作为开发团队实施人事子系统的技术指导和依据。

### 1.2 术语定义
| 术语 | 解释 |
|------|------|
| GMP | 药品生产质量管理规范(Good Manufacturing Practice)，确保药品质量和安全的国际标准 |
| HR | 人力资源(Human Resources)，负责员工招聘、培训、考核等管理工作 |
| EDMS | 电子文档管理系统(Electronic Document Management System)，用于管理企业文档 |
| 资质认证 | 员工在GMP环境下所需的专业资格证明和培训认证 |
| 班次 | 工厂生产的工作时间段安排，如白班、夜班、早班等 |
| 考勤 | 记录和管理员工的出勤、缺勤、迟到、早退等情况 |

## 2. 设计目标

### 2.1 功能性目标
- 建立完善的组织结构管理体系，支持多层级部门管理
- 实现员工全生命周期管理，包括入职、调岗、离职等
- 提供全面的考勤管理功能，支持多种考勤方式和异常处理
- 构建GMP培训管理体系，包括培训计划、执行、评估和记录
- 实现员工资质认证管理，支持证书信息录入、有效期管理和到期预警
- 建立员工绩效评估体系，支持多种评估方式和结果分析
- 提供薪酬管理功能，支持薪资计算、发放记录和报表生成
- 支持与GMP系统其他模块的数据集成和功能协同

### 2.2 非功能性目标
- **性能要求**：系统响应时间<2秒，支持并发用户数≥100人
- **可用性**：系统可用性≥99.9%，支持7x24小时稳定运行
- **安全性**：符合GMP合规要求，实现严格的访问控制和数据加密
- **可扩展性**：采用微服务架构，支持水平扩展和功能扩展
- **可维护性**：代码模块化，文档完善，支持快速定位和修复问题
- **兼容性**：兼容主流浏览器和操作系统，支持移动设备访问

## 3. 架构设计

### 3.1 系统架构图
```
+----------------------------------------------------------+
|                        客户端层                           |
|  Web浏览器   |   移动设备App   |  第三方系统集成接口      |
+----------------------------------------------------------+
            |                  |                  |
            v                  v                  v
+----------------------------------------------------------+
|                        应用层                            |
|  API网关/负载均衡器 - 提供统一入口和请求分发               |
+----------------------------------------------------------+
            |                  |                  |
            v                  v                  v
+----------------------------------------------------------+
|                      业务服务层                           |
|  ┌────────────────────────────────────────────────────┐  |
|  │  员工管理服务  │  考勤管理服务  │  培训管理服务       │  |
|  ├────────────────────────────────────────────────────┤  |
|  │  资质认证服务  │  绩效管理服务  │  薪酬管理服务       │  |
|  ├────────────────────────────────────────────────────┤  |
|  │  组织架构服务  │  报表分析服务  │  系统集成服务       │  |
|  └────────────────────────────────────────────────────┘  |
+----------------------------------------------------------+
            |                  |                  |
            v                  v                  v
+----------------------------------------------------------+
|                      数据层                              |
|  ┌────────────────────────────────────────────────────┐  |
|  │  关系型数据库  │  NoSQL数据库   │  文件存储系统      │  |
|  │ (PostgreSQL)   │  (Redis)      │  (MinIO/S3)      │  |
|  └────────────────────────────────────────────────────┘  |
+----------------------------------------------------------+
```

### 3.2 微服务架构
- **员工管理服务**：处理员工基本信息、档案管理、人员变动等
- **考勤管理服务**：管理员工出勤记录、班次排班、异常处理等
- **培训管理服务**：处理培训计划制定、培训执行、培训记录等
- **资质认证服务**：管理员工资质证书、有效期跟踪、预警提醒等
- **绩效管理服务**：处理绩效指标设定、评估过程、结果分析等
- **薪酬管理服务**：负责薪资结构定义、薪资计算、发放记录等
- **组织架构服务**：管理公司部门、岗位、职级体系等
- **报表分析服务**：提供各类HR数据统计和分析报表
- **系统集成服务**：负责与GMP系统其他模块和外部系统的集成

### 3.3 技术栈选择
- **后端**：
  - 框架：Spring Boot 3.x, Spring Cloud
  - 数据库：PostgreSQL 14+, Redis
  - 缓存：Redis
  - 消息队列：Kafka
  - API文档：SpringDoc OpenAPI
  - 安全框架：Spring Security, JWT

- **前端**：
  - 框架：React 18+, TypeScript
  - UI组件库：Ant Design Pro
  - 状态管理：Redux Toolkit
  - 网络请求：Axios
  - 路由：React Router

- **DevOps**：
  - 容器化：Docker, Kubernetes
  - CI/CD：Jenkins, GitHub Actions
  - 监控：Prometheus, Grafana
  - 日志：ELK Stack

## 4. 核心功能模块

### 4.1 组织架构管理
- **部门管理**：支持多级部门结构，部门信息维护
- **岗位管理**：岗位定义、职责描述、任职要求管理
- **职级体系**：职位等级定义、晋升路径设置
- **组织结构图**：可视化展示组织架构

### 4.2 员工档案管理
- **员工基本信息**：个人信息、联系方式、身份信息管理
- **工作经历**：入职信息、工作变动记录、岗位调整历史
- **合同管理**：劳动合同信息、续签提醒、到期预警
- **员工档案**：电子档案管理、附件上传、档案查询
- **员工变动**：调岗、晋升、降级、离职等变动处理

### 4.3 考勤管理
- **考勤规则**：工作时间设定、考勤周期定义
- **班次管理**：班次设置、排班规则定义
- **考勤记录**：打卡数据采集、手动录入、异常处理
- **考勤统计**：迟到、早退、请假、加班等统计
- **考勤报表**：各类考勤数据报表生成

### 4.4 培训管理
- **培训计划**：年度培训计划制定、计划执行跟踪
- **培训课程**：课程内容定义、讲师管理、教材管理
- **培训执行**：培训报名、考勤、考核评估
- **培训记录**：员工培训历史记录、证书发放
- **培训报表**：培训覆盖率、完成率等统计报表

### 4.5 资质认证管理
- **证书类别**：GMP相关证书类型定义
- **证书管理**：证书信息录入、有效期管理、附件上传
- **预警提醒**：证书到期提醒、复训提醒
- **合规检查**：证书覆盖率、有效性检查

### 4.6 绩效管理
- **绩效指标**：KPI设定、评分标准定义
- **评估周期**：评估周期设置、评估流程定义
- **评估执行**：自评、上级评估、多维度评估
- **结果分析**：绩效数据分析、趋势图表
- **绩效应用**：与薪酬、晋升等联动

### 4.7 薪酬管理
- **薪资结构**：薪资项目定义、计算公式设置
- **薪资计算**：基于考勤、绩效等数据的薪资自动计算
- **薪资发放**：薪资发放记录、银行代发文件生成
- **薪资报表**：薪资汇总、明细报表生成

### 4.8 系统集成功能
- **与认证系统集成**：用户认证、权限管理集成
- **与生产系统集成**：人员排班与生产计划协同
- **与质量系统集成**：人员资质与操作授权联动
- **与EDMS集成**：文档管理与培训管理联动

## 5. 数据模型设计

### 5.1 核心实体关系
```
┌────────────┐    ┌────────────┐    ┌────────────┐
│  Departments │  │ Positions  │  │ JobLevels  │
└────────────┘    └────────────┘    └────────────┘
      │                  │                  │
      │                  │                  │
      └───────────┬──────┴───────────┬──────┘
                  │                  │
                  v                  v
           ┌───────────────┐    ┌───────────────┐
           │     Employees │    │      Jobs     │
           └───────────────┘    └───────────────┘
                  │                  │
                  │                  │
     ┌────────────┴─────┬────────────┴─────┐
     │                  │                  │
     v                  v                  v
┌────────────┐    ┌────────────┐    ┌────────────┐
│ TimeRecords│    │ Training   │    │ Certificates│
└────────────┘    └────────────┘    └────────────┘
     │                  │                  │
     │                  │                  │
     v                  v                  v
┌────────────┐    ┌────────────┐    ┌────────────┐
│ Attendance │    │ EvalResults│    │ Salaries   │
└────────────┘    └────────────┘    └────────────┘
```

### 5.2 主要数据表
- **departments**: 部门信息表
- **positions**: 岗位信息表
- **job_levels**: 职级信息表
- **employees**: 员工基本信息表
- **employee_contacts**: 员工联系方式表
- **employment_histories**: 员工雇佣记录表
- **contracts**: 劳动合同信息表
- **time_records**: 考勤记录表
- **attendance_rules**: 考勤规则表
- **shifts**: 班次信息表
- **training_courses**: 培训课程表
- **training_records**: 培训记录表
- **certificate_types**: 证书类型表
- **certificates**: 证书信息表
- **performance_indicators**: 绩效指标表
- **evaluation_results**: 绩效评估结果表
- **salary_structures**: 薪资结构表
- **salary_payments**: 薪资发放记录表

## 6. API接口设计

### 6.1 组织架构API
- **GET /api/hr/v1/departments**: 获取部门列表
- **GET /api/hr/v1/departments/{id}**: 获取部门详情
- **POST /api/hr/v1/departments**: 创建部门
- **PUT /api/hr/v1/departments/{id}**: 更新部门
- **DELETE /api/hr/v1/departments/{id}**: 删除部门
- **GET /api/hr/v1/positions**: 获取岗位列表
- **POST /api/hr/v1/positions**: 创建岗位

### 6.2 员工管理API
- **GET /api/hr/v1/employees**: 获取员工列表
- **GET /api/hr/v1/employees/{id}**: 获取员工详情
- **POST /api/hr/v1/employees**: 创建员工
- **PUT /api/hr/v1/employees/{id}**: 更新员工信息
- **PUT /api/hr/v1/employees/{id}/status**: 更新员工状态
- **GET /api/hr/v1/employees/{id}/history**: 获取员工变动历史

### 6.3 考勤管理API
- **GET /api/hr/v1/attendance/records**: 获取考勤记录
- **POST /api/hr/v1/attendance/records**: 录入考勤记录
- **GET /api/hr/v1/attendance/statistics**: 获取考勤统计
- **POST /api/hr/v1/attendance/exceptions**: 提交考勤异常申请

### 6.4 培训管理API
- **GET /api/hr/v1/training/courses**: 获取培训课程列表
- **POST /api/hr/v1/training/courses**: 创建培训课程
- **POST /api/hr/v1/training/records**: 记录培训参与
- **GET /api/hr/v1/training/statistics**: 获取培训统计信息

### 6.5 资质认证API
- **GET /api/hr/v1/certificates/types**: 获取证书类型列表
- **POST /api/hr/v1/certificates**: 录入证书信息
- **GET /api/hr/v1/certificates/expiring**: 获取即将到期证书
- **PUT /api/hr/v1/certificates/{id}**: 更新证书信息

### 6.6 绩效管理API
- **GET /api/hr/v1/performance/indicators**: 获取绩效指标列表
- **POST /api/hr/v1/performance/evaluations**: 提交绩效评估
- **GET /api/hr/v1/performance/results**: 获取绩效评估结果

### 6.7 薪酬管理API
- **GET /api/hr/v1/salary/structures**: 获取薪资结构列表
- **POST /api/hr/v1/salary/payments**: 记录薪资发放
- **GET /api/hr/v1/salary/reports**: 获取薪资报表

## 7. 部署与扩展性

### 7.1 部署架构
- **容器化部署**: 使用Docker容器标准化部署
- **微服务编排**: 使用Kubernetes进行服务编排
- **负载均衡**: 使用Nginx或Kubernetes Service实现
- **服务发现**: 使用Eureka或Consul进行服务注册发现
- **配置管理**: 使用Spring Cloud Config统一管理配置

### 7.2 扩展性考虑
- **水平扩展**: 无状态设计，支持多实例部署
- **缓存策略**: Redis缓存热点数据，提高性能
- **数据库优化**: 索引优化、读写分离、分库分表
- **异步处理**: 非关键操作异步化，提高响应速度

## 8. 安全考虑

### 8.1 数据安全
- **传输安全**: 所有API通过HTTPS加密传输
- **存储安全**: 敏感数据加密存储，个人信息保护
- **访问控制**: 基于最小权限原则，严格权限检查
- **数据脱敏**: 敏感信息在日志和显示中脱敏

### 8.2 应用安全
- **输入验证**: 严格的参数验证，防止注入攻击
- **XSS防护**: 输入输出过滤，防止跨站脚本攻击
- **CSRF防护**: 实现CSRF Token机制
- **安全响应头**: 配置安全相关的HTTP响应头

### 8.3 操作安全
- **账户安全**: 与认证系统集成，实现统一账户管理
- **会话安全**: 会话超时，防会话固定攻击
- **审计追踪**: 完整的操作审计日志
- **异常检测**: 监控异常访问模式

## 9. 监控与维护

### 9.1 监控指标
- **系统指标**: CPU、内存、磁盘、网络
- **业务指标**: 员工数量、活跃用户数、API调用量
- **性能指标**: 响应时间、吞吐量、错误率
- **安全指标**: 失败访问次数、异常操作次数

### 9.2 告警机制
- **阈值告警**: 基于预设阈值的监控告警
- **异常告警**: 基于机器学习的异常检测告警
- **安全告警**: 安全事件实时告警
- **多级告警**: 不同级别的告警通知策略

### 9.3 日志管理
- **集中日志**: ELK Stack集中管理日志
- **结构化日志**: 统一的日志格式和标准
- **日志分析**: 日志分析和可视化
- **日志归档**: 长期日志存储和归档策略

## 10. 实现计划

### 10.1 开发阶段

| 阶段 | 时间周期 | 主要任务 |
|------|----------|----------|
| 需求分析 | 2周 | 详细需求分析和规格说明 |
| 架构设计 | 1周 | 系统架构设计和技术选型 |
| 数据库设计 | 1周 | 数据库模型设计和优化 |
| 核心功能开发 | 6周 | 员工、考勤、培训、资质等核心功能 |
| 集成开发 | 2周 | 与其他系统集成 |
| 前端开发 | 5周 | 用户界面开发和优化 |
| 测试验证 | 3周 | 功能测试、性能测试、安全测试 |
| 部署上线 | 1周 | 部署、配置、文档完善 |

### 10.2 里程碑
- **M1**: 需求分析完成，架构设计确认
- **M2**: 核心员工管理功能开发完成
- **M3**: 考勤和培训管理功能开发完成
- **M4**: 资质认证和绩效管理功能开发完成
- **M5**: 薪酬管理和报表功能开发完成
- **M6**: 系统集成测试通过
- **M7**: 系统上线部署完成

---

*文档版本：v0.1.0*
*审核状态：待审核*
*下次更新：详细设计文档完成后*