# GMP系统测试计划

## 1. 概述

本测试计划描述了GMP系统的测试策略、测试范围、测试资源和测试进度安排，旨在确保系统的功能、性能、安全性和可靠性符合设计要求和GMP合规标准。

## 2. 测试目标

- 验证系统功能是否符合需求规格说明书
- 确保系统性能满足预期要求
- 验证系统安全性符合GMP合规标准
- 确保系统可靠性和稳定性
- 发现并修复系统中的缺陷
- 验证系统各组件之间的集成是否正常

## 3. 测试范围

### 3.1 功能测试范围

| 服务 | 测试范围 |
|------|----------|
| Auth Service | 认证授权、用户管理、权限控制、操作日志 |
| EDMS Service | 文档管理、工作流审批、权限控制、全文搜索 |
| Equipment Service | 设备管理、校准记录、维护计划、维护记录 |
| MES Service | 生产订单、生产批次、批次操作、设备监控、中药炮制工艺 |
| LIMS Service | 实验室信息管理、样品管理、测试记录 |
| QMS Service | 质量管理、偏差管理、变更管理、CAPA管理 |
| CRM Sales | 客户管理、销售订单、销售预测 |

### 3.2 非功能测试范围

- 性能测试
- 安全性测试
- 可靠性测试
- 兼容性测试
- 易用性测试

## 4. 测试策略

### 4.1 测试类型

#### 4.1.1 单元测试
- **目标**: 验证单个组件的功能正确性
- **范围**: 所有核心业务逻辑、数据访问层、服务层
- **工具**: JUnit 5, Mockito
- **覆盖率要求**: 80%以上
- **执行方式**: 开发人员在本地执行，CI/CD流水线自动执行
- **报告生成**: JaCoCo覆盖率报告

#### 4.1.2 集成测试
- **目标**: 验证组件之间的交互是否正常
- **范围**: API接口、服务间通信、数据库交互、外部服务调用
- **工具**: Spring Boot Test, TestContainers, RestAssured
- **执行方式**: CI/CD流水线自动执行
- **报告生成**: 集成测试报告

#### 4.1.3 系统测试
- **目标**: 验证完整系统的功能和性能
- **范围**: 完整业务流程、系统性能、安全性、可靠性
- **工具**: Postman, JMeter, Selenium, OWASP ZAP
- **执行方式**: 测试工程师手动执行，部分自动化执行
- **报告生成**: 系统测试报告、性能测试报告、安全测试报告

#### 4.1.4 回归测试
- **目标**: 验证修改后的系统是否仍然正常工作
- **范围**: 所有已测试的功能，重点关注修改的功能和相关功能
- **工具**: Jenkins, GitLab CI, Selenium
- **执行方式**: CI/CD流水线自动执行，定期手动执行
- **报告生成**: 回归测试报告

### 4.2 测试方法

- **黑盒测试**: 基于需求规格说明书，不考虑内部实现，验证功能是否符合需求
- **白盒测试**: 基于代码结构，测试内部逻辑，确保代码质量
- **灰盒测试**: 结合黑盒和白盒测试方法，验证组件之间的交互
- **自动化测试**: 对频繁执行的测试用例进行自动化，提高测试效率
- **手动测试**: 对复杂业务流程和UI交互进行手动测试

### 4.3 测试环境

#### 4.3.1 环境配置

| 环境 | 配置 | 用途 |
|------|------|------|
| 开发环境 | 本地开发机器，JDK 17，PostgreSQL 15，Redis 7，RabbitMQ 3.12 | 开发人员本地开发和单元测试 |
| 测试环境 | 独立服务器，8核16G内存，JDK 17，PostgreSQL 15，Redis 7，RabbitMQ 3.12，Elasticsearch 8 | 集成测试、系统测试、性能测试 |
| 预生产环境 | 与生产环境相同配置，8核32G内存，JDK 17，PostgreSQL 15，Redis 7，RabbitMQ 3.12，Elasticsearch 8 | 预生产验证、回归测试 |

#### 4.3.2 环境管理

- 环境配置使用基础设施即代码（IaC）管理
- 定期备份和恢复环境数据
- 环境之间的数据隔离
- 环境版本与代码版本保持一致

### 4.4 测试数据管理

- 测试数据使用TestContainers自动生成
- 敏感数据使用加密存储
- 测试数据定期清理和重置
- 测试数据与生产数据结构保持一致

## 5. 测试资源

### 5.1 人力资源

| 角色 | 职责 | 人数 |
|------|------|------|
| 测试经理 | 负责测试计划制定、测试进度管理 | 1 |
| 测试工程师 | 负责测试用例编写、测试执行、缺陷报告 | 3 |
| 开发工程师 | 负责缺陷修复、协助测试 | 5 |
| 需求分析师 | 负责需求澄清、测试结果验证 | 2 |
| 质量保证 | 负责测试过程监督、质量控制 | 1 |

### 5.2 工具资源

| 工具类型 | 工具名称 | 用途 |
|----------|----------|------|
| 测试管理 | Jira | 缺陷跟踪、测试进度管理 |
| 自动化测试 | Selenium, Postman | 自动化功能测试 |
| 性能测试 | JMeter | 性能测试、负载测试 |
| 安全测试 | OWASP ZAP | 安全漏洞扫描 |
| 代码覆盖率 | JaCoCo | 单元测试覆盖率分析 |
| 持续集成 | Jenkins, GitLab CI | 自动化构建、测试 |

## 6. 测试进度安排

### 6.1 测试阶段划分

| 阶段 | 时间 | 主要任务 |
|------|------|----------|
| 测试计划制定 | 第1周 | 制定测试计划、确定测试范围和策略 |
| 测试用例编写 | 第2周 | 编写单元测试、集成测试和系统测试用例 |
| 单元测试执行 | 第3周 | 执行单元测试、修复缺陷 |
| 集成测试执行 | 第4周 | 执行集成测试、修复缺陷 |
| 系统测试执行 | 第5-6周 | 执行系统测试、性能测试、安全性测试 |
| 回归测试执行 | 第7周 | 执行回归测试、验证缺陷修复 |
| 测试报告编写 | 第8周 | 编写测试报告、总结测试结果 |

## 7. 测试用例设计

### 7.1 测试用例设计原则

- **需求覆盖**: 覆盖所有功能需求和非功能需求
- **全面性**: 覆盖正常流程、异常流程和边界条件
- **可执行性**: 测试用例可以被重复执行，结果可验证
- **可维护性**: 测试用例结构清晰，易于维护和更新
- **优先级**: 根据功能重要性和风险程度设置测试用例优先级
- **独立性**: 每个测试用例独立执行，不依赖其他测试用例的结果

### 7.2 测试用例模板

| 字段 | 描述 | 示例 |
|------|------|------|
| 测试用例ID | 唯一标识符，格式：模块-功能-序号 | AUTH-LOGIN-001 |
| 测试用例名称 | 简洁描述测试用例的功能 | 用户登录测试 |
| 测试目标 | 描述测试的目标和验证点 | 验证用户使用正确的用户名和密码可以成功登录 |
| 优先级 | 测试用例的优先级，分为高、中、低 | 高 |
| 测试类型 | 测试用例的类型，如功能测试、性能测试、安全测试 | 功能测试 |
| 测试环境 | 测试执行的环境 | 测试环境 |
| 测试数据 | 测试使用的数据，包括输入数据和预期输出数据 | 用户名：admin，密码：password |
| 前置条件 | 测试执行前需要满足的条件 | 用户已注册，系统正常运行 |
| 测试步骤 | 详细的测试步骤，按顺序描述 | 1. 打开登录页面<br>2. 输入用户名和密码<br>3. 点击登录按钮 |
| 预期结果 | 预期的测试结果 | 用户成功登录，跳转到首页 |
| 实际结果 | 实际的测试结果 | 测试执行后填写 |
| 测试状态 | 测试用例的执行状态，包括通过、失败、阻塞 | 测试执行后填写 |
| 测试人员 | 执行测试的人员 | 测试执行后填写 |
| 测试日期 | 测试执行的日期 | 测试执行后填写 |
| 缺陷ID | 关联的缺陷ID，如果有 | 测试执行后填写 |
| 备注 | 其他相关信息，如测试注意事项 | 无 |

### 7.3 测试用例设计示例

#### 7.3.1 Auth Service 测试用例示例

| 测试用例ID | 测试用例名称 | 测试目标 | 优先级 | 测试类型 |
|------------|--------------|----------|--------|----------|
| AUTH-LOGIN-001 | 正确用户名密码登录 | 验证用户使用正确的用户名和密码可以成功登录 | 高 | 功能测试 |
| AUTH-LOGIN-002 | 错误密码登录 | 验证用户使用错误的密码登录失败 | 高 | 功能测试 |
| AUTH-LOGIN-003 | 不存在的用户名登录 | 验证使用不存在的用户名登录失败 | 中 | 功能测试 |
| AUTH-LOGIN-004 | 空用户名登录 | 验证使用空用户名登录失败 | 中 | 功能测试 |
| AUTH-LOGIN-005 | 空密码登录 | 验证使用空密码登录失败 | 中 | 功能测试 |

#### 7.3.2 EDMS Service 测试用例示例

| 测试用例ID | 测试用例名称 | 测试目标 | 优先级 | 测试类型 |
|------------|--------------|----------|--------|----------|
| EDMS-DOC-001 | 上传文档 | 验证用户可以成功上传文档 | 高 | 功能测试 |
| EDMS-DOC-002 | 下载文档 | 验证用户可以成功下载文档 | 高 | 功能测试 |
| EDMS-DOC-003 | 删除文档 | 验证用户可以成功删除文档 | 高 | 功能测试 |
| EDMS-DOC-004 | 搜索文档 | 验证用户可以通过关键词搜索文档 | 高 | 功能测试 |
| EDMS-DOC-005 | 审批文档 | 验证文档审批流程正常工作 | 高 | 功能测试 |

### 7.4 测试用例管理

- 使用Jira或TestLink进行测试用例管理
- 测试用例与需求关联，确保需求覆盖
- 定期更新测试用例，反映需求变更
- 测试用例评审机制，确保测试用例质量
- 测试用例版本控制，记录测试用例的变更历史

## 8. 缺陷管理

### 8.1 缺陷分类

#### 8.1.1 按严重程度分类

| 严重程度 | 描述 | 示例 |
|----------|------|------|
| 致命 | 导致系统崩溃或无法使用的缺陷，影响核心业务流程 | 系统无法启动，数据库连接失败，认证服务不可用 |
| 严重 | 影响核心功能的缺陷，导致功能无法正常使用 | 文档上传失败，设备管理功能不可用，生产订单无法创建 |
| 中等 | 影响非核心功能的缺陷，功能可以使用但存在问题 | 搜索结果不准确，UI显示异常，性能较慢 |
| 轻微 | 不影响功能的UI或性能缺陷，对用户体验影响较小 | 拼写错误，UI布局问题，日志格式不一致 |

#### 8.1.2 按缺陷类型分类

| 缺陷类型 | 描述 | 示例 |
|----------|------|------|
| 功能缺陷 | 功能不符合需求规格说明书 | 文档审批流程错误，权限控制失效 |
| 性能缺陷 | 系统性能不符合预期要求 | 响应时间过长，并发处理能力不足 |
| 安全缺陷 | 系统存在安全漏洞 | 未授权访问，SQL注入，敏感数据泄露 |
| 可靠性缺陷 | 系统不稳定，容易崩溃 | 内存泄漏，系统宕机，数据丢失 |
| 兼容性缺陷 | 系统在不同环境下表现不一致 | 浏览器兼容性问题，数据库版本兼容性问题 |
| 易用性缺陷 | 系统易用性差，用户体验不好 | 操作流程复杂，UI设计不合理 |

### 8.2 缺陷处理流程

1. **缺陷发现**：测试工程师在测试过程中发现缺陷，记录到Jira缺陷跟踪系统
2. **缺陷提交**：测试工程师填写缺陷报告，包括缺陷描述、复现步骤、预期结果、实际结果、严重程度、缺陷类型等信息
3. **缺陷审核**：测试经理审核缺陷报告，确认缺陷的真实性和严重程度，分配给相应的开发工程师
4. **缺陷修复**：开发工程师分析缺陷原因，修复缺陷，编写修复说明，将缺陷标记为已修复
5. **缺陷验证**：测试工程师验证缺陷修复，执行相应的测试用例，如果缺陷修复成功，将缺陷标记为已验证；如果缺陷未修复，将缺陷重新打开
6. **缺陷关闭**：测试经理审核已验证的缺陷，确认缺陷已修复，将缺陷标记为已关闭
7. **缺陷分析**：定期对缺陷进行分析，识别缺陷趋势和根本原因，提出改进措施

### 8.3 缺陷报告模板

| 字段 | 描述 | 示例 |
|------|------|------|
| 缺陷ID | 唯一标识符，由Jira自动生成 | GMP-123 |
| 缺陷标题 | 简洁描述缺陷的问题 | 用户登录失败 |
| 缺陷描述 | 详细描述缺陷的现象和影响 | 用户使用正确的用户名和密码登录系统，系统返回登录失败 |
| 复现步骤 | 详细描述复现缺陷的步骤 | 1. 打开登录页面<br>2. 输入用户名：admin，密码：password<br>3. 点击登录按钮 |
| 预期结果 | 预期的正常结果 | 用户成功登录，跳转到首页 |
| 实际结果 | 实际的错误结果 | 系统返回"登录失败，请检查用户名和密码" |
| 严重程度 | 缺陷的严重程度，分为致命、严重、中等、轻微 | 严重 |
| 缺陷类型 | 缺陷的类型，如功能缺陷、性能缺陷、安全缺陷 | 功能缺陷 |
| 优先级 | 缺陷的修复优先级，分为高、中、低 | 高 |
| 影响范围 | 缺陷影响的功能模块 | Auth Service |
| 测试环境 | 发现缺陷的测试环境 | 测试环境 |
| 测试用例ID | 关联的测试用例ID | AUTH-LOGIN-001 |
| 报告人 | 发现缺陷的测试工程师 | 测试工程师A |
| 报告日期 | 发现缺陷的日期 | 2025-11-28 |
| 修复人 | 修复缺陷的开发工程师 | 开发工程师B |
| 修复日期 | 修复缺陷的日期 | 2025-11-29 |
| 修复说明 | 缺陷修复的详细说明 | 修复了登录接口的密码验证逻辑，密码加密方式不一致导致验证失败 |
| 验证人 | 验证缺陷修复的测试工程师 | 测试工程师A |
| 验证日期 | 验证缺陷修复的日期 | 2025-11-30 |
| 验证结果 | 缺陷修复的验证结果，包括通过、失败 | 通过 |
| 缺陷状态 | 缺陷的当前状态，包括新建、审核中、已分配、已修复、已验证、已关闭、重新打开 | 已关闭 |

### 8.4 缺陷分析与改进

- 定期生成缺陷分析报告，包括缺陷数量、严重程度分布、缺陷类型分布、缺陷趋势等
- 识别缺陷的根本原因，提出改进措施，如代码审查、测试用例优化、流程改进等
- 跟踪改进措施的执行情况，验证改进效果
- 建立缺陷知识库，分享缺陷经验，避免类似缺陷再次发生

## 9. 测试交付物

### 9.1 交付物列表

| 交付物名称 | 描述 | 交付标准 | 交付时间 |
|------------|------|----------|----------|
| 测试计划文档 | 详细描述测试策略、范围、资源和进度 | 完整的测试计划，经过评审和批准 | 项目启动后2周 |
| 测试用例文档 | 包含所有测试用例，覆盖功能和非功能需求 | 测试用例覆盖率达到100%，经过评审和批准 | 测试计划批准后2周 |
| 单元测试报告 | 包含单元测试执行结果和覆盖率分析 | 单元测试覆盖率达到80%以上，所有测试用例通过 | 单元测试完成后1周 |
| 集成测试报告 | 包含集成测试执行结果和缺陷分析 | 集成测试覆盖率达到90%以上，所有关键测试用例通过 | 集成测试完成后1周 |
| 系统测试报告 | 包含系统测试执行结果和缺陷分析 | 系统测试覆盖率达到95%以上，致命和严重缺陷全部修复 | 系统测试完成后1周 |
| 性能测试报告 | 包含性能测试执行结果和性能指标分析 | 系统性能满足预期要求，响应时间符合标准 | 性能测试完成后1周 |
| 安全测试报告 | 包含安全测试执行结果和安全漏洞分析 | 系统通过安全测试，无致命和严重安全漏洞 | 安全测试完成后1周 |
| 回归测试报告 | 包含回归测试执行结果和缺陷分析 | 回归测试覆盖率达到100%，所有测试用例通过 | 回归测试完成后1周 |
| 测试总结报告 | 包含测试过程总结、测试结果分析和建议 | 完整的测试总结，经过评审和批准 | 所有测试完成后2周 |
| 缺陷报告 | 包含所有发现的缺陷，按严重程度和类型分类 | 所有缺陷都已记录和跟踪，致命和严重缺陷全部修复 | 测试过程中持续更新 |

### 9.2 交付物管理

- 交付物使用版本控制管理
- 交付物经过评审和批准后发布
- 交付物存储在统一的文档管理系统中
- 交付物定期更新和维护

## 10. 测试风险评估

### 10.1 风险识别

| 风险 | 影响 | 可能性 | 严重程度 | 缓解措施 |
|------|------|--------|----------|----------|
| 测试资源不足 | 测试进度延迟，测试覆盖不够 | 中 | 高 | 提前规划资源，合理分配任务，考虑外包或自动化测试 |
| 需求变更频繁 | 测试用例频繁修改，测试进度延迟 | 高 | 中 | 建立变更管理流程，及时更新测试用例，优先测试核心功能 |
| 系统复杂度高 | 测试难度大，测试覆盖不够 | 中 | 高 | 采用分层测试策略，逐步验证，使用自动化测试工具 |
| 环境配置问题 | 测试结果不准确，测试进度延迟 | 中 | 中 | 建立标准化的测试环境，使用基础设施即代码管理环境配置，定期维护环境 |
| 测试数据不足 | 测试覆盖不够，测试结果不准确 | 中 | 中 | 提前准备测试数据，使用测试数据生成工具，模拟真实业务场景 |
| 技术难点多 | 测试执行困难，测试进度延迟 | 中 | 中 | 提前识别技术难点，组织技术攻关，寻求外部支持 |

### 10.2 风险监控

- 定期召开测试进度会议，跟踪风险状态
- 监控测试用例执行情况，识别测试覆盖不足的风险
- 监控缺陷修复情况，识别缺陷积压的风险
- 监控需求变更情况，识别需求变更带来的风险
- 及时调整测试计划，应对风险变化
- 建立风险预警机制，提前识别潜在风险

### 10.3 风险应对

- **规避风险**：通过调整测试策略或范围，避免风险发生
- **转移风险**：将风险转移给第三方，如外包测试服务
- **减轻风险**：采取措施降低风险的可能性或影响程度
- **接受风险**：对于低可能性和低影响的风险，接受风险并制定应急计划

## 11. 测试质量保证

### 11.1 测试过程质量保证

#### 11.1.1 测试用例评审

- 测试用例编写完成后，组织测试用例评审会议
- 评审人员包括测试经理、测试工程师、开发工程师和需求分析师
- 评审内容包括测试用例的完整性、准确性、可执行性和覆盖范围
- 评审通过后，测试用例才能进入执行阶段
- 测试用例修改后，需要重新评审

#### 11.1.2 测试执行评审

- 测试执行过程中，定期组织测试执行评审会议
- 评审测试执行进度、测试用例执行情况和缺陷发现情况
- 识别测试执行中的问题和风险，及时调整测试策略
- 确保测试执行符合测试计划和质量要求

#### 11.1.3 缺陷评审

- 定期组织缺陷评审会议，分析缺陷的根本原因
- 评审缺陷的严重程度、类型和分布情况
- 识别缺陷趋势和共性问题，提出改进措施
- 确保缺陷修复的质量和及时性

#### 11.1.4 测试报告评审

- 测试报告编写完成后，组织测试报告评审会议
- 评审测试报告的完整性、准确性和可读性
- 评审测试结果的分析和建议
- 确保测试报告符合质量要求和交付标准

### 11.2 测试质量指标

| 指标名称 | 计算公式 | 目标值 | 用途 |
|----------|----------|--------|------|
| 测试用例覆盖率 | 已执行测试用例数 / 总测试用例数 × 100% | 95%以上 | 衡量测试覆盖程度 |
| 单元测试覆盖率 | 已覆盖代码行数 / 总代码行数 × 100% | 80%以上 | 衡量单元测试质量 |
| 缺陷密度 | 缺陷数量 / 代码行数 × 1000 | 小于1 | 衡量代码质量 |
| 缺陷修复率 | 已修复缺陷数 / 总缺陷数 × 100% | 95%以上 | 衡量缺陷修复及时性 |
| 缺陷逃逸率 | 生产环境发现的缺陷数 / 总缺陷数 × 100% | 小于5% | 衡量测试质量 |
| 测试执行效率 | 测试用例执行数 / 测试执行时间 | 大于100个/天 | 衡量测试执行效率 |

### 11.3 质量改进措施

- 定期进行测试过程评估和改进
- 收集测试过程中的经验教训，持续改进测试流程
- 引入新的测试技术和工具，提高测试效率和质量
- 加强测试团队培训，提高测试人员的技能和素质
- 建立测试质量文化，强调质量意识

## 12. 测试报告

### 12.1 测试报告类型

- **单元测试报告**：包含单元测试执行结果和覆盖率分析
- **集成测试报告**：包含集成测试执行结果和缺陷分析
- **系统测试报告**：包含系统测试执行结果和缺陷分析
- **性能测试报告**：包含性能测试执行结果和性能指标分析
- **安全测试报告**：包含安全测试执行结果和安全漏洞分析
- **回归测试报告**：包含回归测试执行结果和缺陷分析
- **测试总结报告**：包含测试过程总结、测试结果分析和建议

### 12.2 测试报告模板

#### 12.2.1 测试报告基本信息

- 报告名称：明确测试报告的类型和版本
- 报告编号：唯一标识符
- 报告日期：报告生成日期
- 测试阶段：测试执行的阶段，如单元测试、集成测试、系统测试
- 测试环境：测试执行的环境
- 测试人员：参与测试的人员
- 审批人员：审批测试报告的人员

#### 12.2.2 测试摘要

- 测试目的：测试的目标和范围
- 测试时间：测试执行的时间范围
- 测试结果：测试的总体结果，如通过、失败、部分通过
- 主要发现：测试中发现的主要问题和风险
- 结论和建议：测试结论和改进建议

#### 12.2.3 测试执行情况

- 测试用例执行情况：已执行测试用例数、通过测试用例数、失败测试用例数、测试用例通过率
- 测试覆盖率：功能覆盖率、代码覆盖率
- 测试进度：计划测试时间、实际测试时间、进度偏差

#### 12.2.4 缺陷分析

- 缺陷数量：按严重程度和类型分类的缺陷数量
- 缺陷分布：缺陷在不同模块和功能中的分布情况
- 缺陷趋势：缺陷发现和修复的趋势
- 缺陷根因分析：缺陷的根本原因分析

#### 12.2.5 测试结果分析

- 功能测试结果：功能是否符合需求，是否存在功能缺陷
- 性能测试结果：系统性能是否满足预期要求，响应时间、并发处理能力等指标
- 安全测试结果：系统是否存在安全漏洞，安全等级是否符合要求
- 可靠性测试结果：系统是否稳定，是否容易崩溃

#### 12.2.6 结论和建议

- 测试结论：系统是否可以进入下一阶段，是否可以上线
- 改进建议：对系统设计、开发、测试等方面的建议
- 风险提示：系统存在的风险和应对措施

## 13. 版本控制

| 版本 | 日期 | 描述 | 作者 |
|------|------|------|------|
| 1.0 | 2025-11-28 | 初始版本 | GMP测试团队 |
| 1.1 | YYYY-MM-DD | 更新内容 | GMP测试团队 |
