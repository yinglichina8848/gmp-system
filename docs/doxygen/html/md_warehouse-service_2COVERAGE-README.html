<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>GMPç³»ç»Ÿ: GMPä»“åº“ç®¡ç†å­ç³»ç»Ÿ - ä»£ç è¦†ç›–ç‡æµ‹è¯•æŒ‡å—</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">GMPç³»ç»Ÿ<span id="projectnumber">&#160;0.1.1</span>
   </div>
   <div id="projectbrief">GMPç³»ç»Ÿæ–‡æ¡£</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.8 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('md_warehouse-service_2COVERAGE-README.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">GMPä»“åº“ç®¡ç†å­ç³»ç»Ÿ - ä»£ç è¦†ç›–ç‡æµ‹è¯•æŒ‡å—</div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h1>ğŸ“Š æ¦‚è¿°</h1>
<p>æœ¬æ–‡æ¡£ä»‹ç»å¦‚ä½•ä½¿ç”¨JaCoCoä»£ç è¦†ç›–ç‡å·¥å…·æµ‹è¯•GMPä»“åº“ç®¡ç†å­ç³»ç»Ÿçš„ä»£ç è¦†ç›–ç‡ï¼Œç¡®ä¿ä»£ç è´¨é‡ç¬¦åˆä¼ä¸šæ ‡å‡†ã€‚</p>
<h1>ğŸ¯ è¦†ç›–ç‡ç›®æ ‡</h1>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">æŒ‡æ ‡   </th><th class="markdownTableHeadNone">ç›®æ ‡å€¼   </th><th class="markdownTableHeadNone">è¯´æ˜    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">è¡Œè¦†ç›–ç‡   </td><td class="markdownTableBodyNone">â‰¥80%   </td><td class="markdownTableBodyNone">ä»£ç è¡Œçš„æ‰§è¡Œè¦†ç›–ç‡    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">åˆ†æ”¯è¦†ç›–ç‡   </td><td class="markdownTableBodyNone">â‰¥70%   </td><td class="markdownTableBodyNone">æ¡ä»¶åˆ†æ”¯çš„è¦†ç›–ç‡    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">ç±»è¦†ç›–ç‡   </td><td class="markdownTableBodyNone">â‰¥90%   </td><td class="markdownTableBodyNone">ç±»çš„è¦†ç›–ç‡    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">æ–¹æ³•è¦†ç›–ç‡   </td><td class="markdownTableBodyNone">â‰¥80%   </td><td class="markdownTableBodyNone">æ–¹æ³•çš„è¦†ç›–ç‡    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">æŒ‡ä»¤è¦†ç›–ç‡   </td><td class="markdownTableBodyNone">â‰¥75%   </td><td class="markdownTableBodyNone">å­—èŠ‚ç æŒ‡ä»¤çš„è¦†ç›–ç‡    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">åœˆå¤æ‚åº¦è¦†ç›–ç‡   </td><td class="markdownTableBodyNone">â‰¥70%   </td><td class="markdownTableBodyNone">å¤æ‚æ¡ä»¶çš„è¦†ç›–ç‡   </td></tr>
</table>
<h1>ğŸ› ï¸ ç¯å¢ƒé…ç½®</h1>
<h2>æŠ€æœ¯æ ˆ</h2>
<ul>
<li><b>JaCoCo</b>: 0.8.8 - ä»£ç è¦†ç›–ç‡å·¥å…·</li>
<li><b>JUnit 5</b>: å•å…ƒæµ‹è¯•æ¡†æ¶</li>
<li><b>AssertJ</b>: æµç•…æ–­è¨€åº“</li>
<li><b>H2 Database</b>: æµ‹è¯•å†…å­˜æ•°æ®åº“</li>
<li><b>Redis</b>: æµ‹è¯•ç¼“å­˜æ•°æ®åº“ï¼ˆDB 15ï¼‰</li>
</ul>
<h2>é…ç½®è¯´æ˜</h2>
<h3>æµ‹è¯•é…ç½®æ–‡ä»¶</h3>
<ul>
<li><code>src/test/resources/application-test.yml</code>: æµ‹è¯•ç¯å¢ƒé…ç½®</li>
<li><code>src/test/resources/jacoco-rules.properties</code>: è¦†ç›–ç‡è´¨é‡é˜ˆå€¼</li>
</ul>
<h3>Mavenæ’ä»¶é…ç½®</h3>
<ul>
<li>JaCoCoæ’ä»¶: è‡ªåŠ¨æ³¨å…¥è¦†ç›–ç‡ä»£ç†</li>
<li>Surefireæ’ä»¶: æ‰§è¡Œå•å…ƒæµ‹è¯•</li>
<li>Failsafeæ’ä»¶: æ‰§è¡Œé›†æˆæµ‹è¯•</li>
</ul>
<h1>ğŸš€ è¿è¡Œæµ‹è¯•</h1>
<h2>æ–¹æ³•1: ä½¿ç”¨è‡ªåŠ¨åŒ–è„šæœ¬ï¼ˆæ¨èï¼‰</h2>
<div class="fragment"><div class="line"># ä»é¡¹ç›®æ ¹ç›®å½•è¿è¡Œ</div>
<div class="line">./scripts/run-coverage-tests.sh</div>
</div><!-- fragment --><h2>æ–¹æ³•2: æ‰‹åŠ¨è¿è¡ŒMavenå‘½ä»¤</h2>
<div class="fragment"><div class="line"># è¿›å…¥warehouse-serviceç›®å½•</div>
<div class="line">cd /home/liying/gmp-system/services/warehouse-service</div>
<div class="line"> </div>
<div class="line"># è¿è¡Œå•å…ƒæµ‹è¯•å¹¶ç”Ÿæˆè¦†ç›–ç‡æŠ¥å‘Š</div>
<div class="line">mvn clean test jacoco:report</div>
</div><!-- fragment --><h2>æ–¹æ³•3: è¿è¡Œç‰¹å®šæµ‹è¯•ç±»</h2>
<div class="fragment"><div class="line"># è¿è¡Œç‰¹å®šæµ‹è¯•ç±»</div>
<div class="line">mvn test -Dtest=WarehouseServiceImplTest</div>
</div><!-- fragment --><h1>ğŸ“ˆ æŸ¥çœ‹è¦†ç›–ç‡æŠ¥å‘Š</h1>
<p>è¿è¡Œæµ‹è¯•åï¼Œè¦†ç›–ç‡æŠ¥å‘Šå°†ç”Ÿæˆåœ¨ä»¥ä¸‹ç›®å½•ï¼š</p>
<div class="fragment"><div class="line">/home/liying/gmp-system/services/warehouse-service/target/site/jacoco/</div>
</div><!-- fragment --><p>æ‰“å¼€<code>index.html</code>æ–‡ä»¶å³å¯æŸ¥çœ‹è¯¦ç»†çš„è¦†ç›–ç‡æŠ¥å‘Šã€‚</p>
<h1>ğŸ“‹ è¦†ç›–ç‡æŠ¥å‘Šè¯´æ˜</h1>
<h2>æŠ¥å‘Šç»“æ„</h2>
<ul>
<li><b>é¡¹ç›®æ€»è§ˆ</b>: æ˜¾ç¤ºæ•´ä½“è¦†ç›–ç‡æŒ‡æ ‡</li>
<li><b>åŒ…è¦†ç›–ç‡</b>: æŒ‰åŒ…æŸ¥çœ‹è¦†ç›–ç‡</li>
<li><b>ç±»è¦†ç›–ç‡</b>: æŒ‰ç±»æŸ¥çœ‹è¦†ç›–ç‡</li>
<li><b>æºä»£ç è¦†ç›–ç‡</b>: æŸ¥çœ‹å…·ä½“æºä»£ç çš„è¦†ç›–æƒ…å†µ</li>
</ul>
<h2>è¦†ç›–ç‡æŒ‡æ ‡è¯´æ˜</h2>
<ul>
<li><b>è¡Œè¦†ç›–ç‡</b>: å·²æ‰§è¡Œçš„ä»£ç è¡Œæ•°å æ€»ä»£ç è¡Œæ•°çš„ç™¾åˆ†æ¯”</li>
<li><b>åˆ†æ”¯è¦†ç›–ç‡</b>: å·²æ‰§è¡Œçš„æ¡ä»¶åˆ†æ”¯å æ€»åˆ†æ”¯æ•°çš„ç™¾åˆ†æ¯”</li>
<li><b>ç±»è¦†ç›–ç‡</b>: å·²æ‰§è¡Œçš„ç±»å æ€»ç±»æ•°çš„ç™¾åˆ†æ¯”</li>
<li><b>æ–¹æ³•è¦†ç›–ç‡</b>: å·²æ‰§è¡Œçš„æ–¹æ³•å æ€»æ–¹æ³•æ•°çš„ç™¾åˆ†æ¯”</li>
<li><b>æŒ‡ä»¤è¦†ç›–ç‡</b>: å·²æ‰§è¡Œçš„å­—èŠ‚ç æŒ‡ä»¤å æ€»æŒ‡ä»¤æ•°çš„ç™¾åˆ†æ¯”</li>
<li><b>åœˆå¤æ‚åº¦è¦†ç›–ç‡</b>: å·²æ‰§è¡Œçš„ç‹¬ç«‹è·¯å¾„å æ€»ç‹¬ç«‹è·¯å¾„æ•°çš„ç™¾åˆ†æ¯”</li>
</ul>
<h1>ğŸ” æé«˜è¦†ç›–ç‡çš„ç­–ç•¥</h1>
<ol type="1">
<li><b>å•å…ƒæµ‹è¯•ä¼˜å…ˆ</b>: ä¸ºæ¯ä¸ªç±»å’Œæ–¹æ³•ç¼–å†™å•å…ƒæµ‹è¯•</li>
<li><b>è¾¹ç•Œæ¡ä»¶æµ‹è¯•</b>: æµ‹è¯•è¾¹ç•Œå€¼ã€ç©ºå€¼ã€å¼‚å¸¸æƒ…å†µ</li>
<li><b>åˆ†æ”¯è¦†ç›–</b>: ç¡®ä¿æ‰€æœ‰æ¡ä»¶åˆ†æ”¯éƒ½è¢«æµ‹è¯•</li>
<li><b>é›†æˆæµ‹è¯•</b>: æµ‹è¯•ç»„ä»¶é—´çš„äº¤äº’</li>
<li><b>å‚æ•°åŒ–æµ‹è¯•</b>: ä½¿ç”¨ä¸åŒçš„å‚æ•°ç»„åˆæµ‹è¯•æ–¹æ³•</li>
</ol>
<h1>âš ï¸ å¸¸è§é—®é¢˜ä¸è§£å†³æ–¹æ¡ˆ</h1>
<h2>1. è¦†ç›–ç‡æŠ¥å‘Šä¸ºç©º</h2>
<ul>
<li><b>é—®é¢˜</b>: è¿è¡Œæµ‹è¯•åæ²¡æœ‰ç”Ÿæˆè¦†ç›–ç‡æ•°æ®</li>
<li><b>è§£å†³æ–¹æ¡ˆ</b>: æ£€æŸ¥JaCoCoæ’ä»¶é…ç½®æ˜¯å¦æ­£ç¡®ï¼Œç¡®ä¿æµ‹è¯•æ­£å¸¸è¿è¡Œ</li>
</ul>
<h2>2. ç‰¹å®šç±»/æ–¹æ³•æœªè¢«è¦†ç›–</h2>
<ul>
<li><b>é—®é¢˜</b>: æŸäº›ç±»æˆ–æ–¹æ³•åœ¨è¦†ç›–ç‡æŠ¥å‘Šä¸­æ˜¾ç¤ºä¸º0è¦†ç›–</li>
<li><b>è§£å†³æ–¹æ¡ˆ</b>: æ£€æŸ¥æµ‹è¯•æ˜¯å¦æ­£ç¡®è°ƒç”¨äº†è¿™äº›ç±»å’Œæ–¹æ³•ï¼Œå¯èƒ½éœ€è¦æ·»åŠ é¢å¤–çš„æµ‹è¯•ç”¨ä¾‹</li>
</ul>
<h2>3. è¦†ç›–ç‡ä½äºé˜ˆå€¼</h2>
<ul>
<li><b>é—®é¢˜</b>: è¿è¡Œ<code>mvn jacoco:check</code>æ—¶å¤±è´¥ï¼Œæç¤ºè¦†ç›–ç‡ä½äºé˜ˆå€¼</li>
<li><b>è§£å†³æ–¹æ¡ˆ</b>: æŸ¥çœ‹è¦†ç›–ç‡æŠ¥å‘Šï¼Œé’ˆå¯¹æœªè¦†ç›–çš„ä»£ç æ·»åŠ æµ‹è¯•ç”¨ä¾‹</li>
</ul>
<h2>4. æµ‹è¯•ç¯å¢ƒé…ç½®é—®é¢˜</h2>
<ul>
<li><b>é—®é¢˜</b>: æµ‹è¯•åœ¨æœ¬åœ°è¿è¡Œæ­£å¸¸ï¼Œä½†åœ¨CIç¯å¢ƒä¸­å¤±è´¥</li>
<li><b>è§£å†³æ–¹æ¡ˆ</b>: ç¡®ä¿æµ‹è¯•ç¯å¢ƒé…ç½®ä¸CIç¯å¢ƒä¸€è‡´ï¼Œç‰¹åˆ«æ˜¯æ•°æ®åº“å’ŒRedisè¿æ¥é…ç½®</li>
</ul>
<h1>ğŸ“ æµ‹è¯•æœ€ä½³å®è·µ</h1>
<ol type="1">
<li><b>æµ‹è¯•å‘½åè§„èŒƒ</b>: ä½¿ç”¨æ¸…æ™°çš„å‘½åï¼Œå¦‚<code>testMethodName_Scenario_ExpectedResult</code></li>
<li><b>æµ‹è¯•éš”ç¦»</b>: æ¯ä¸ªæµ‹è¯•æ–¹æ³•åº”ç‹¬ç«‹ï¼Œä¸ä¾èµ–äºå…¶ä»–æµ‹è¯•æ–¹æ³•çš„çŠ¶æ€</li>
<li><b>æ¨¡æ‹Ÿä¾èµ–</b>: ä½¿ç”¨Mockitoç­‰å·¥å…·æ¨¡æ‹Ÿå¤–éƒ¨ä¾èµ–</li>
<li><b>æ–­è¨€ç²¾ç¡®</b>: ä½¿ç”¨å…·ä½“çš„æ–­è¨€ï¼Œé¿å…ä½¿ç”¨è¿‡äºå®½æ³›çš„æ–­è¨€</li>
<li><b>æµ‹è¯•å¯è¯»æ€§</b>: ç¼–å†™æ¸…æ™°ã€ç®€æ´çš„æµ‹è¯•ä»£ç ï¼Œæ·»åŠ é€‚å½“çš„æ³¨é‡Š</li>
</ol>
<h1>ğŸ“Š è¦†ç›–ç‡è¶‹åŠ¿è·Ÿè¸ª</h1>
<p>å»ºè®®å®šæœŸè¿è¡Œè¦†ç›–ç‡æµ‹è¯•ï¼Œè·Ÿè¸ªè¦†ç›–ç‡çš„å˜åŒ–è¶‹åŠ¿ã€‚å¯ä»¥å°†è¦†ç›–ç‡æŠ¥å‘Šé›†æˆåˆ°CI/CDæµç¨‹ä¸­ï¼Œç¡®ä¿è¦†ç›–ç‡ä¸ä¼šéšç€ä»£ç çš„æ›´æ–°è€Œä¸‹é™ã€‚</p>
<h1>ğŸ“‹ é™„å½•: è¦†ç›–ç‡æ£€æŸ¥å‘½ä»¤</h1>
<div class="fragment"><div class="line"># è¿è¡Œè¦†ç›–ç‡æ£€æŸ¥</div>
<div class="line">mvn jacoco:check</div>
<div class="line"> </div>
<div class="line"># ç”Ÿæˆè¯¦ç»†çš„è¦†ç›–ç‡æŠ¥å‘Š</div>
<div class="line">mvn jacoco:report</div>
<div class="line"> </div>
<div class="line"># è¿è¡Œæµ‹è¯•å¹¶ç”Ÿæˆè¦†ç›–ç‡æŠ¥å‘Š</div>
<div class="line">mvn clean test jacoco:report</div>
</div><!-- fragment --><h1>ğŸš€ é™„å½•: ç¤ºä¾‹æµ‹è¯•ä»£ç </h1>
<div class="fragment"><div class="line">@SpringBootTest</div>
<div class="line">@ActiveProfiles(<span class="stringliteral">&quot;test&quot;</span>)</div>
<div class="line">class WarehouseServiceImplTest {</div>
<div class="line"> </div>
<div class="line">    @Autowired</div>
<div class="line">    <span class="keyword">private</span> WarehouseService warehouseService;</div>
<div class="line"> </div>
<div class="line">    @MockBean</div>
<div class="line">    <span class="keyword">private</span> MaterialRepository materialRepository;</div>
<div class="line"> </div>
<div class="line">    @Test</div>
<div class="line">    <span class="keywordtype">void</span> testGetMaterialById() {</div>
<div class="line">        <span class="comment">// Given</span></div>
<div class="line">        Long materialId = 1L;</div>
<div class="line">        Material material = <span class="keyword">new</span> Material();</div>
<div class="line">        material.setId(materialId);</div>
<div class="line">        material.setName(<span class="stringliteral">&quot;Test Material&quot;</span>);</div>
<div class="line">        </div>
<div class="line">        when(materialRepository.findById(materialId)).thenReturn(Optional.of(material));</div>
<div class="line">        </div>
<div class="line">        <span class="comment">// When</span></div>
<div class="line">        Material result = warehouseService.getMaterialById(materialId);</div>
<div class="line">        </div>
<div class="line">        <span class="comment">// Then</span></div>
<div class="line">        assertNotNull(result);</div>
<div class="line">        assertEquals(<span class="stringliteral">&quot;Test Material&quot;</span>, result.getName());</div>
<div class="line">        verify(materialRepository).findById(materialId);</div>
<div class="line">    }</div>
<div class="line">}</div>
</div><!-- fragment --><hr  />
<p>é€šè¿‡å®šæœŸè¿è¡Œä»£ç è¦†ç›–ç‡æµ‹è¯•ï¼Œå¯ä»¥æŒç»­ç›‘æ§å’Œæé«˜ä»£ç è´¨é‡ï¼Œç¡®ä¿ä»“åº“ç®¡ç†å­ç³»ç»Ÿçš„ç¨³å®šæ€§å’Œå¯é æ€§ã€‚ </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.8 </li>
  </ul>
</div>
</body>
</html>
