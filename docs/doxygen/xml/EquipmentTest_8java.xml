<?xml version='1.0' encoding='UTF-8' standalone='no'?>
<doxygen xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="compound.xsd" version="1.9.8" xml:lang="en-US">
  <compounddef id="EquipmentTest_8java" kind="file" language="Java">
    <compoundname>EquipmentTest.java</compoundname>
    <includes local="no">org.junit.jupiter.api.Test</includes>
    <incdepgraph>
      <node id="1">
        <label>equipment-management/src/test/java/com/gmp/equipment/entity/EquipmentTest.java</label>
        <link refid="EquipmentTest_8java"/>
        <childnode refid="2" relation="include">
        </childnode>
      </node>
      <node id="2">
        <label>org.junit.jupiter.api.Test</label>
      </node>
    </incdepgraph>
    <innerclass refid="classcom_1_1gmp_1_1equipment_1_1entity_1_1EquipmentTest" prot="package">com::gmp::equipment::entity::EquipmentTest</innerclass>
    <innernamespace refid="namespacecom_1_1gmp_1_1equipment_1_1entity">com::gmp::equipment::entity</innernamespace>
    <briefdescription>
    </briefdescription>
    <detaileddescription>
    </detaileddescription>
    <programlisting>
<codeline lineno="1"><highlight class="keyword">package<sp/></highlight><highlight class="normal">com.gmp.equipment.entity;</highlight></codeline>
<codeline lineno="2"><highlight class="normal"></highlight></codeline>
<codeline lineno="3"><highlight class="normal"></highlight><highlight class="keyword">import</highlight><highlight class="normal"><sp/>org.junit.jupiter.api.Test;</highlight></codeline>
<codeline lineno="4"><highlight class="normal"></highlight><highlight class="keyword">import</highlight><highlight class="normal"><sp/>org.springframework.test.context.ActiveProfiles;</highlight></codeline>
<codeline lineno="5"><highlight class="normal"></highlight></codeline>
<codeline lineno="6"><highlight class="normal"></highlight><highlight class="keyword">import</highlight><highlight class="normal"><sp/>java.math.BigDecimal;</highlight></codeline>
<codeline lineno="7"><highlight class="normal"></highlight><highlight class="keyword">import</highlight><highlight class="normal"><sp/>java.time.LocalDateTime;</highlight></codeline>
<codeline lineno="8"><highlight class="normal"></highlight></codeline>
<codeline lineno="9"><highlight class="normal"></highlight><highlight class="keyword">import</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">static</highlight><highlight class="normal"><sp/>org.assertj.core.api.Assertions.assertThat;</highlight></codeline>
<codeline lineno="10"><highlight class="normal"></highlight></codeline>
<codeline lineno="25"><highlight class="normal">@ActiveProfiles(</highlight><highlight class="stringliteral">&quot;test&quot;</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="26" refid="classcom_1_1gmp_1_1equipment_1_1entity_1_1EquipmentTest" refkind="compound"><highlight class="normal">class<sp/><ref refid="classcom_1_1gmp_1_1equipment_1_1entity_1_1EquipmentTest" kindref="compound">EquipmentTest</ref><sp/>{</highlight></codeline>
<codeline lineno="27"><highlight class="normal"></highlight></codeline>
<codeline lineno="28"><highlight class="normal"><sp/><sp/><sp/><sp/>@Test</highlight></codeline>
<codeline lineno="29" refid="classcom_1_1gmp_1_1equipment_1_1entity_1_1EquipmentTest_1ad14625fe1046b0381c0567384f420f5f" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="classcom_1_1gmp_1_1equipment_1_1entity_1_1EquipmentTest_1ad14625fe1046b0381c0567384f420f5f" kindref="member">testEquipmentCreation</ref>()<sp/>{</highlight></codeline>
<codeline lineno="30"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Given:<sp/>创建一个完整的设备实例</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="31"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="classcom_1_1gmp_1_1equipment_1_1entity_1_1Equipment" kindref="compound">Equipment</ref><sp/>equipment<sp/>=<sp/><ref refid="classcom_1_1gmp_1_1equipment_1_1entity_1_1Equipment" kindref="compound">Equipment</ref>.builder()</highlight></codeline>
<codeline lineno="32"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>.<ref refid="classcom_1_1gmp_1_1equipment_1_1entity_1_1Equipment_1abac79ce60fbfef93f559147c3cdaef49" kindref="member">equipmentCode</ref>(</highlight><highlight class="stringliteral">&quot;RX-0001&quot;</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="33"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>.equipmentName(</highlight><highlight class="stringliteral">&quot;反应釜A1&quot;</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="34"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>.equipmentType(</highlight><highlight class="stringliteral">&quot;反应设备&quot;</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="35"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>.manufacturer(</highlight><highlight class="stringliteral">&quot;上海制药设备有限公司&quot;</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="36"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>.location(</highlight><highlight class="stringliteral">&quot;A车间-区域1&quot;</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="37"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>.equipmentStatus(<ref refid="classcom_1_1gmp_1_1equipment_1_1entity_1_1Equipment" kindref="compound">Equipment</ref>.<ref refid="enumcom_1_1gmp_1_1equipment_1_1entity_1_1Equipment_1_1EquipmentStatus" kindref="compound">EquipmentStatus</ref>.<ref refid="enumcom_1_1gmp_1_1equipment_1_1entity_1_1Equipment_1_1EquipmentStatus_1a0619e9a09202680ce5f5998758619960" kindref="member">ACTIVE</ref>)</highlight></codeline>
<codeline lineno="38"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>.operationalStatus(<ref refid="classcom_1_1gmp_1_1equipment_1_1entity_1_1Equipment" kindref="compound">Equipment</ref>.<ref refid="enumcom_1_1gmp_1_1equipment_1_1entity_1_1Equipment_1_1OperationalStatus" kindref="compound">OperationalStatus</ref>.<ref refid="enumcom_1_1gmp_1_1equipment_1_1entity_1_1Equipment_1_1OperationalStatus_1a90904f8117506ad1d9544acfdedb02c1" kindref="member">STOPPED</ref>)</highlight></codeline>
<codeline lineno="39"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>.criticalEquipment(</highlight><highlight class="keyword">false</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="40"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>.monitoringEnabled(</highlight><highlight class="keyword">true</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="41"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>.version(1)</highlight></codeline>
<codeline lineno="42"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>.build();</highlight></codeline>
<codeline lineno="43"><highlight class="normal"></highlight></codeline>
<codeline lineno="44"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>When<sp/>&amp;<sp/>Then:<sp/>验证设备基本信息正确创建</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="45"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>assertThat(equipment.getEquipmentCode()).isEqualTo(</highlight><highlight class="stringliteral">&quot;RX-0001&quot;</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="46"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>assertThat(equipment.getEquipmentName()).isEqualTo(</highlight><highlight class="stringliteral">&quot;反应釜A1&quot;</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="47"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>assertThat(equipment.getEquipmentStatus()).isEqualTo(<ref refid="classcom_1_1gmp_1_1equipment_1_1entity_1_1Equipment" kindref="compound">Equipment</ref>.<ref refid="enumcom_1_1gmp_1_1equipment_1_1entity_1_1Equipment_1_1EquipmentStatus" kindref="compound">EquipmentStatus</ref>.<ref refid="enumcom_1_1gmp_1_1equipment_1_1entity_1_1Equipment_1_1EquipmentStatus_1a0619e9a09202680ce5f5998758619960" kindref="member">ACTIVE</ref>);</highlight></codeline>
<codeline lineno="48"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>assertThat(equipment.getOperationalStatus()).isEqualTo(<ref refid="classcom_1_1gmp_1_1equipment_1_1entity_1_1Equipment" kindref="compound">Equipment</ref>.<ref refid="enumcom_1_1gmp_1_1equipment_1_1entity_1_1Equipment_1_1OperationalStatus" kindref="compound">OperationalStatus</ref>.<ref refid="enumcom_1_1gmp_1_1equipment_1_1entity_1_1Equipment_1_1OperationalStatus_1a90904f8117506ad1d9544acfdedb02c1" kindref="member">STOPPED</ref>);</highlight></codeline>
<codeline lineno="49"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>assertThat(equipment.getMonitoringEnabled()).isTrue();</highlight></codeline>
<codeline lineno="50"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>assertThat(equipment.getCriticalEquipment()).isFalse();</highlight></codeline>
<codeline lineno="51"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="52"><highlight class="normal"></highlight></codeline>
<codeline lineno="53"><highlight class="normal"><sp/><sp/><sp/><sp/>@Test</highlight></codeline>
<codeline lineno="54" refid="classcom_1_1gmp_1_1equipment_1_1entity_1_1EquipmentTest_1afaafebe0cfb09a4b8850b4d4e5ccd55e" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="classcom_1_1gmp_1_1equipment_1_1entity_1_1EquipmentTest_1afaafebe0cfb09a4b8850b4d4e5ccd55e" kindref="member">testEquipmentStatusEnum</ref>()<sp/>{</highlight></codeline>
<codeline lineno="55"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Test<sp/>ACTIVE状态</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="56"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>assertThat(<ref refid="classcom_1_1gmp_1_1equipment_1_1entity_1_1Equipment" kindref="compound">Equipment</ref>.<ref refid="enumcom_1_1gmp_1_1equipment_1_1entity_1_1Equipment_1_1EquipmentStatus" kindref="compound">EquipmentStatus</ref>.<ref refid="enumcom_1_1gmp_1_1equipment_1_1entity_1_1Equipment_1_1EquipmentStatus_1a0619e9a09202680ce5f5998758619960" kindref="member">ACTIVE</ref>.getDescription()).isEqualTo(</highlight><highlight class="stringliteral">&quot;正常运行&quot;</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="57"><highlight class="normal"></highlight></codeline>
<codeline lineno="58"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Test<sp/>MAINTENANCE状态</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="59"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>assertThat(<ref refid="classcom_1_1gmp_1_1equipment_1_1entity_1_1Equipment" kindref="compound">Equipment</ref>.<ref refid="enumcom_1_1gmp_1_1equipment_1_1entity_1_1Equipment_1_1EquipmentStatus" kindref="compound">EquipmentStatus</ref>.<ref refid="enumcom_1_1gmp_1_1equipment_1_1entity_1_1Equipment_1_1EquipmentStatus_1ad8b1c72ae6cc78c5368ef32e688c3a84" kindref="member">MAINTENANCE</ref>.getDescription()).isEqualTo(</highlight><highlight class="stringliteral">&quot;维护中&quot;</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="60"><highlight class="normal"></highlight></codeline>
<codeline lineno="61"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Test<sp/>DECOMMISSIONED状态</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="62"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>assertThat(<ref refid="classcom_1_1gmp_1_1equipment_1_1entity_1_1Equipment" kindref="compound">Equipment</ref>.<ref refid="enumcom_1_1gmp_1_1equipment_1_1entity_1_1Equipment_1_1EquipmentStatus" kindref="compound">EquipmentStatus</ref>.<ref refid="enumcom_1_1gmp_1_1equipment_1_1entity_1_1Equipment_1_1EquipmentStatus_1a092adca9d35ba850e855e55f7d0a8916" kindref="member">DECOMMISSIONED</ref>.getDescription()).isEqualTo(</highlight><highlight class="stringliteral">&quot;已退役&quot;</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="63"><highlight class="normal"></highlight></codeline>
<codeline lineno="64"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>验证所有枚举值都有描述</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="65"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>(<ref refid="classcom_1_1gmp_1_1equipment_1_1entity_1_1Equipment" kindref="compound">Equipment</ref>.<ref refid="enumcom_1_1gmp_1_1equipment_1_1entity_1_1Equipment_1_1EquipmentStatus" kindref="compound">EquipmentStatus</ref><sp/>status<sp/>:<sp/><ref refid="classcom_1_1gmp_1_1equipment_1_1entity_1_1Equipment" kindref="compound">Equipment</ref>.<ref refid="enumcom_1_1gmp_1_1equipment_1_1entity_1_1Equipment_1_1EquipmentStatus" kindref="compound">EquipmentStatus</ref>.values())<sp/>{</highlight></codeline>
<codeline lineno="66"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>assertThat(status.getDescription()).isNotNull();</highlight></codeline>
<codeline lineno="67"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>assertThat(status.getDescription()).isNotEmpty();</highlight></codeline>
<codeline lineno="68"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="69"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="70"><highlight class="normal"></highlight></codeline>
<codeline lineno="71"><highlight class="normal"><sp/><sp/><sp/><sp/>@Test</highlight></codeline>
<codeline lineno="72" refid="classcom_1_1gmp_1_1equipment_1_1entity_1_1EquipmentTest_1af601d42309252547483a8ab1aad264a4" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="classcom_1_1gmp_1_1equipment_1_1entity_1_1EquipmentTest_1af601d42309252547483a8ab1aad264a4" kindref="member">testOperationalStatusEnum</ref>()<sp/>{</highlight></codeline>
<codeline lineno="73"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Test<sp/>RUNNING状态</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="74"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>assertThat(<ref refid="classcom_1_1gmp_1_1equipment_1_1entity_1_1Equipment" kindref="compound">Equipment</ref>.<ref refid="enumcom_1_1gmp_1_1equipment_1_1entity_1_1Equipment_1_1OperationalStatus" kindref="compound">OperationalStatus</ref>.<ref refid="enumcom_1_1gmp_1_1equipment_1_1entity_1_1Equipment_1_1OperationalStatus_1ae97741624598c943719d4847527dcb58" kindref="member">RUNNING</ref>.getDescription()).isEqualTo(</highlight><highlight class="stringliteral">&quot;运行中&quot;</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="75"><highlight class="normal"></highlight></codeline>
<codeline lineno="76"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Test<sp/>FAULT状态</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="77"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>assertThat(<ref refid="classcom_1_1gmp_1_1equipment_1_1entity_1_1Equipment" kindref="compound">Equipment</ref>.<ref refid="enumcom_1_1gmp_1_1equipment_1_1entity_1_1Equipment_1_1OperationalStatus" kindref="compound">OperationalStatus</ref>.<ref refid="enumcom_1_1gmp_1_1equipment_1_1entity_1_1Equipment_1_1OperationalStatus_1a894baecf4bcc5c2ca0fd6a1c08170938" kindref="member">FAULT</ref>.getDescription()).isEqualTo(</highlight><highlight class="stringliteral">&quot;故障&quot;</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="78"><highlight class="normal"></highlight></codeline>
<codeline lineno="79"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>验证所有运行状态都有描述</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="80"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>(<ref refid="classcom_1_1gmp_1_1equipment_1_1entity_1_1Equipment" kindref="compound">Equipment</ref>.<ref refid="enumcom_1_1gmp_1_1equipment_1_1entity_1_1Equipment_1_1OperationalStatus" kindref="compound">OperationalStatus</ref><sp/>status<sp/>:<sp/><ref refid="classcom_1_1gmp_1_1equipment_1_1entity_1_1Equipment" kindref="compound">Equipment</ref>.<ref refid="enumcom_1_1gmp_1_1equipment_1_1entity_1_1Equipment_1_1OperationalStatus" kindref="compound">OperationalStatus</ref>.values())<sp/>{</highlight></codeline>
<codeline lineno="81"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>assertThat(status.getDescription()).isNotNull();</highlight></codeline>
<codeline lineno="82"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>assertThat(status.getDescription()).isNotEmpty();</highlight></codeline>
<codeline lineno="83"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="84"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="85"><highlight class="normal"></highlight></codeline>
<codeline lineno="86"><highlight class="normal"><sp/><sp/><sp/><sp/>@Test</highlight></codeline>
<codeline lineno="87" refid="classcom_1_1gmp_1_1equipment_1_1entity_1_1EquipmentTest_1a435e5bc389b26838c9bf56af76dc6dd0" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="classcom_1_1gmp_1_1equipment_1_1entity_1_1EquipmentTest_1a435e5bc389b26838c9bf56af76dc6dd0" kindref="member">testIsRunnable</ref>()<sp/>{</highlight></codeline>
<codeline lineno="88"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Given:<sp/>活跃且停止状态的设备</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="89"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="classcom_1_1gmp_1_1equipment_1_1entity_1_1Equipment" kindref="compound">Equipment</ref><sp/>runnableEquipment<sp/>=<sp/><ref refid="classcom_1_1gmp_1_1equipment_1_1entity_1_1Equipment" kindref="compound">Equipment</ref>.builder()</highlight></codeline>
<codeline lineno="90"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>.<ref refid="classcom_1_1gmp_1_1equipment_1_1entity_1_1Equipment_1a3d62ddc378ab4fc05083961d0732a3cd" kindref="member">equipmentStatus</ref>(<ref refid="classcom_1_1gmp_1_1equipment_1_1entity_1_1Equipment" kindref="compound">Equipment</ref>.<ref refid="enumcom_1_1gmp_1_1equipment_1_1entity_1_1Equipment_1_1EquipmentStatus" kindref="compound">EquipmentStatus</ref>.<ref refid="enumcom_1_1gmp_1_1equipment_1_1entity_1_1Equipment_1_1EquipmentStatus_1a0619e9a09202680ce5f5998758619960" kindref="member">ACTIVE</ref>)</highlight></codeline>
<codeline lineno="91"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>.operationalStatus(<ref refid="classcom_1_1gmp_1_1equipment_1_1entity_1_1Equipment" kindref="compound">Equipment</ref>.<ref refid="enumcom_1_1gmp_1_1equipment_1_1entity_1_1Equipment_1_1OperationalStatus" kindref="compound">OperationalStatus</ref>.<ref refid="enumcom_1_1gmp_1_1equipment_1_1entity_1_1Equipment_1_1OperationalStatus_1a90904f8117506ad1d9544acfdedb02c1" kindref="member">STOPPED</ref>)</highlight></codeline>
<codeline lineno="92"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>.build();</highlight></codeline>
<codeline lineno="93"><highlight class="normal"></highlight></codeline>
<codeline lineno="94"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Given:<sp/>活跃且待机状态的设备</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="95"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="classcom_1_1gmp_1_1equipment_1_1entity_1_1Equipment" kindref="compound">Equipment</ref><sp/>standbyEquipment<sp/>=<sp/><ref refid="classcom_1_1gmp_1_1equipment_1_1entity_1_1Equipment" kindref="compound">Equipment</ref>.builder()</highlight></codeline>
<codeline lineno="96"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>.<ref refid="classcom_1_1gmp_1_1equipment_1_1entity_1_1Equipment_1a3d62ddc378ab4fc05083961d0732a3cd" kindref="member">equipmentStatus</ref>(<ref refid="classcom_1_1gmp_1_1equipment_1_1entity_1_1Equipment" kindref="compound">Equipment</ref>.<ref refid="enumcom_1_1gmp_1_1equipment_1_1entity_1_1Equipment_1_1EquipmentStatus" kindref="compound">EquipmentStatus</ref>.<ref refid="enumcom_1_1gmp_1_1equipment_1_1entity_1_1Equipment_1_1EquipmentStatus_1a0619e9a09202680ce5f5998758619960" kindref="member">ACTIVE</ref>)</highlight></codeline>
<codeline lineno="97"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>.operationalStatus(<ref refid="classcom_1_1gmp_1_1equipment_1_1entity_1_1Equipment" kindref="compound">Equipment</ref>.<ref refid="enumcom_1_1gmp_1_1equipment_1_1entity_1_1Equipment_1_1OperationalStatus" kindref="compound">OperationalStatus</ref>.<ref refid="enumcom_1_1gmp_1_1equipment_1_1entity_1_1Equipment_1_1OperationalStatus_1a477c5fac58dbdb878160a9309b7b33cd" kindref="member">STANDBY</ref>)</highlight></codeline>
<codeline lineno="98"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>.build();</highlight></codeline>
<codeline lineno="99"><highlight class="normal"></highlight></codeline>
<codeline lineno="100"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Given:<sp/>维护中状态的设备</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="101"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="classcom_1_1gmp_1_1equipment_1_1entity_1_1Equipment" kindref="compound">Equipment</ref><sp/>maintenanceEquipment<sp/>=<sp/><ref refid="classcom_1_1gmp_1_1equipment_1_1entity_1_1Equipment" kindref="compound">Equipment</ref>.builder()</highlight></codeline>
<codeline lineno="102"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>.<ref refid="classcom_1_1gmp_1_1equipment_1_1entity_1_1Equipment_1a3d62ddc378ab4fc05083961d0732a3cd" kindref="member">equipmentStatus</ref>(<ref refid="classcom_1_1gmp_1_1equipment_1_1entity_1_1Equipment" kindref="compound">Equipment</ref>.<ref refid="enumcom_1_1gmp_1_1equipment_1_1entity_1_1Equipment_1_1EquipmentStatus" kindref="compound">EquipmentStatus</ref>.<ref refid="enumcom_1_1gmp_1_1equipment_1_1entity_1_1Equipment_1_1EquipmentStatus_1ad8b1c72ae6cc78c5368ef32e688c3a84" kindref="member">MAINTENANCE</ref>)</highlight></codeline>
<codeline lineno="103"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>.operationalStatus(<ref refid="classcom_1_1gmp_1_1equipment_1_1entity_1_1Equipment" kindref="compound">Equipment</ref>.<ref refid="enumcom_1_1gmp_1_1equipment_1_1entity_1_1Equipment_1_1OperationalStatus" kindref="compound">OperationalStatus</ref>.<ref refid="enumcom_1_1gmp_1_1equipment_1_1entity_1_1Equipment_1_1OperationalStatus_1a90904f8117506ad1d9544acfdedb02c1" kindref="member">STOPPED</ref>)</highlight></codeline>
<codeline lineno="104"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>.build();</highlight></codeline>
<codeline lineno="105"><highlight class="normal"></highlight></codeline>
<codeline lineno="106"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Given:<sp/>运行中的设备</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="107"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="classcom_1_1gmp_1_1equipment_1_1entity_1_1Equipment" kindref="compound">Equipment</ref><sp/>runningEquipment<sp/>=<sp/><ref refid="classcom_1_1gmp_1_1equipment_1_1entity_1_1Equipment" kindref="compound">Equipment</ref>.builder()</highlight></codeline>
<codeline lineno="108"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>.<ref refid="classcom_1_1gmp_1_1equipment_1_1entity_1_1Equipment_1a3d62ddc378ab4fc05083961d0732a3cd" kindref="member">equipmentStatus</ref>(<ref refid="classcom_1_1gmp_1_1equipment_1_1entity_1_1Equipment" kindref="compound">Equipment</ref>.<ref refid="enumcom_1_1gmp_1_1equipment_1_1entity_1_1Equipment_1_1EquipmentStatus" kindref="compound">EquipmentStatus</ref>.<ref refid="enumcom_1_1gmp_1_1equipment_1_1entity_1_1Equipment_1_1EquipmentStatus_1a0619e9a09202680ce5f5998758619960" kindref="member">ACTIVE</ref>)</highlight></codeline>
<codeline lineno="109"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>.operationalStatus(<ref refid="classcom_1_1gmp_1_1equipment_1_1entity_1_1Equipment" kindref="compound">Equipment</ref>.<ref refid="enumcom_1_1gmp_1_1equipment_1_1entity_1_1Equipment_1_1OperationalStatus" kindref="compound">OperationalStatus</ref>.<ref refid="enumcom_1_1gmp_1_1equipment_1_1entity_1_1Equipment_1_1OperationalStatus_1ae97741624598c943719d4847527dcb58" kindref="member">RUNNING</ref>)</highlight></codeline>
<codeline lineno="110"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>.build();</highlight></codeline>
<codeline lineno="111"><highlight class="normal"></highlight></codeline>
<codeline lineno="112"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Then:<sp/>验证可运行状态判断</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="113"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>assertThat(runnableEquipment.<ref refid="classcom_1_1gmp_1_1equipment_1_1entity_1_1Equipment_1a222e559ece230b03ed652b831aa8baae" kindref="member">isRunnable</ref>()).isTrue();</highlight></codeline>
<codeline lineno="114"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>assertThat(standbyEquipment.<ref refid="classcom_1_1gmp_1_1equipment_1_1entity_1_1Equipment_1a222e559ece230b03ed652b831aa8baae" kindref="member">isRunnable</ref>()).isTrue();</highlight></codeline>
<codeline lineno="115"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>assertThat(maintenanceEquipment.<ref refid="classcom_1_1gmp_1_1equipment_1_1entity_1_1Equipment_1a222e559ece230b03ed652b831aa8baae" kindref="member">isRunnable</ref>()).isFalse();<sp/></highlight><highlight class="comment">//<sp/>维护状态不可运行</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="116"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>assertThat(runningEquipment.<ref refid="classcom_1_1gmp_1_1equipment_1_1entity_1_1Equipment_1a222e559ece230b03ed652b831aa8baae" kindref="member">isRunnable</ref>()).isFalse();<sp/></highlight><highlight class="comment">//<sp/>已在运行中</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="117"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="118"><highlight class="normal"></highlight></codeline>
<codeline lineno="119"><highlight class="normal"><sp/><sp/><sp/><sp/>@Test</highlight></codeline>
<codeline lineno="120" refid="classcom_1_1gmp_1_1equipment_1_1entity_1_1EquipmentTest_1abf2b3c14ac505b4254096a08834cda2a" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="classcom_1_1gmp_1_1equipment_1_1entity_1_1EquipmentTest_1abf2b3c14ac505b4254096a08834cda2a" kindref="member">testIsMaintenanceDue</ref>()<sp/>{</highlight></codeline>
<codeline lineno="121"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>LocalDateTime<sp/>now<sp/>=<sp/>LocalDateTime.now();</highlight></codeline>
<codeline lineno="122"><highlight class="normal"></highlight></codeline>
<codeline lineno="123"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Given:<sp/>下次维护时间为明天（不需要维护）</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="124"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="classcom_1_1gmp_1_1equipment_1_1entity_1_1Equipment" kindref="compound">Equipment</ref><sp/>notDueEquipment<sp/>=<sp/><ref refid="classcom_1_1gmp_1_1equipment_1_1entity_1_1Equipment" kindref="compound">Equipment</ref>.builder()</highlight></codeline>
<codeline lineno="125"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>.<ref refid="classcom_1_1gmp_1_1equipment_1_1entity_1_1Equipment_1a506e2f746990f924616b9c5b8cf46464" kindref="member">nextMaintenanceDate</ref>(now.plusDays(1))</highlight></codeline>
<codeline lineno="126"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>.build();</highlight></codeline>
<codeline lineno="127"><highlight class="normal"></highlight></codeline>
<codeline lineno="128"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Given:<sp/>下次维护时间已过（需要维护）</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="129"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="classcom_1_1gmp_1_1equipment_1_1entity_1_1Equipment" kindref="compound">Equipment</ref><sp/>dueEquipment<sp/>=<sp/><ref refid="classcom_1_1gmp_1_1equipment_1_1entity_1_1Equipment" kindref="compound">Equipment</ref>.builder()</highlight></codeline>
<codeline lineno="130"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>.<ref refid="classcom_1_1gmp_1_1equipment_1_1entity_1_1Equipment_1a506e2f746990f924616b9c5b8cf46464" kindref="member">nextMaintenanceDate</ref>(now.minusDays(1))</highlight></codeline>
<codeline lineno="131"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>.build();</highlight></codeline>
<codeline lineno="132"><highlight class="normal"></highlight></codeline>
<codeline lineno="133"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Given:<sp/>提前7天预警（需要维护）</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="134"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="classcom_1_1gmp_1_1equipment_1_1entity_1_1Equipment" kindref="compound">Equipment</ref><sp/>nearingDueEquipment<sp/>=<sp/><ref refid="classcom_1_1gmp_1_1equipment_1_1entity_1_1Equipment" kindref="compound">Equipment</ref>.builder()</highlight></codeline>
<codeline lineno="135"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>.<ref refid="classcom_1_1gmp_1_1equipment_1_1entity_1_1Equipment_1a506e2f746990f924616b9c5b8cf46464" kindref="member">nextMaintenanceDate</ref>(now.plusDays(5))<sp/></highlight><highlight class="comment">//<sp/>还有5天到期，触发7天预警</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="136"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>.build();</highlight></codeline>
<codeline lineno="137"><highlight class="normal"></highlight></codeline>
<codeline lineno="138"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Given:<sp/>没有设置维护时间的设备</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="139"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="classcom_1_1gmp_1_1equipment_1_1entity_1_1Equipment" kindref="compound">Equipment</ref><sp/>noMaintenanceDateEquipment<sp/>=<sp/><ref refid="classcom_1_1gmp_1_1equipment_1_1entity_1_1Equipment" kindref="compound">Equipment</ref>.builder().build();</highlight></codeline>
<codeline lineno="140"><highlight class="normal"></highlight></codeline>
<codeline lineno="141"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Then:<sp/>验证维护到期判断</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="142"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>assertThat(notDueEquipment.<ref refid="classcom_1_1gmp_1_1equipment_1_1entity_1_1Equipment_1afc61ef815941a9f1d2aa368cbb66db98" kindref="member">isMaintenanceDue</ref>()).isFalse();</highlight></codeline>
<codeline lineno="143"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>assertThat(dueEquipment.<ref refid="classcom_1_1gmp_1_1equipment_1_1entity_1_1Equipment_1afc61ef815941a9f1d2aa368cbb66db98" kindref="member">isMaintenanceDue</ref>()).isTrue();</highlight></codeline>
<codeline lineno="144"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>assertThat(nearingDueEquipment.<ref refid="classcom_1_1gmp_1_1equipment_1_1entity_1_1Equipment_1afc61ef815941a9f1d2aa368cbb66db98" kindref="member">isMaintenanceDue</ref>()).isTrue();</highlight></codeline>
<codeline lineno="145"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>assertThat(noMaintenanceDateEquipment.<ref refid="classcom_1_1gmp_1_1equipment_1_1entity_1_1Equipment_1afc61ef815941a9f1d2aa368cbb66db98" kindref="member">isMaintenanceDue</ref>()).isFalse();</highlight></codeline>
<codeline lineno="146"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="147"><highlight class="normal"></highlight></codeline>
<codeline lineno="148"><highlight class="normal"><sp/><sp/><sp/><sp/>@Test</highlight></codeline>
<codeline lineno="149" refid="classcom_1_1gmp_1_1equipment_1_1entity_1_1EquipmentTest_1a5633b12b34a525ce46ad8b8247665830" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="classcom_1_1gmp_1_1equipment_1_1entity_1_1EquipmentTest_1a5633b12b34a525ce46ad8b8247665830" kindref="member">testIsCalibrationOverdue</ref>()<sp/>{</highlight></codeline>
<codeline lineno="150"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>LocalDateTime<sp/>now<sp/>=<sp/>LocalDateTime.now();</highlight></codeline>
<codeline lineno="151"><highlight class="normal"></highlight></codeline>
<codeline lineno="152"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Given:<sp/>校准到期时间已过</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="153"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="classcom_1_1gmp_1_1equipment_1_1entity_1_1Equipment" kindref="compound">Equipment</ref><sp/>overdueEquipment<sp/>=<sp/><ref refid="classcom_1_1gmp_1_1equipment_1_1entity_1_1Equipment" kindref="compound">Equipment</ref>.builder()</highlight></codeline>
<codeline lineno="154"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>.<ref refid="classcom_1_1gmp_1_1equipment_1_1entity_1_1Equipment_1a7f2c8360886d0087df08b9d217eebf39" kindref="member">nextCalibrationDate</ref>(now.minusDays(15))</highlight></codeline>
<codeline lineno="155"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>.build();</highlight></codeline>
<codeline lineno="156"><highlight class="normal"></highlight></codeline>
<codeline lineno="157"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Given:<sp/>校准时间未到</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="158"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="classcom_1_1gmp_1_1equipment_1_1entity_1_1Equipment" kindref="compound">Equipment</ref><sp/>notOverdueEquipment<sp/>=<sp/><ref refid="classcom_1_1gmp_1_1equipment_1_1entity_1_1Equipment" kindref="compound">Equipment</ref>.builder()</highlight></codeline>
<codeline lineno="159"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>.<ref refid="classcom_1_1gmp_1_1equipment_1_1entity_1_1Equipment_1a7f2c8360886d0087df08b9d217eebf39" kindref="member">nextCalibrationDate</ref>(now.plusDays(30))</highlight></codeline>
<codeline lineno="160"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>.build();</highlight></codeline>
<codeline lineno="161"><highlight class="normal"></highlight></codeline>
<codeline lineno="162"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Given:<sp/>没有设置校准时间的设备</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="163"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="classcom_1_1gmp_1_1equipment_1_1entity_1_1Equipment" kindref="compound">Equipment</ref><sp/>noCalibrationDateEquipment<sp/>=<sp/><ref refid="classcom_1_1gmp_1_1equipment_1_1entity_1_1Equipment" kindref="compound">Equipment</ref>.builder().build();</highlight></codeline>
<codeline lineno="164"><highlight class="normal"></highlight></codeline>
<codeline lineno="165"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Then:<sp/>验证校准过期判断</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="166"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>assertThat(overdueEquipment.<ref refid="classcom_1_1gmp_1_1equipment_1_1entity_1_1Equipment_1a5954779fb98ef0f92a94d890c0f99b7d" kindref="member">isCalibrationOverdue</ref>()).isTrue();</highlight></codeline>
<codeline lineno="167"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>assertThat(notOverdueEquipment.<ref refid="classcom_1_1gmp_1_1equipment_1_1entity_1_1Equipment_1a5954779fb98ef0f92a94d890c0f99b7d" kindref="member">isCalibrationOverdue</ref>()).isFalse();</highlight></codeline>
<codeline lineno="168"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>assertThat(noCalibrationDateEquipment.<ref refid="classcom_1_1gmp_1_1equipment_1_1entity_1_1Equipment_1a5954779fb98ef0f92a94d890c0f99b7d" kindref="member">isCalibrationOverdue</ref>()).isFalse();</highlight></codeline>
<codeline lineno="169"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="170"><highlight class="normal"></highlight></codeline>
<codeline lineno="171"><highlight class="normal"><sp/><sp/><sp/><sp/>@Test</highlight></codeline>
<codeline lineno="172" refid="classcom_1_1gmp_1_1equipment_1_1entity_1_1EquipmentTest_1acf31d31a7cb213f3a85885fdb0895315" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="classcom_1_1gmp_1_1equipment_1_1entity_1_1EquipmentTest_1acf31d31a7cb213f3a85885fdb0895315" kindref="member">testIsUnderWarranty</ref>()<sp/>{</highlight></codeline>
<codeline lineno="173"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>LocalDateTime<sp/>now<sp/>=<sp/>LocalDateTime.now();</highlight></codeline>
<codeline lineno="174"><highlight class="normal"></highlight></codeline>
<codeline lineno="175"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Given:<sp/>有效质保期内的设备</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="176"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="classcom_1_1gmp_1_1equipment_1_1entity_1_1Equipment" kindref="compound">Equipment</ref><sp/>underWarrantyEquipment<sp/>=<sp/><ref refid="classcom_1_1gmp_1_1equipment_1_1entity_1_1Equipment" kindref="compound">Equipment</ref>.builder()</highlight></codeline>
<codeline lineno="177"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>.<ref refid="classcom_1_1gmp_1_1equipment_1_1entity_1_1Equipment_1aebd7e48030a4797657a2663eb4a914ba" kindref="member">warrantyExpiry</ref>(now.plusMonths(6))</highlight></codeline>
<codeline lineno="178"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>.build();</highlight></codeline>
<codeline lineno="179"><highlight class="normal"></highlight></codeline>
<codeline lineno="180"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Given:<sp/>质保期已过的设备</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="181"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="classcom_1_1gmp_1_1equipment_1_1entity_1_1Equipment" kindref="compound">Equipment</ref><sp/>expiredWarrantyEquipment<sp/>=<sp/><ref refid="classcom_1_1gmp_1_1equipment_1_1entity_1_1Equipment" kindref="compound">Equipment</ref>.builder()</highlight></codeline>
<codeline lineno="182"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>.<ref refid="classcom_1_1gmp_1_1equipment_1_1entity_1_1Equipment_1aebd7e48030a4797657a2663eb4a914ba" kindref="member">warrantyExpiry</ref>(now.minusMonths(1))</highlight></codeline>
<codeline lineno="183"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>.build();</highlight></codeline>
<codeline lineno="184"><highlight class="normal"></highlight></codeline>
<codeline lineno="185"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Given:<sp/>没有设置质保期的设备</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="186"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="classcom_1_1gmp_1_1equipment_1_1entity_1_1Equipment" kindref="compound">Equipment</ref><sp/>noWarrantyEquipment<sp/>=<sp/><ref refid="classcom_1_1gmp_1_1equipment_1_1entity_1_1Equipment" kindref="compound">Equipment</ref>.builder().build();</highlight></codeline>
<codeline lineno="187"><highlight class="normal"></highlight></codeline>
<codeline lineno="188"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Then:<sp/>验证质保期判断</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="189"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>assertThat(underWarrantyEquipment.<ref refid="classcom_1_1gmp_1_1equipment_1_1entity_1_1Equipment_1a414f5b7782cf8a25871bcc66659c88f7" kindref="member">isUnderWarranty</ref>()).isTrue();</highlight></codeline>
<codeline lineno="190"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>assertThat(expiredWarrantyEquipment.<ref refid="classcom_1_1gmp_1_1equipment_1_1entity_1_1Equipment_1a414f5b7782cf8a25871bcc66659c88f7" kindref="member">isUnderWarranty</ref>()).isFalse();</highlight></codeline>
<codeline lineno="191"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>assertThat(noWarrantyEquipment.<ref refid="classcom_1_1gmp_1_1equipment_1_1entity_1_1Equipment_1a414f5b7782cf8a25871bcc66659c88f7" kindref="member">isUnderWarranty</ref>()).isFalse();</highlight></codeline>
<codeline lineno="192"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="193"><highlight class="normal"></highlight></codeline>
<codeline lineno="194"><highlight class="normal"><sp/><sp/><sp/><sp/>@Test</highlight></codeline>
<codeline lineno="195" refid="classcom_1_1gmp_1_1equipment_1_1entity_1_1EquipmentTest_1a6e844c7e37fe1ef994034ca9f7ea1bc0" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="classcom_1_1gmp_1_1equipment_1_1entity_1_1EquipmentTest_1a6e844c7e37fe1ef994034ca9f7ea1bc0" kindref="member">testGetUsageYears</ref>()<sp/>{</highlight></codeline>
<codeline lineno="196"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>LocalDateTime<sp/>baseDate<sp/>=<sp/>LocalDateTime.of(2025,<sp/>1,<sp/>1,<sp/>0,<sp/>0);</highlight></codeline>
<codeline lineno="197"><highlight class="normal"></highlight></codeline>
<codeline lineno="198"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Given:<sp/>设备调试日期是一年前</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="199"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="classcom_1_1gmp_1_1equipment_1_1entity_1_1Equipment" kindref="compound">Equipment</ref><sp/>oneYearOldEquipment<sp/>=<sp/><ref refid="classcom_1_1gmp_1_1equipment_1_1entity_1_1Equipment" kindref="compound">Equipment</ref>.builder()</highlight></codeline>
<codeline lineno="200"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>.<ref refid="classcom_1_1gmp_1_1equipment_1_1entity_1_1Equipment_1ad3f3e9c673e586d1dd43359560fbabd8" kindref="member">commissioningDate</ref>(baseDate.minusYears(1))</highlight></codeline>
<codeline lineno="201"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>.build();</highlight></codeline>
<codeline lineno="202"><highlight class="normal"></highlight></codeline>
<codeline lineno="203"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Given:<sp/>使用年限为0.5年的设备</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="204"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="classcom_1_1gmp_1_1equipment_1_1entity_1_1Equipment" kindref="compound">Equipment</ref><sp/>halfYearOldEquipment<sp/>=<sp/><ref refid="classcom_1_1gmp_1_1equipment_1_1entity_1_1Equipment" kindref="compound">Equipment</ref>.builder()</highlight></codeline>
<codeline lineno="205"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>.<ref refid="classcom_1_1gmp_1_1equipment_1_1entity_1_1Equipment_1ad3f3e9c673e586d1dd43359560fbabd8" kindref="member">commissioningDate</ref>(baseDate.minusMonths(6))</highlight></codeline>
<codeline lineno="206"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>.build();</highlight></codeline>
<codeline lineno="207"><highlight class="normal"></highlight></codeline>
<codeline lineno="208"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Given:<sp/>新设备（调试日期为null）</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="209"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="classcom_1_1gmp_1_1equipment_1_1entity_1_1Equipment" kindref="compound">Equipment</ref><sp/>newEquipment<sp/>=<sp/><ref refid="classcom_1_1gmp_1_1equipment_1_1entity_1_1Equipment" kindref="compound">Equipment</ref>.builder().build();</highlight></codeline>
<codeline lineno="210"><highlight class="normal"></highlight></codeline>
<codeline lineno="211"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Then:<sp/>验证使用年限计算（允许0.1年的误差）</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="212"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>BigDecimal<sp/>oneYearUsage<sp/>=<sp/>oneYearOldEquipment.<ref refid="classcom_1_1gmp_1_1equipment_1_1entity_1_1Equipment_1ab3406af30fc132d6eca6f966dfd5c971" kindref="member">getUsageYears</ref>();</highlight></codeline>
<codeline lineno="213"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>BigDecimal<sp/>halfYearUsage<sp/>=<sp/>halfYearOldEquipment.<ref refid="classcom_1_1gmp_1_1equipment_1_1entity_1_1Equipment_1ab3406af30fc132d6eca6f966dfd5c971" kindref="member">getUsageYears</ref>();</highlight></codeline>
<codeline lineno="214"><highlight class="normal"></highlight></codeline>
<codeline lineno="215"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>assertThat(oneYearUsage).isBetween(BigDecimal.valueOf(0.9),<sp/>BigDecimal.valueOf(1.1));</highlight></codeline>
<codeline lineno="216"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>assertThat(halfYearUsage.setScale(1,<sp/>BigDecimal.ROUND_HALF_UP))</highlight></codeline>
<codeline lineno="217"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>.isEqualTo(BigDecimal.valueOf(0.5));</highlight></codeline>
<codeline lineno="218"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>assertThat(newEquipment.<ref refid="classcom_1_1gmp_1_1equipment_1_1entity_1_1Equipment_1ab3406af30fc132d6eca6f966dfd5c971" kindref="member">getUsageYears</ref>()).isEqualTo(BigDecimal.ZERO);</highlight></codeline>
<codeline lineno="219"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="220"><highlight class="normal"></highlight></codeline>
<codeline lineno="221"><highlight class="normal"><sp/><sp/><sp/><sp/>@Test</highlight></codeline>
<codeline lineno="222" refid="classcom_1_1gmp_1_1equipment_1_1entity_1_1EquipmentTest_1a3daaa80607ed5921d7eff814552cdb04" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="classcom_1_1gmp_1_1equipment_1_1entity_1_1EquipmentTest_1a3daaa80607ed5921d7eff814552cdb04" kindref="member">testAuditFields</ref>()<sp/>{</highlight></codeline>
<codeline lineno="223"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>LocalDateTime<sp/>now<sp/>=<sp/>LocalDateTime.now();</highlight></codeline>
<codeline lineno="224"><highlight class="normal"></highlight></codeline>
<codeline lineno="225"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Given:<sp/>设置审计字段</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="226"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="classcom_1_1gmp_1_1equipment_1_1entity_1_1Equipment" kindref="compound">Equipment</ref><sp/>equipment<sp/>=<sp/><ref refid="classcom_1_1gmp_1_1equipment_1_1entity_1_1Equipment" kindref="compound">Equipment</ref>.builder()</highlight></codeline>
<codeline lineno="227"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>.<ref refid="classcom_1_1gmp_1_1equipment_1_1entity_1_1Equipment_1a8ab2eea0bf6e79d324113437f92672bd" kindref="member">createdAt</ref>(now)</highlight></codeline>
<codeline lineno="228"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>.updatedAt(now)</highlight></codeline>
<codeline lineno="229"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>.createdBy(1L)</highlight></codeline>
<codeline lineno="230"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>.updatedBy(1L)</highlight></codeline>
<codeline lineno="231"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>.version(1)</highlight></codeline>
<codeline lineno="232"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>.build();</highlight></codeline>
<codeline lineno="233"><highlight class="normal"></highlight></codeline>
<codeline lineno="234"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Then:<sp/>验证审计字段</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="235"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>assertThat(equipment.getCreatedAt()).isEqualTo(now);</highlight></codeline>
<codeline lineno="236"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>assertThat(equipment.getUpdatedAt()).isEqualTo(now);</highlight></codeline>
<codeline lineno="237"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>assertThat(equipment.getCreatedBy()).isEqualTo(1L);</highlight></codeline>
<codeline lineno="238"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>assertThat(equipment.getUpdatedBy()).isEqualTo(1L);</highlight></codeline>
<codeline lineno="239"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>assertThat(equipment.getVersion()).isEqualTo(1);</highlight></codeline>
<codeline lineno="240"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="241"><highlight class="normal"></highlight></codeline>
<codeline lineno="242"><highlight class="normal"><sp/><sp/><sp/><sp/>@Test</highlight></codeline>
<codeline lineno="243" refid="classcom_1_1gmp_1_1equipment_1_1entity_1_1EquipmentTest_1a9ece199f7d1e17e9e949f9a80083f5d4" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="classcom_1_1gmp_1_1equipment_1_1entity_1_1EquipmentTest_1a9ece199f7d1e17e9e949f9a80083f5d4" kindref="member">testEquipmentValidation</ref>()<sp/>{</highlight></codeline>
<codeline lineno="244"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Test<sp/>valid<sp/>equipment<sp/>code</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="245"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="classcom_1_1gmp_1_1equipment_1_1entity_1_1Equipment" kindref="compound">Equipment</ref><sp/>validEquipment<sp/>=<sp/><ref refid="classcom_1_1gmp_1_1equipment_1_1entity_1_1Equipment" kindref="compound">Equipment</ref>.builder()</highlight></codeline>
<codeline lineno="246"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>.<ref refid="classcom_1_1gmp_1_1equipment_1_1entity_1_1Equipment_1abac79ce60fbfef93f559147c3cdaef49" kindref="member">equipmentCode</ref>(</highlight><highlight class="stringliteral">&quot;RX-1234&quot;</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="247"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>.equipmentName(</highlight><highlight class="stringliteral">&quot;测试设备&quot;</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="248"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>.manufacturer(</highlight><highlight class="stringliteral">&quot;测试制造商&quot;</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="249"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>.location(</highlight><highlight class="stringliteral">&quot;测试位置&quot;</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="250"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>.build();</highlight></codeline>
<codeline lineno="251"><highlight class="normal"></highlight></codeline>
<codeline lineno="252"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>assertThat(validEquipment.getEquipmentCode()).matches(</highlight><highlight class="stringliteral">&quot;^[A-Z]{2,4}-\\d{4,6}$&quot;</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="253"><highlight class="normal"></highlight></codeline>
<codeline lineno="254"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Test<sp/>invalid<sp/>equipment<sp/>codes<sp/>(should<sp/>be<sp/>validated<sp/>by<sp/>@Pattern<sp/>annotation<sp/>in</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="255"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>practice)</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="256"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Note:<sp/>实际验证由Spring<sp/>Validation处理，这里测试模式识别</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="257"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>assertThat(</highlight><highlight class="stringliteral">&quot;RX-1234&quot;</highlight><highlight class="normal">).matches(</highlight><highlight class="stringliteral">&quot;^[A-Z]{2,4}-\\d{4,6}$&quot;</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="258"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>assertThat(</highlight><highlight class="stringliteral">&quot;INVALID&quot;</highlight><highlight class="normal">).doesNotMatch(</highlight><highlight class="stringliteral">&quot;^[A-Z]{2,4}-\\d{4,6}$&quot;</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="259"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>assertThat(</highlight><highlight class="stringliteral">&quot;Rx-1234&quot;</highlight><highlight class="normal">).doesNotMatch(</highlight><highlight class="stringliteral">&quot;^[A-Z]{2,4}-\\d{4,6}$&quot;</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="260"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="261"><highlight class="normal"></highlight></codeline>
<codeline lineno="262"><highlight class="normal"><sp/><sp/><sp/><sp/>@Test</highlight></codeline>
<codeline lineno="263" refid="classcom_1_1gmp_1_1equipment_1_1entity_1_1EquipmentTest_1a53ad6bec629554a1e5c6c991261530b7" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="classcom_1_1gmp_1_1equipment_1_1entity_1_1EquipmentTest_1a53ad6bec629554a1e5c6c991261530b7" kindref="member">testCriticalEquipmentManagement</ref>()<sp/>{</highlight></codeline>
<codeline lineno="264"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Given:<sp/>关键设备的配置</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="265"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="classcom_1_1gmp_1_1equipment_1_1entity_1_1Equipment" kindref="compound">Equipment</ref><sp/>criticalEquipment<sp/>=<sp/><ref refid="classcom_1_1gmp_1_1equipment_1_1entity_1_1Equipment" kindref="compound">Equipment</ref>.builder()</highlight></codeline>
<codeline lineno="266"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>.<ref refid="classcom_1_1gmp_1_1equipment_1_1entity_1_1Equipment_1add4f90e70421e93e004d44c73c82fd77" kindref="member">equipmentName</ref>(</highlight><highlight class="stringliteral">&quot;主反应釜&quot;</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="267"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>.criticalEquipment(</highlight><highlight class="keyword">true</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="268"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>.riskLevel(</highlight><highlight class="stringliteral">&quot;高&quot;</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="269"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>.usageRequirements(</highlight><highlight class="stringliteral">&quot;必须在GMP环境下使用&quot;</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="270"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>.equipmentStatus(<ref refid="classcom_1_1gmp_1_1equipment_1_1entity_1_1Equipment" kindref="compound">Equipment</ref>.<ref refid="enumcom_1_1gmp_1_1equipment_1_1entity_1_1Equipment_1_1EquipmentStatus" kindref="compound">EquipmentStatus</ref>.<ref refid="enumcom_1_1gmp_1_1equipment_1_1entity_1_1Equipment_1_1EquipmentStatus_1a0619e9a09202680ce5f5998758619960" kindref="member">ACTIVE</ref>)</highlight></codeline>
<codeline lineno="271"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>.build();</highlight></codeline>
<codeline lineno="272"><highlight class="normal"></highlight></codeline>
<codeline lineno="273"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Given:<sp/>普通设备的配置</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="274"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="classcom_1_1gmp_1_1equipment_1_1entity_1_1Equipment" kindref="compound">Equipment</ref><sp/>normalEquipment<sp/>=<sp/><ref refid="classcom_1_1gmp_1_1equipment_1_1entity_1_1Equipment" kindref="compound">Equipment</ref>.builder()</highlight></codeline>
<codeline lineno="275"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>.<ref refid="classcom_1_1gmp_1_1equipment_1_1entity_1_1Equipment_1add4f90e70421e93e004d44c73c82fd77" kindref="member">equipmentName</ref>(</highlight><highlight class="stringliteral">&quot;辅助泵&quot;</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="276"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>.criticalEquipment(</highlight><highlight class="keyword">false</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="277"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>.equipmentStatus(<ref refid="classcom_1_1gmp_1_1equipment_1_1entity_1_1Equipment" kindref="compound">Equipment</ref>.<ref refid="enumcom_1_1gmp_1_1equipment_1_1entity_1_1Equipment_1_1EquipmentStatus" kindref="compound">EquipmentStatus</ref>.<ref refid="enumcom_1_1gmp_1_1equipment_1_1entity_1_1Equipment_1_1EquipmentStatus_1a0619e9a09202680ce5f5998758619960" kindref="member">ACTIVE</ref>)</highlight></codeline>
<codeline lineno="278"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>.build();</highlight></codeline>
<codeline lineno="279"><highlight class="normal"></highlight></codeline>
<codeline lineno="280"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Then:<sp/>验证设备分类</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="281"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>assertThat(criticalEquipment.getCriticalEquipment()).isTrue();</highlight></codeline>
<codeline lineno="282"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>assertThat(criticalEquipment.getRiskLevel()).isEqualTo(</highlight><highlight class="stringliteral">&quot;高&quot;</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="283"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>assertThat(criticalEquipment.getUsageRequirements()).contains(</highlight><highlight class="stringliteral">&quot;GMP&quot;</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="284"><highlight class="normal"></highlight></codeline>
<codeline lineno="285"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>assertThat(normalEquipment.getCriticalEquipment()).isFalse();</highlight></codeline>
<codeline lineno="286"><highlight class="normal"></highlight></codeline>
<codeline lineno="287"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>GMP合规验证：关键设备必须有明确的使用要求</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="288"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>assertThat(criticalEquipment.getUsageRequirements()).isNotNull();</highlight></codeline>
<codeline lineno="289"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>assertThat(criticalEquipment.getUsageRequirements()).isNotEmpty();</highlight></codeline>
<codeline lineno="290"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="291"><highlight class="normal"></highlight></codeline>
<codeline lineno="292"><highlight class="normal"><sp/><sp/><sp/><sp/>@Test</highlight></codeline>
<codeline lineno="293" refid="classcom_1_1gmp_1_1equipment_1_1entity_1_1EquipmentTest_1ab5b174b0c472408e0bf8d74c31f0ec26" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="classcom_1_1gmp_1_1equipment_1_1entity_1_1EquipmentTest_1ab5b174b0c472408e0bf8d74c31f0ec26" kindref="member">testEquipmentMonitoring</ref>()<sp/>{</highlight></codeline>
<codeline lineno="294"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Given:<sp/>启用监控的设备</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="295"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="classcom_1_1gmp_1_1equipment_1_1entity_1_1Equipment" kindref="compound">Equipment</ref><sp/>monitoredEquipment<sp/>=<sp/><ref refid="classcom_1_1gmp_1_1equipment_1_1entity_1_1Equipment" kindref="compound">Equipment</ref>.builder()</highlight></codeline>
<codeline lineno="296"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>.<ref refid="classcom_1_1gmp_1_1equipment_1_1entity_1_1Equipment_1a1e174e57936c4c519318d9ddd15e6b34" kindref="member">sensorId</ref>(</highlight><highlight class="stringliteral">&quot;TEMP-SENSOR-001&quot;</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="297"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>.monitoringEnabled(</highlight><highlight class="keyword">true</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="298"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>.criticalEquipment(</highlight><highlight class="keyword">true</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="299"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>.build();</highlight></codeline>
<codeline lineno="300"><highlight class="normal"></highlight></codeline>
<codeline lineno="301"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Given:<sp/>不监控的设备</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="302"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="classcom_1_1gmp_1_1equipment_1_1entity_1_1Equipment" kindref="compound">Equipment</ref><sp/>unmonitoredEquipment<sp/>=<sp/><ref refid="classcom_1_1gmp_1_1equipment_1_1entity_1_1Equipment" kindref="compound">Equipment</ref>.builder()</highlight></codeline>
<codeline lineno="303"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>.<ref refid="classcom_1_1gmp_1_1equipment_1_1entity_1_1Equipment_1a9dc74eaaa49e6917100c3cf2bafb2c3d" kindref="member">monitoringEnabled</ref>(</highlight><highlight class="keyword">false</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="304"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>.build();</highlight></codeline>
<codeline lineno="305"><highlight class="normal"></highlight></codeline>
<codeline lineno="306"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Then:<sp/>验证监控配置</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="307"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>assertThat(monitoredEquipment.getSensorId()).isEqualTo(</highlight><highlight class="stringliteral">&quot;TEMP-SENSOR-001&quot;</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="308"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>assertThat(monitoredEquipment.getMonitoringEnabled()).isTrue();</highlight></codeline>
<codeline lineno="309"><highlight class="normal"></highlight></codeline>
<codeline lineno="310"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>assertThat(unmonitoredEquipment.getMonitoringEnabled()).isFalse();</highlight></codeline>
<codeline lineno="311"><highlight class="normal"></highlight></codeline>
<codeline lineno="312"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>GMP合规：关键设备应启用监控</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="313"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>assertThat(monitoredEquipment.getCriticalEquipment()<sp/>||</highlight></codeline>
<codeline lineno="314"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>!monitoredEquipment.getMonitoringEnabled()).isTrue();</highlight></codeline>
<codeline lineno="315"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="316"><highlight class="normal"></highlight></codeline>
<codeline lineno="317"><highlight class="normal"><sp/><sp/><sp/><sp/>@Test</highlight></codeline>
<codeline lineno="318" refid="classcom_1_1gmp_1_1equipment_1_1entity_1_1EquipmentTest_1a82fd622687934b0916c473241733135b" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="classcom_1_1gmp_1_1equipment_1_1entity_1_1EquipmentTest_1a82fd622687934b0916c473241733135b" kindref="member">testEquipmentLifecycleManagement</ref>()<sp/>{</highlight></codeline>
<codeline lineno="319"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>测试设备生命周期管理：INACTIVE<sp/>-&gt;<sp/>ACTIVE<sp/>-&gt;<sp/>MAINTENANCE<sp/>-&gt;<sp/>DECOMMISSIONED</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="320"><highlight class="normal"></highlight></codeline>
<codeline lineno="321"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>1.<sp/>新安装的设备</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="322"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="classcom_1_1gmp_1_1equipment_1_1entity_1_1Equipment" kindref="compound">Equipment</ref><sp/>newEquipment<sp/>=<sp/><ref refid="classcom_1_1gmp_1_1equipment_1_1entity_1_1Equipment" kindref="compound">Equipment</ref>.builder()</highlight></codeline>
<codeline lineno="323"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>.<ref refid="classcom_1_1gmp_1_1equipment_1_1entity_1_1Equipment_1a3d62ddc378ab4fc05083961d0732a3cd" kindref="member">equipmentStatus</ref>(<ref refid="classcom_1_1gmp_1_1equipment_1_1entity_1_1Equipment" kindref="compound">Equipment</ref>.<ref refid="enumcom_1_1gmp_1_1equipment_1_1entity_1_1Equipment_1_1EquipmentStatus" kindref="compound">EquipmentStatus</ref>.<ref refid="enumcom_1_1gmp_1_1equipment_1_1entity_1_1Equipment_1_1EquipmentStatus_1a4239bd86bc7b55120de22c9593cb8b7f" kindref="member">INACTIVE</ref>)</highlight></codeline>
<codeline lineno="324"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>.installationDate(LocalDateTime.now().minusDays(1))</highlight></codeline>
<codeline lineno="325"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>.build();</highlight></codeline>
<codeline lineno="326"><highlight class="normal"></highlight></codeline>
<codeline lineno="327"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>assertThat(newEquipment.getEquipmentStatus()).isEqualTo(<ref refid="classcom_1_1gmp_1_1equipment_1_1entity_1_1Equipment" kindref="compound">Equipment</ref>.<ref refid="enumcom_1_1gmp_1_1equipment_1_1entity_1_1Equipment_1_1EquipmentStatus" kindref="compound">EquipmentStatus</ref>.<ref refid="enumcom_1_1gmp_1_1equipment_1_1entity_1_1Equipment_1_1EquipmentStatus_1a4239bd86bc7b55120de22c9593cb8b7f" kindref="member">INACTIVE</ref>);</highlight></codeline>
<codeline lineno="328"><highlight class="normal"></highlight></codeline>
<codeline lineno="329"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>2.<sp/>激活设备</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="330"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>newEquipment.setEquipmentStatus(<ref refid="classcom_1_1gmp_1_1equipment_1_1entity_1_1Equipment" kindref="compound">Equipment</ref>.<ref refid="enumcom_1_1gmp_1_1equipment_1_1entity_1_1Equipment_1_1EquipmentStatus" kindref="compound">EquipmentStatus</ref>.<ref refid="enumcom_1_1gmp_1_1equipment_1_1entity_1_1Equipment_1_1EquipmentStatus_1a0619e9a09202680ce5f5998758619960" kindref="member">ACTIVE</ref>);</highlight></codeline>
<codeline lineno="331"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>assertThat(newEquipment.getEquipmentStatus()).isEqualTo(<ref refid="classcom_1_1gmp_1_1equipment_1_1entity_1_1Equipment" kindref="compound">Equipment</ref>.<ref refid="enumcom_1_1gmp_1_1equipment_1_1entity_1_1Equipment_1_1EquipmentStatus" kindref="compound">EquipmentStatus</ref>.<ref refid="enumcom_1_1gmp_1_1equipment_1_1entity_1_1Equipment_1_1EquipmentStatus_1a0619e9a09202680ce5f5998758619960" kindref="member">ACTIVE</ref>);</highlight></codeline>
<codeline lineno="332"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>assertThat(newEquipment.<ref refid="classcom_1_1gmp_1_1equipment_1_1entity_1_1Equipment_1a222e559ece230b03ed652b831aa8baae" kindref="member">isRunnable</ref>()).isFalse();<sp/></highlight><highlight class="comment">//<sp/>还需要设置operationalStatus</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="333"><highlight class="normal"></highlight></codeline>
<codeline lineno="334"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>3.<sp/>设置为可运行状态</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="335"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>newEquipment.setOperationalStatus(<ref refid="classcom_1_1gmp_1_1equipment_1_1entity_1_1Equipment" kindref="compound">Equipment</ref>.<ref refid="enumcom_1_1gmp_1_1equipment_1_1entity_1_1Equipment_1_1OperationalStatus" kindref="compound">OperationalStatus</ref>.<ref refid="enumcom_1_1gmp_1_1equipment_1_1entity_1_1Equipment_1_1OperationalStatus_1a90904f8117506ad1d9544acfdedb02c1" kindref="member">STOPPED</ref>);</highlight></codeline>
<codeline lineno="336"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>assertThat(newEquipment.<ref refid="classcom_1_1gmp_1_1equipment_1_1entity_1_1Equipment_1a222e559ece230b03ed652b831aa8baae" kindref="member">isRunnable</ref>()).isTrue();</highlight></codeline>
<codeline lineno="337"><highlight class="normal"></highlight></codeline>
<codeline lineno="338"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>4.<sp/>进入维护状态</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="339"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>newEquipment.setEquipmentStatus(<ref refid="classcom_1_1gmp_1_1equipment_1_1entity_1_1Equipment" kindref="compound">Equipment</ref>.<ref refid="enumcom_1_1gmp_1_1equipment_1_1entity_1_1Equipment_1_1EquipmentStatus" kindref="compound">EquipmentStatus</ref>.<ref refid="enumcom_1_1gmp_1_1equipment_1_1entity_1_1Equipment_1_1EquipmentStatus_1ad8b1c72ae6cc78c5368ef32e688c3a84" kindref="member">MAINTENANCE</ref>);</highlight></codeline>
<codeline lineno="340"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>assertThat(newEquipment.<ref refid="classcom_1_1gmp_1_1equipment_1_1entity_1_1Equipment_1a222e559ece230b03ed652b831aa8baae" kindref="member">isRunnable</ref>()).isFalse();</highlight></codeline>
<codeline lineno="341"><highlight class="normal"></highlight></codeline>
<codeline lineno="342"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>5.<sp/>最终退役</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="343"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>newEquipment.setEquipmentStatus(<ref refid="classcom_1_1gmp_1_1equipment_1_1entity_1_1Equipment" kindref="compound">Equipment</ref>.<ref refid="enumcom_1_1gmp_1_1equipment_1_1entity_1_1Equipment_1_1EquipmentStatus" kindref="compound">EquipmentStatus</ref>.<ref refid="enumcom_1_1gmp_1_1equipment_1_1entity_1_1Equipment_1_1EquipmentStatus_1a092adca9d35ba850e855e55f7d0a8916" kindref="member">DECOMMISSIONED</ref>);</highlight></codeline>
<codeline lineno="344"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>assertThat(newEquipment.<ref refid="classcom_1_1gmp_1_1equipment_1_1entity_1_1Equipment_1a222e559ece230b03ed652b831aa8baae" kindref="member">isRunnable</ref>()).isFalse();</highlight></codeline>
<codeline lineno="345"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="346"><highlight class="normal">}</highlight></codeline>
    </programlisting>
    <location file="equipment-management/src/test/java/com/gmp/equipment/entity/EquipmentTest.java"/>
  </compounddef>
</doxygen>
