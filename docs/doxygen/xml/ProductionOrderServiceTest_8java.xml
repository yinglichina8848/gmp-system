<?xml version='1.0' encoding='UTF-8' standalone='no'?>
<doxygen xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="compound.xsd" version="1.9.8" xml:lang="en-US">
  <compounddef id="ProductionOrderServiceTest_8java" kind="file" language="Java">
    <compoundname>ProductionOrderServiceTest.java</compoundname>
    <includes local="no">com.gmp.mes.entity.ProductionOrder</includes>
    <incdepgraph>
      <node id="1">
        <label>mes-service/src/test/java/com/gmp/mes/service/ProductionOrderServiceTest.java</label>
        <link refid="ProductionOrderServiceTest_8java"/>
        <childnode refid="2" relation="include">
        </childnode>
      </node>
      <node id="2">
        <label>com.gmp.mes.entity.ProductionOrder</label>
      </node>
    </incdepgraph>
    <innerclass refid="classcom_1_1gmp_1_1mes_1_1service_1_1ProductionOrderServiceTest" prot="package">com::gmp::mes::service::ProductionOrderServiceTest</innerclass>
    <innernamespace refid="namespacecom_1_1gmp_1_1mes_1_1service">com::gmp::mes::service</innernamespace>
    <briefdescription>
    </briefdescription>
    <detaileddescription>
    </detaileddescription>
    <programlisting>
<codeline lineno="1"><highlight class="keyword">package<sp/></highlight><highlight class="normal">com.gmp.mes.service;</highlight></codeline>
<codeline lineno="2"><highlight class="normal"></highlight></codeline>
<codeline lineno="3"><highlight class="normal"></highlight><highlight class="keyword">import</highlight><highlight class="normal"><sp/>com.gmp.mes.entity.ProductionOrder;</highlight></codeline>
<codeline lineno="4"><highlight class="normal"></highlight><highlight class="keyword">import</highlight><highlight class="normal"><sp/>com.gmp.mes.repository.ProductionOrderRepository;</highlight></codeline>
<codeline lineno="5"><highlight class="normal"></highlight><highlight class="keyword">import</highlight><highlight class="normal"><sp/>org.junit.jupiter.api.BeforeEach;</highlight></codeline>
<codeline lineno="6"><highlight class="normal"></highlight><highlight class="keyword">import</highlight><highlight class="normal"><sp/>org.junit.jupiter.api.Test;</highlight></codeline>
<codeline lineno="7"><highlight class="normal"></highlight><highlight class="keyword">import</highlight><highlight class="normal"><sp/>org.mockito.InjectMocks;</highlight></codeline>
<codeline lineno="8"><highlight class="normal"></highlight><highlight class="keyword">import</highlight><highlight class="normal"><sp/>org.mockito.Mock;</highlight></codeline>
<codeline lineno="9"><highlight class="normal"></highlight><highlight class="keyword">import</highlight><highlight class="normal"><sp/>org.mockito.MockitoAnnotations;</highlight></codeline>
<codeline lineno="10"><highlight class="normal"></highlight></codeline>
<codeline lineno="11"><highlight class="normal"></highlight><highlight class="keyword">import</highlight><highlight class="normal"><sp/>java.time.LocalDateTime;</highlight></codeline>
<codeline lineno="12"><highlight class="normal"></highlight><highlight class="keyword">import</highlight><highlight class="normal"><sp/>java.util.*;</highlight></codeline>
<codeline lineno="13"><highlight class="normal"></highlight></codeline>
<codeline lineno="14"><highlight class="normal"></highlight><highlight class="keyword">import</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">static</highlight><highlight class="normal"><sp/>org.junit.jupiter.api.Assertions.*;</highlight></codeline>
<codeline lineno="15"><highlight class="normal"></highlight><highlight class="keyword">import</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">static</highlight><highlight class="normal"><sp/>org.mockito.ArgumentMatchers.any;</highlight></codeline>
<codeline lineno="16"><highlight class="normal"></highlight><highlight class="keyword">import</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">static</highlight><highlight class="normal"><sp/>org.mockito.Mockito.*;</highlight></codeline>
<codeline lineno="17"><highlight class="normal"></highlight></codeline>
<codeline lineno="23" refid="classcom_1_1gmp_1_1mes_1_1service_1_1ProductionOrderServiceTest" refkind="compound"><highlight class="normal"></highlight><highlight class="keyword">class<sp/></highlight><highlight class="normal"><ref refid="classcom_1_1gmp_1_1mes_1_1service_1_1ProductionOrderServiceTest" kindref="compound">ProductionOrderServiceTest</ref><sp/>{</highlight></codeline>
<codeline lineno="24"><highlight class="normal"></highlight></codeline>
<codeline lineno="25"><highlight class="normal"><sp/><sp/><sp/><sp/>@Mock</highlight></codeline>
<codeline lineno="26" refid="classcom_1_1gmp_1_1mes_1_1service_1_1ProductionOrderServiceTest_1a84d82946eb9c5e5335966b87245d5030" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">private</highlight><highlight class="normal"><sp/>ProductionOrderRepository<sp/><ref refid="classcom_1_1gmp_1_1mes_1_1service_1_1ProductionOrderServiceTest_1a84d82946eb9c5e5335966b87245d5030" kindref="member">productionOrderRepository</ref>;</highlight></codeline>
<codeline lineno="27"><highlight class="normal"></highlight></codeline>
<codeline lineno="28"><highlight class="normal"><sp/><sp/><sp/><sp/>@InjectMocks</highlight></codeline>
<codeline lineno="29" refid="classcom_1_1gmp_1_1mes_1_1service_1_1ProductionOrderServiceTest_1a99d41fca2e3cffc7d152b2c303d72c32" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">private</highlight><highlight class="normal"><sp/><ref refid="classcom_1_1gmp_1_1mes_1_1service_1_1ProductionOrderService" kindref="compound">ProductionOrderService</ref><sp/><ref refid="classcom_1_1gmp_1_1mes_1_1service_1_1ProductionOrderServiceTest_1a99d41fca2e3cffc7d152b2c303d72c32" kindref="member">productionOrderService</ref>;</highlight></codeline>
<codeline lineno="30"><highlight class="normal"></highlight></codeline>
<codeline lineno="31" refid="classcom_1_1gmp_1_1mes_1_1service_1_1ProductionOrderServiceTest_1afa77b680a452e62208011a2096837ab0" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">private</highlight><highlight class="normal"><sp/>ProductionOrder<sp/><ref refid="classcom_1_1gmp_1_1mes_1_1service_1_1ProductionOrderServiceTest_1afa77b680a452e62208011a2096837ab0" kindref="member">testOrder</ref>;</highlight></codeline>
<codeline lineno="32"><highlight class="normal"></highlight></codeline>
<codeline lineno="33"><highlight class="normal"><sp/><sp/><sp/><sp/>@BeforeEach</highlight></codeline>
<codeline lineno="34" refid="classcom_1_1gmp_1_1mes_1_1service_1_1ProductionOrderServiceTest_1a63edcfa0d085c3199b533095a9f39214" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="classcom_1_1gmp_1_1mes_1_1service_1_1ProductionOrderServiceTest_1a63edcfa0d085c3199b533095a9f39214" kindref="member">setUp</ref>()<sp/>{</highlight></codeline>
<codeline lineno="35"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>MockitoAnnotations.openMocks(</highlight><highlight class="keyword">this</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="36"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight></codeline>
<codeline lineno="37"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="classcom_1_1gmp_1_1mes_1_1service_1_1ProductionOrderServiceTest_1afa77b680a452e62208011a2096837ab0" kindref="member">testOrder</ref><sp/>=<sp/></highlight><highlight class="keyword">new</highlight><highlight class="normal"><sp/>ProductionOrder();</highlight></codeline>
<codeline lineno="38"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="classcom_1_1gmp_1_1mes_1_1service_1_1ProductionOrderServiceTest_1afa77b680a452e62208011a2096837ab0" kindref="member">testOrder</ref>.setId(1L);</highlight></codeline>
<codeline lineno="39"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="classcom_1_1gmp_1_1mes_1_1service_1_1ProductionOrderServiceTest_1afa77b680a452e62208011a2096837ab0" kindref="member">testOrder</ref>.setOrderNumber(</highlight><highlight class="stringliteral">&quot;ORD-2024-001&quot;</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="40"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="classcom_1_1gmp_1_1mes_1_1service_1_1ProductionOrderServiceTest_1afa77b680a452e62208011a2096837ab0" kindref="member">testOrder</ref>.setProductId(</highlight><highlight class="stringliteral">&quot;PROD-001&quot;</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="41"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="classcom_1_1gmp_1_1mes_1_1service_1_1ProductionOrderServiceTest_1afa77b680a452e62208011a2096837ab0" kindref="member">testOrder</ref>.setProductName(</highlight><highlight class="stringliteral">&quot;Test<sp/>Product&quot;</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="42"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="classcom_1_1gmp_1_1mes_1_1service_1_1ProductionOrderServiceTest_1afa77b680a452e62208011a2096837ab0" kindref="member">testOrder</ref>.setQuantity(100);</highlight></codeline>
<codeline lineno="43"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="classcom_1_1gmp_1_1mes_1_1service_1_1ProductionOrderServiceTest_1afa77b680a452e62208011a2096837ab0" kindref="member">testOrder</ref>.setUnit(</highlight><highlight class="stringliteral">&quot;pcs&quot;</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="44"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="classcom_1_1gmp_1_1mes_1_1service_1_1ProductionOrderServiceTest_1afa77b680a452e62208011a2096837ab0" kindref="member">testOrder</ref>.setPlanStartTime(LocalDateTime.now());</highlight></codeline>
<codeline lineno="45"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="classcom_1_1gmp_1_1mes_1_1service_1_1ProductionOrderServiceTest_1afa77b680a452e62208011a2096837ab0" kindref="member">testOrder</ref>.setPlanEndTime(LocalDateTime.now().plusDays(1));</highlight></codeline>
<codeline lineno="46"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="classcom_1_1gmp_1_1mes_1_1service_1_1ProductionOrderServiceTest_1afa77b680a452e62208011a2096837ab0" kindref="member">testOrder</ref>.setStatus(ProductionOrder.OrderStatus.PENDING);</highlight></codeline>
<codeline lineno="47"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="classcom_1_1gmp_1_1mes_1_1service_1_1ProductionOrderServiceTest_1afa77b680a452e62208011a2096837ab0" kindref="member">testOrder</ref>.setPriority(ProductionOrder.OrderPriority.MEDIUM);</highlight></codeline>
<codeline lineno="48"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="classcom_1_1gmp_1_1mes_1_1service_1_1ProductionOrderServiceTest_1afa77b680a452e62208011a2096837ab0" kindref="member">testOrder</ref>.setApplicant(</highlight><highlight class="stringliteral">&quot;张三&quot;</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="49"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="classcom_1_1gmp_1_1mes_1_1service_1_1ProductionOrderServiceTest_1afa77b680a452e62208011a2096837ab0" kindref="member">testOrder</ref>.setDepartment(</highlight><highlight class="stringliteral">&quot;生产部&quot;</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="50"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="51"><highlight class="normal"></highlight></codeline>
<codeline lineno="52"><highlight class="normal"><sp/><sp/><sp/><sp/>@Test</highlight></codeline>
<codeline lineno="53" refid="classcom_1_1gmp_1_1mes_1_1service_1_1ProductionOrderServiceTest_1a1bfa5ebc0c30aba7de9e6529fed02002" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="classcom_1_1gmp_1_1mes_1_1service_1_1ProductionOrderServiceTest_1a1bfa5ebc0c30aba7de9e6529fed02002" kindref="member">testCreateProductionOrder</ref>()<sp/>{</highlight></codeline>
<codeline lineno="54"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>when(<ref refid="classcom_1_1gmp_1_1mes_1_1service_1_1ProductionOrderServiceTest_1a84d82946eb9c5e5335966b87245d5030" kindref="member">productionOrderRepository</ref>.save(any(ProductionOrder.class))).thenReturn(<ref refid="classcom_1_1gmp_1_1mes_1_1service_1_1ProductionOrderServiceTest_1afa77b680a452e62208011a2096837ab0" kindref="member">testOrder</ref>);</highlight></codeline>
<codeline lineno="55"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight></codeline>
<codeline lineno="56"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ProductionOrder<sp/>createdOrder<sp/>=<sp/><ref refid="classcom_1_1gmp_1_1mes_1_1service_1_1ProductionOrderServiceTest_1a99d41fca2e3cffc7d152b2c303d72c32" kindref="member">productionOrderService</ref>.<ref refid="classcom_1_1gmp_1_1mes_1_1service_1_1ProductionOrderService_1aaffb2bf91475c57563c99834792b9927" kindref="member">createProductionOrder</ref>(<ref refid="classcom_1_1gmp_1_1mes_1_1service_1_1ProductionOrderServiceTest_1afa77b680a452e62208011a2096837ab0" kindref="member">testOrder</ref>);</highlight></codeline>
<codeline lineno="57"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight></codeline>
<codeline lineno="58"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>assertNotNull(createdOrder);</highlight></codeline>
<codeline lineno="59"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>assertEquals(</highlight><highlight class="stringliteral">&quot;ORD-2024-001&quot;</highlight><highlight class="normal">,<sp/>createdOrder.getOrderNumber());</highlight></codeline>
<codeline lineno="60"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>assertEquals(ProductionOrder.OrderStatus.PENDING,<sp/>createdOrder.getStatus());</highlight></codeline>
<codeline lineno="61"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>verify(<ref refid="classcom_1_1gmp_1_1mes_1_1service_1_1ProductionOrderServiceTest_1a84d82946eb9c5e5335966b87245d5030" kindref="member">productionOrderRepository</ref>,<sp/>times(1)).save(<ref refid="classcom_1_1gmp_1_1mes_1_1service_1_1ProductionOrderServiceTest_1afa77b680a452e62208011a2096837ab0" kindref="member">testOrder</ref>);</highlight></codeline>
<codeline lineno="62"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="63"><highlight class="normal"></highlight></codeline>
<codeline lineno="64"><highlight class="normal"><sp/><sp/><sp/><sp/>@Test</highlight></codeline>
<codeline lineno="65" refid="classcom_1_1gmp_1_1mes_1_1service_1_1ProductionOrderServiceTest_1acb2ebdd46f2c84d144a5a16608288200" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="classcom_1_1gmp_1_1mes_1_1service_1_1ProductionOrderServiceTest_1acb2ebdd46f2c84d144a5a16608288200" kindref="member">testGetProductionOrderById</ref>()<sp/>{</highlight></codeline>
<codeline lineno="66"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>when(<ref refid="classcom_1_1gmp_1_1mes_1_1service_1_1ProductionOrderServiceTest_1a84d82946eb9c5e5335966b87245d5030" kindref="member">productionOrderRepository</ref>.findById(1L)).thenReturn(Optional.of(<ref refid="classcom_1_1gmp_1_1mes_1_1service_1_1ProductionOrderServiceTest_1afa77b680a452e62208011a2096837ab0" kindref="member">testOrder</ref>));</highlight></codeline>
<codeline lineno="67"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight></codeline>
<codeline lineno="68"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Optional&lt;ProductionOrder&gt;<sp/>foundOrder<sp/>=<sp/><ref refid="classcom_1_1gmp_1_1mes_1_1service_1_1ProductionOrderServiceTest_1a99d41fca2e3cffc7d152b2c303d72c32" kindref="member">productionOrderService</ref>.<ref refid="classcom_1_1gmp_1_1mes_1_1service_1_1ProductionOrderService_1a15a522691cac698dbc2da42a2e82bfe5" kindref="member">getProductionOrderById</ref>(1L);</highlight></codeline>
<codeline lineno="69"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight></codeline>
<codeline lineno="70"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>assertTrue(foundOrder.isPresent());</highlight></codeline>
<codeline lineno="71"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>assertEquals(</highlight><highlight class="stringliteral">&quot;ORD-2024-001&quot;</highlight><highlight class="normal">,<sp/>foundOrder.get().getOrderNumber());</highlight></codeline>
<codeline lineno="72"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>verify(<ref refid="classcom_1_1gmp_1_1mes_1_1service_1_1ProductionOrderServiceTest_1a84d82946eb9c5e5335966b87245d5030" kindref="member">productionOrderRepository</ref>,<sp/>times(1)).findById(1L);</highlight></codeline>
<codeline lineno="73"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="74"><highlight class="normal"></highlight></codeline>
<codeline lineno="75"><highlight class="normal"><sp/><sp/><sp/><sp/>@Test</highlight></codeline>
<codeline lineno="76" refid="classcom_1_1gmp_1_1mes_1_1service_1_1ProductionOrderServiceTest_1a892b99425a95ca3647b0d8375ccf6ee5" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="classcom_1_1gmp_1_1mes_1_1service_1_1ProductionOrderServiceTest_1a892b99425a95ca3647b0d8375ccf6ee5" kindref="member">testGetProductionOrderByIdNotFound</ref>()<sp/>{</highlight></codeline>
<codeline lineno="77"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>when(<ref refid="classcom_1_1gmp_1_1mes_1_1service_1_1ProductionOrderServiceTest_1a84d82946eb9c5e5335966b87245d5030" kindref="member">productionOrderRepository</ref>.findById(99L)).thenReturn(Optional.empty());</highlight></codeline>
<codeline lineno="78"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight></codeline>
<codeline lineno="79"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Optional&lt;ProductionOrder&gt;<sp/>foundOrder<sp/>=<sp/><ref refid="classcom_1_1gmp_1_1mes_1_1service_1_1ProductionOrderServiceTest_1a99d41fca2e3cffc7d152b2c303d72c32" kindref="member">productionOrderService</ref>.<ref refid="classcom_1_1gmp_1_1mes_1_1service_1_1ProductionOrderService_1a15a522691cac698dbc2da42a2e82bfe5" kindref="member">getProductionOrderById</ref>(99L);</highlight></codeline>
<codeline lineno="80"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight></codeline>
<codeline lineno="81"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>assertFalse(foundOrder.isPresent());</highlight></codeline>
<codeline lineno="82"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>verify(<ref refid="classcom_1_1gmp_1_1mes_1_1service_1_1ProductionOrderServiceTest_1a84d82946eb9c5e5335966b87245d5030" kindref="member">productionOrderRepository</ref>,<sp/>times(1)).findById(99L);</highlight></codeline>
<codeline lineno="83"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="84"><highlight class="normal"></highlight></codeline>
<codeline lineno="85"><highlight class="normal"><sp/><sp/><sp/><sp/>@Test</highlight></codeline>
<codeline lineno="86" refid="classcom_1_1gmp_1_1mes_1_1service_1_1ProductionOrderServiceTest_1af13b35a45414b118cd3529ded02e2e20" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="classcom_1_1gmp_1_1mes_1_1service_1_1ProductionOrderServiceTest_1af13b35a45414b118cd3529ded02e2e20" kindref="member">testGetProductionOrderByOrderNumber</ref>()<sp/>{</highlight></codeline>
<codeline lineno="87"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>when(<ref refid="classcom_1_1gmp_1_1mes_1_1service_1_1ProductionOrderServiceTest_1a84d82946eb9c5e5335966b87245d5030" kindref="member">productionOrderRepository</ref>.findByOrderNumber(</highlight><highlight class="stringliteral">&quot;ORD-2024-001&quot;</highlight><highlight class="normal">)).thenReturn(Optional.of(<ref refid="classcom_1_1gmp_1_1mes_1_1service_1_1ProductionOrderServiceTest_1afa77b680a452e62208011a2096837ab0" kindref="member">testOrder</ref>));</highlight></codeline>
<codeline lineno="88"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight></codeline>
<codeline lineno="89"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Optional&lt;ProductionOrder&gt;<sp/>foundOrder<sp/>=<sp/><ref refid="classcom_1_1gmp_1_1mes_1_1service_1_1ProductionOrderServiceTest_1a99d41fca2e3cffc7d152b2c303d72c32" kindref="member">productionOrderService</ref>.<ref refid="classcom_1_1gmp_1_1mes_1_1service_1_1ProductionOrderService_1a5f6cc0355b2a223e94f470475218dae6" kindref="member">getProductionOrderByOrderNumber</ref>(</highlight><highlight class="stringliteral">&quot;ORD-2024-001&quot;</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="90"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight></codeline>
<codeline lineno="91"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>assertTrue(foundOrder.isPresent());</highlight></codeline>
<codeline lineno="92"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>assertEquals(1L,<sp/>foundOrder.get().getId());</highlight></codeline>
<codeline lineno="93"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>verify(<ref refid="classcom_1_1gmp_1_1mes_1_1service_1_1ProductionOrderServiceTest_1a84d82946eb9c5e5335966b87245d5030" kindref="member">productionOrderRepository</ref>,<sp/>times(1)).findByOrderNumber(</highlight><highlight class="stringliteral">&quot;ORD-2024-001&quot;</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="94"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="95"><highlight class="normal"></highlight></codeline>
<codeline lineno="96"><highlight class="normal"><sp/><sp/><sp/><sp/>@Test</highlight></codeline>
<codeline lineno="97" refid="classcom_1_1gmp_1_1mes_1_1service_1_1ProductionOrderServiceTest_1a8e3fd9fcfb00befc43d8d22fe100af5d" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="classcom_1_1gmp_1_1mes_1_1service_1_1ProductionOrderServiceTest_1a8e3fd9fcfb00befc43d8d22fe100af5d" kindref="member">testGetAllProductionOrders</ref>()<sp/>{</highlight></codeline>
<codeline lineno="98"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>List&lt;ProductionOrder&gt;<sp/>orders<sp/>=<sp/>Arrays.asList(<ref refid="classcom_1_1gmp_1_1mes_1_1service_1_1ProductionOrderServiceTest_1afa77b680a452e62208011a2096837ab0" kindref="member">testOrder</ref>);</highlight></codeline>
<codeline lineno="99"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>when(<ref refid="classcom_1_1gmp_1_1mes_1_1service_1_1ProductionOrderServiceTest_1a84d82946eb9c5e5335966b87245d5030" kindref="member">productionOrderRepository</ref>.findAll()).thenReturn(orders);</highlight></codeline>
<codeline lineno="100"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight></codeline>
<codeline lineno="101"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>List&lt;ProductionOrder&gt;<sp/>allOrders<sp/>=<sp/><ref refid="classcom_1_1gmp_1_1mes_1_1service_1_1ProductionOrderServiceTest_1a99d41fca2e3cffc7d152b2c303d72c32" kindref="member">productionOrderService</ref>.<ref refid="classcom_1_1gmp_1_1mes_1_1service_1_1ProductionOrderService_1a71b21203df1cca3c5a13cd9fd29de98e" kindref="member">getAllProductionOrders</ref>();</highlight></codeline>
<codeline lineno="102"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight></codeline>
<codeline lineno="103"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>assertNotNull(allOrders);</highlight></codeline>
<codeline lineno="104"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>assertEquals(1,<sp/>allOrders.size());</highlight></codeline>
<codeline lineno="105"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>verify(<ref refid="classcom_1_1gmp_1_1mes_1_1service_1_1ProductionOrderServiceTest_1a84d82946eb9c5e5335966b87245d5030" kindref="member">productionOrderRepository</ref>,<sp/>times(1)).findAll();</highlight></codeline>
<codeline lineno="106"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="107"><highlight class="normal"></highlight></codeline>
<codeline lineno="108"><highlight class="normal"><sp/><sp/><sp/><sp/>@Test</highlight></codeline>
<codeline lineno="109" refid="classcom_1_1gmp_1_1mes_1_1service_1_1ProductionOrderServiceTest_1a4b407fef65122013ea2da10cc715c56f" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="classcom_1_1gmp_1_1mes_1_1service_1_1ProductionOrderServiceTest_1a4b407fef65122013ea2da10cc715c56f" kindref="member">testUpdateProductionOrder</ref>()<sp/>{</highlight></codeline>
<codeline lineno="110"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>when(<ref refid="classcom_1_1gmp_1_1mes_1_1service_1_1ProductionOrderServiceTest_1a84d82946eb9c5e5335966b87245d5030" kindref="member">productionOrderRepository</ref>.findById(1L)).thenReturn(Optional.of(<ref refid="classcom_1_1gmp_1_1mes_1_1service_1_1ProductionOrderServiceTest_1afa77b680a452e62208011a2096837ab0" kindref="member">testOrder</ref>));</highlight></codeline>
<codeline lineno="111"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>when(<ref refid="classcom_1_1gmp_1_1mes_1_1service_1_1ProductionOrderServiceTest_1a84d82946eb9c5e5335966b87245d5030" kindref="member">productionOrderRepository</ref>.save(any(ProductionOrder.class))).thenReturn(<ref refid="classcom_1_1gmp_1_1mes_1_1service_1_1ProductionOrderServiceTest_1afa77b680a452e62208011a2096837ab0" kindref="member">testOrder</ref>);</highlight></codeline>
<codeline lineno="112"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight></codeline>
<codeline lineno="113"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="classcom_1_1gmp_1_1mes_1_1service_1_1ProductionOrderServiceTest_1afa77b680a452e62208011a2096837ab0" kindref="member">testOrder</ref>.setQuantity(150);</highlight></codeline>
<codeline lineno="114"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="classcom_1_1gmp_1_1mes_1_1service_1_1ProductionOrderServiceTest_1afa77b680a452e62208011a2096837ab0" kindref="member">testOrder</ref>.setRemark(</highlight><highlight class="stringliteral">&quot;Updated<sp/>remark&quot;</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="115"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight></codeline>
<codeline lineno="116"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ProductionOrder<sp/>updatedOrder<sp/>=<sp/><ref refid="classcom_1_1gmp_1_1mes_1_1service_1_1ProductionOrderServiceTest_1a99d41fca2e3cffc7d152b2c303d72c32" kindref="member">productionOrderService</ref>.<ref refid="classcom_1_1gmp_1_1mes_1_1service_1_1ProductionOrderService_1a456176ea57223105578d6dcc13eb3016" kindref="member">updateProductionOrder</ref>(<ref refid="classcom_1_1gmp_1_1mes_1_1service_1_1ProductionOrderServiceTest_1afa77b680a452e62208011a2096837ab0" kindref="member">testOrder</ref>);</highlight></codeline>
<codeline lineno="117"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight></codeline>
<codeline lineno="118"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>assertNotNull(updatedOrder);</highlight></codeline>
<codeline lineno="119"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>assertEquals(150,<sp/>updatedOrder.getQuantity());</highlight></codeline>
<codeline lineno="120"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>assertEquals(</highlight><highlight class="stringliteral">&quot;Updated<sp/>remark&quot;</highlight><highlight class="normal">,<sp/>updatedOrder.getRemark());</highlight></codeline>
<codeline lineno="121"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>verify(<ref refid="classcom_1_1gmp_1_1mes_1_1service_1_1ProductionOrderServiceTest_1a84d82946eb9c5e5335966b87245d5030" kindref="member">productionOrderRepository</ref>,<sp/>times(1)).save(<ref refid="classcom_1_1gmp_1_1mes_1_1service_1_1ProductionOrderServiceTest_1afa77b680a452e62208011a2096837ab0" kindref="member">testOrder</ref>);</highlight></codeline>
<codeline lineno="122"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="123"><highlight class="normal"></highlight></codeline>
<codeline lineno="124"><highlight class="normal"><sp/><sp/><sp/><sp/>@Test</highlight></codeline>
<codeline lineno="125" refid="classcom_1_1gmp_1_1mes_1_1service_1_1ProductionOrderServiceTest_1a731f20e388251a71752fc2c9f2780b3a" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="classcom_1_1gmp_1_1mes_1_1service_1_1ProductionOrderServiceTest_1a731f20e388251a71752fc2c9f2780b3a" kindref="member">testUpdateProductionOrderNotFound</ref>()<sp/>{</highlight></codeline>
<codeline lineno="126"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>when(<ref refid="classcom_1_1gmp_1_1mes_1_1service_1_1ProductionOrderServiceTest_1a84d82946eb9c5e5335966b87245d5030" kindref="member">productionOrderRepository</ref>.findById(99L)).thenReturn(Optional.empty());</highlight></codeline>
<codeline lineno="127"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight></codeline>
<codeline lineno="128"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="classcom_1_1gmp_1_1mes_1_1service_1_1ProductionOrderServiceTest_1afa77b680a452e62208011a2096837ab0" kindref="member">testOrder</ref>.setId(99L);</highlight></codeline>
<codeline lineno="129"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight></codeline>
<codeline lineno="130"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>assertThrows(<ref refid="classRuntimeException" kindref="compound">RuntimeException</ref>.class,<sp/>()<sp/>-&gt;<sp/>{</highlight></codeline>
<codeline lineno="131"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>productionOrderService.updateProductionOrder(testOrder);</highlight></codeline>
<codeline lineno="132"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>});</highlight></codeline>
<codeline lineno="133"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight></codeline>
<codeline lineno="134"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>verify(<ref refid="classcom_1_1gmp_1_1mes_1_1service_1_1ProductionOrderServiceTest_1a84d82946eb9c5e5335966b87245d5030" kindref="member">productionOrderRepository</ref>,<sp/>times(1)).findById(99L);</highlight></codeline>
<codeline lineno="135"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="136"><highlight class="normal"></highlight></codeline>
<codeline lineno="137"><highlight class="normal"><sp/><sp/><sp/><sp/>@Test</highlight></codeline>
<codeline lineno="138" refid="classcom_1_1gmp_1_1mes_1_1service_1_1ProductionOrderServiceTest_1a1f13fad48b3e3cc49d833cc033048192" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="classcom_1_1gmp_1_1mes_1_1service_1_1ProductionOrderServiceTest_1a1f13fad48b3e3cc49d833cc033048192" kindref="member">testDeleteProductionOrder</ref>()<sp/>{</highlight></codeline>
<codeline lineno="139"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>when(<ref refid="classcom_1_1gmp_1_1mes_1_1service_1_1ProductionOrderServiceTest_1a84d82946eb9c5e5335966b87245d5030" kindref="member">productionOrderRepository</ref>.existsById(1L)).thenReturn(</highlight><highlight class="keyword">true</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="140"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>doNothing().when(<ref refid="classcom_1_1gmp_1_1mes_1_1service_1_1ProductionOrderServiceTest_1a84d82946eb9c5e5335966b87245d5030" kindref="member">productionOrderRepository</ref>).deleteById(1L);</highlight></codeline>
<codeline lineno="141"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight></codeline>
<codeline lineno="142"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="classcom_1_1gmp_1_1mes_1_1service_1_1ProductionOrderServiceTest_1a99d41fca2e3cffc7d152b2c303d72c32" kindref="member">productionOrderService</ref>.<ref refid="classcom_1_1gmp_1_1mes_1_1service_1_1ProductionOrderService_1ae8e5e8efd3e1561d46bd00969e5afe2b" kindref="member">deleteProductionOrder</ref>(1L);</highlight></codeline>
<codeline lineno="143"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight></codeline>
<codeline lineno="144"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>verify(<ref refid="classcom_1_1gmp_1_1mes_1_1service_1_1ProductionOrderServiceTest_1a84d82946eb9c5e5335966b87245d5030" kindref="member">productionOrderRepository</ref>,<sp/>times(1)).existsById(1L);</highlight></codeline>
<codeline lineno="145"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>verify(<ref refid="classcom_1_1gmp_1_1mes_1_1service_1_1ProductionOrderServiceTest_1a84d82946eb9c5e5335966b87245d5030" kindref="member">productionOrderRepository</ref>,<sp/>times(1)).deleteById(1L);</highlight></codeline>
<codeline lineno="146"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="147"><highlight class="normal"></highlight></codeline>
<codeline lineno="148"><highlight class="normal"><sp/><sp/><sp/><sp/>@Test</highlight></codeline>
<codeline lineno="149" refid="classcom_1_1gmp_1_1mes_1_1service_1_1ProductionOrderServiceTest_1a4dd42d4ee0dd7f1d7a20cc4200d0298f" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="classcom_1_1gmp_1_1mes_1_1service_1_1ProductionOrderServiceTest_1a4dd42d4ee0dd7f1d7a20cc4200d0298f" kindref="member">testDeleteProductionOrderNotFound</ref>()<sp/>{</highlight></codeline>
<codeline lineno="150"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>when(<ref refid="classcom_1_1gmp_1_1mes_1_1service_1_1ProductionOrderServiceTest_1a84d82946eb9c5e5335966b87245d5030" kindref="member">productionOrderRepository</ref>.existsById(99L)).thenReturn(</highlight><highlight class="keyword">false</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="151"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight></codeline>
<codeline lineno="152"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>assertThrows(<ref refid="classRuntimeException" kindref="compound">RuntimeException</ref>.class,<sp/>()<sp/>-&gt;<sp/>{</highlight></codeline>
<codeline lineno="153"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>productionOrderService.deleteProductionOrder(99L);</highlight></codeline>
<codeline lineno="154"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>});</highlight></codeline>
<codeline lineno="155"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight></codeline>
<codeline lineno="156"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>verify(<ref refid="classcom_1_1gmp_1_1mes_1_1service_1_1ProductionOrderServiceTest_1a84d82946eb9c5e5335966b87245d5030" kindref="member">productionOrderRepository</ref>,<sp/>times(1)).existsById(99L);</highlight></codeline>
<codeline lineno="157"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="158"><highlight class="normal"></highlight></codeline>
<codeline lineno="159"><highlight class="normal"><sp/><sp/><sp/><sp/>@Test</highlight></codeline>
<codeline lineno="160" refid="classcom_1_1gmp_1_1mes_1_1service_1_1ProductionOrderServiceTest_1affde2d8a59605beff17dd7124810b485" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="classcom_1_1gmp_1_1mes_1_1service_1_1ProductionOrderServiceTest_1affde2d8a59605beff17dd7124810b485" kindref="member">testSubmitProductionOrder</ref>()<sp/>{</highlight></codeline>
<codeline lineno="161"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>when(<ref refid="classcom_1_1gmp_1_1mes_1_1service_1_1ProductionOrderServiceTest_1a84d82946eb9c5e5335966b87245d5030" kindref="member">productionOrderRepository</ref>.findById(1L)).thenReturn(Optional.of(<ref refid="classcom_1_1gmp_1_1mes_1_1service_1_1ProductionOrderServiceTest_1afa77b680a452e62208011a2096837ab0" kindref="member">testOrder</ref>));</highlight></codeline>
<codeline lineno="162"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>when(<ref refid="classcom_1_1gmp_1_1mes_1_1service_1_1ProductionOrderServiceTest_1a84d82946eb9c5e5335966b87245d5030" kindref="member">productionOrderRepository</ref>.save(any(ProductionOrder.class))).thenReturn(<ref refid="classcom_1_1gmp_1_1mes_1_1service_1_1ProductionOrderServiceTest_1afa77b680a452e62208011a2096837ab0" kindref="member">testOrder</ref>);</highlight></codeline>
<codeline lineno="163"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight></codeline>
<codeline lineno="164"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ProductionOrder<sp/>submittedOrder<sp/>=<sp/><ref refid="classcom_1_1gmp_1_1mes_1_1service_1_1ProductionOrderServiceTest_1a99d41fca2e3cffc7d152b2c303d72c32" kindref="member">productionOrderService</ref>.<ref refid="classcom_1_1gmp_1_1mes_1_1service_1_1ProductionOrderService_1ab31c0ba9804f96202a000e61082d478d" kindref="member">submitProductionOrder</ref>(1L);</highlight></codeline>
<codeline lineno="165"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight></codeline>
<codeline lineno="166"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>assertEquals(ProductionOrder.OrderStatus.SUBMITTED,<sp/>submittedOrder.getStatus());</highlight></codeline>
<codeline lineno="167"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>verify(<ref refid="classcom_1_1gmp_1_1mes_1_1service_1_1ProductionOrderServiceTest_1a84d82946eb9c5e5335966b87245d5030" kindref="member">productionOrderRepository</ref>,<sp/>times(1)).save(<ref refid="classcom_1_1gmp_1_1mes_1_1service_1_1ProductionOrderServiceTest_1afa77b680a452e62208011a2096837ab0" kindref="member">testOrder</ref>);</highlight></codeline>
<codeline lineno="168"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="169"><highlight class="normal"></highlight></codeline>
<codeline lineno="170"><highlight class="normal"><sp/><sp/><sp/><sp/>@Test</highlight></codeline>
<codeline lineno="171" refid="classcom_1_1gmp_1_1mes_1_1service_1_1ProductionOrderServiceTest_1a44c06b38edb4af87f23b397d9dbacc07" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="classcom_1_1gmp_1_1mes_1_1service_1_1ProductionOrderServiceTest_1a44c06b38edb4af87f23b397d9dbacc07" kindref="member">testApproveProductionOrder</ref>()<sp/>{</highlight></codeline>
<codeline lineno="172"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="classcom_1_1gmp_1_1mes_1_1service_1_1ProductionOrderServiceTest_1afa77b680a452e62208011a2096837ab0" kindref="member">testOrder</ref>.setStatus(ProductionOrder.OrderStatus.SUBMITTED);</highlight></codeline>
<codeline lineno="173"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>when(<ref refid="classcom_1_1gmp_1_1mes_1_1service_1_1ProductionOrderServiceTest_1a84d82946eb9c5e5335966b87245d5030" kindref="member">productionOrderRepository</ref>.findById(1L)).thenReturn(Optional.of(<ref refid="classcom_1_1gmp_1_1mes_1_1service_1_1ProductionOrderServiceTest_1afa77b680a452e62208011a2096837ab0" kindref="member">testOrder</ref>));</highlight></codeline>
<codeline lineno="174"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>when(<ref refid="classcom_1_1gmp_1_1mes_1_1service_1_1ProductionOrderServiceTest_1a84d82946eb9c5e5335966b87245d5030" kindref="member">productionOrderRepository</ref>.save(any(ProductionOrder.class))).thenReturn(<ref refid="classcom_1_1gmp_1_1mes_1_1service_1_1ProductionOrderServiceTest_1afa77b680a452e62208011a2096837ab0" kindref="member">testOrder</ref>);</highlight></codeline>
<codeline lineno="175"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight></codeline>
<codeline lineno="176"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ProductionOrder<sp/>approvedOrder<sp/>=<sp/><ref refid="classcom_1_1gmp_1_1mes_1_1service_1_1ProductionOrderServiceTest_1a99d41fca2e3cffc7d152b2c303d72c32" kindref="member">productionOrderService</ref>.<ref refid="classcom_1_1gmp_1_1mes_1_1service_1_1ProductionOrderService_1aa171ae65e1d65ecb22a9ff25b6246e3f" kindref="member">approveProductionOrder</ref>(1L,<sp/></highlight><highlight class="stringliteral">&quot;李四&quot;</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="177"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight></codeline>
<codeline lineno="178"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>assertEquals(ProductionOrder.OrderStatus.APPROVED,<sp/>approvedOrder.getStatus());</highlight></codeline>
<codeline lineno="179"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>assertEquals(</highlight><highlight class="stringliteral">&quot;李四&quot;</highlight><highlight class="normal">,<sp/>approvedOrder.getApprover());</highlight></codeline>
<codeline lineno="180"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>verify(<ref refid="classcom_1_1gmp_1_1mes_1_1service_1_1ProductionOrderServiceTest_1a84d82946eb9c5e5335966b87245d5030" kindref="member">productionOrderRepository</ref>,<sp/>times(1)).save(<ref refid="classcom_1_1gmp_1_1mes_1_1service_1_1ProductionOrderServiceTest_1afa77b680a452e62208011a2096837ab0" kindref="member">testOrder</ref>);</highlight></codeline>
<codeline lineno="181"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="182"><highlight class="normal"></highlight></codeline>
<codeline lineno="183"><highlight class="normal"><sp/><sp/><sp/><sp/>@Test</highlight></codeline>
<codeline lineno="184" refid="classcom_1_1gmp_1_1mes_1_1service_1_1ProductionOrderServiceTest_1a4bd254fd26b589de4fd034bb9fcc916f" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="classcom_1_1gmp_1_1mes_1_1service_1_1ProductionOrderServiceTest_1a4bd254fd26b589de4fd034bb9fcc916f" kindref="member">testRejectProductionOrder</ref>()<sp/>{</highlight></codeline>
<codeline lineno="185"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="classcom_1_1gmp_1_1mes_1_1service_1_1ProductionOrderServiceTest_1afa77b680a452e62208011a2096837ab0" kindref="member">testOrder</ref>.setStatus(ProductionOrder.OrderStatus.SUBMITTED);</highlight></codeline>
<codeline lineno="186"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>when(<ref refid="classcom_1_1gmp_1_1mes_1_1service_1_1ProductionOrderServiceTest_1a84d82946eb9c5e5335966b87245d5030" kindref="member">productionOrderRepository</ref>.findById(1L)).thenReturn(Optional.of(<ref refid="classcom_1_1gmp_1_1mes_1_1service_1_1ProductionOrderServiceTest_1afa77b680a452e62208011a2096837ab0" kindref="member">testOrder</ref>));</highlight></codeline>
<codeline lineno="187"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>when(<ref refid="classcom_1_1gmp_1_1mes_1_1service_1_1ProductionOrderServiceTest_1a84d82946eb9c5e5335966b87245d5030" kindref="member">productionOrderRepository</ref>.save(any(ProductionOrder.class))).thenReturn(<ref refid="classcom_1_1gmp_1_1mes_1_1service_1_1ProductionOrderServiceTest_1afa77b680a452e62208011a2096837ab0" kindref="member">testOrder</ref>);</highlight></codeline>
<codeline lineno="188"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight></codeline>
<codeline lineno="189"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ProductionOrder<sp/>rejectedOrder<sp/>=<sp/><ref refid="classcom_1_1gmp_1_1mes_1_1service_1_1ProductionOrderServiceTest_1a99d41fca2e3cffc7d152b2c303d72c32" kindref="member">productionOrderService</ref>.<ref refid="classcom_1_1gmp_1_1mes_1_1service_1_1ProductionOrderService_1ae39fa6a72c7759c39524861766c3c2c3" kindref="member">rejectProductionOrder</ref>(1L,<sp/></highlight><highlight class="stringliteral">&quot;李四&quot;</highlight><highlight class="normal">,<sp/></highlight><highlight class="stringliteral">&quot;理由：库存不足&quot;</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="190"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight></codeline>
<codeline lineno="191"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>assertEquals(ProductionOrder.OrderStatus.REJECTED,<sp/>rejectedOrder.getStatus());</highlight></codeline>
<codeline lineno="192"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>assertEquals(</highlight><highlight class="stringliteral">&quot;李四&quot;</highlight><highlight class="normal">,<sp/>rejectedOrder.getApprover());</highlight></codeline>
<codeline lineno="193"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>assertTrue(rejectedOrder.getRemark().contains(</highlight><highlight class="stringliteral">&quot;理由：库存不足&quot;</highlight><highlight class="normal">));</highlight></codeline>
<codeline lineno="194"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>verify(<ref refid="classcom_1_1gmp_1_1mes_1_1service_1_1ProductionOrderServiceTest_1a84d82946eb9c5e5335966b87245d5030" kindref="member">productionOrderRepository</ref>,<sp/>times(1)).save(<ref refid="classcom_1_1gmp_1_1mes_1_1service_1_1ProductionOrderServiceTest_1afa77b680a452e62208011a2096837ab0" kindref="member">testOrder</ref>);</highlight></codeline>
<codeline lineno="195"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="196"><highlight class="normal"></highlight></codeline>
<codeline lineno="197"><highlight class="normal"><sp/><sp/><sp/><sp/>@Test</highlight></codeline>
<codeline lineno="198" refid="classcom_1_1gmp_1_1mes_1_1service_1_1ProductionOrderServiceTest_1a67d82eab0084c97da2ac0a54cbbd634b" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="classcom_1_1gmp_1_1mes_1_1service_1_1ProductionOrderServiceTest_1a67d82eab0084c97da2ac0a54cbbd634b" kindref="member">testCancelProductionOrder</ref>()<sp/>{</highlight></codeline>
<codeline lineno="199"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="classcom_1_1gmp_1_1mes_1_1service_1_1ProductionOrderServiceTest_1afa77b680a452e62208011a2096837ab0" kindref="member">testOrder</ref>.setStatus(ProductionOrder.OrderStatus.APPROVED);</highlight></codeline>
<codeline lineno="200"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>when(<ref refid="classcom_1_1gmp_1_1mes_1_1service_1_1ProductionOrderServiceTest_1a84d82946eb9c5e5335966b87245d5030" kindref="member">productionOrderRepository</ref>.findById(1L)).thenReturn(Optional.of(<ref refid="classcom_1_1gmp_1_1mes_1_1service_1_1ProductionOrderServiceTest_1afa77b680a452e62208011a2096837ab0" kindref="member">testOrder</ref>));</highlight></codeline>
<codeline lineno="201"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>when(<ref refid="classcom_1_1gmp_1_1mes_1_1service_1_1ProductionOrderServiceTest_1a84d82946eb9c5e5335966b87245d5030" kindref="member">productionOrderRepository</ref>.save(any(ProductionOrder.class))).thenReturn(<ref refid="classcom_1_1gmp_1_1mes_1_1service_1_1ProductionOrderServiceTest_1afa77b680a452e62208011a2096837ab0" kindref="member">testOrder</ref>);</highlight></codeline>
<codeline lineno="202"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight></codeline>
<codeline lineno="203"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ProductionOrder<sp/>cancelledOrder<sp/>=<sp/><ref refid="classcom_1_1gmp_1_1mes_1_1service_1_1ProductionOrderServiceTest_1a99d41fca2e3cffc7d152b2c303d72c32" kindref="member">productionOrderService</ref>.<ref refid="classcom_1_1gmp_1_1mes_1_1service_1_1ProductionOrderService_1a5df32c82ae2d90935959fd351d61e1e8" kindref="member">cancelProductionOrder</ref>(1L,<sp/></highlight><highlight class="stringliteral">&quot;取消原因：计划变更&quot;</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="204"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight></codeline>
<codeline lineno="205"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>assertEquals(ProductionOrder.OrderStatus.CANCELLED,<sp/>cancelledOrder.getStatus());</highlight></codeline>
<codeline lineno="206"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>assertTrue(cancelledOrder.getRemark().contains(</highlight><highlight class="stringliteral">&quot;取消原因：计划变更&quot;</highlight><highlight class="normal">));</highlight></codeline>
<codeline lineno="207"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>verify(<ref refid="classcom_1_1gmp_1_1mes_1_1service_1_1ProductionOrderServiceTest_1a84d82946eb9c5e5335966b87245d5030" kindref="member">productionOrderRepository</ref>,<sp/>times(1)).save(<ref refid="classcom_1_1gmp_1_1mes_1_1service_1_1ProductionOrderServiceTest_1afa77b680a452e62208011a2096837ab0" kindref="member">testOrder</ref>);</highlight></codeline>
<codeline lineno="208"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="209"><highlight class="normal"></highlight></codeline>
<codeline lineno="210"><highlight class="normal"><sp/><sp/><sp/><sp/>@Test</highlight></codeline>
<codeline lineno="211" refid="classcom_1_1gmp_1_1mes_1_1service_1_1ProductionOrderServiceTest_1a354682bcaa7823f7708801a4c4713693" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="classcom_1_1gmp_1_1mes_1_1service_1_1ProductionOrderServiceTest_1a354682bcaa7823f7708801a4c4713693" kindref="member">testFindProductionOrdersByStatus</ref>()<sp/>{</highlight></codeline>
<codeline lineno="212"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>List&lt;ProductionOrder&gt;<sp/>orders<sp/>=<sp/>Arrays.asList(<ref refid="classcom_1_1gmp_1_1mes_1_1service_1_1ProductionOrderServiceTest_1afa77b680a452e62208011a2096837ab0" kindref="member">testOrder</ref>);</highlight></codeline>
<codeline lineno="213"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>when(<ref refid="classcom_1_1gmp_1_1mes_1_1service_1_1ProductionOrderServiceTest_1a84d82946eb9c5e5335966b87245d5030" kindref="member">productionOrderRepository</ref>.findByStatus(ProductionOrder.OrderStatus.PENDING)).thenReturn(orders);</highlight></codeline>
<codeline lineno="214"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight></codeline>
<codeline lineno="215"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>List&lt;ProductionOrder&gt;<sp/>foundOrders<sp/>=<sp/><ref refid="classcom_1_1gmp_1_1mes_1_1service_1_1ProductionOrderServiceTest_1a99d41fca2e3cffc7d152b2c303d72c32" kindref="member">productionOrderService</ref>.findProductionOrdersByStatus(ProductionOrder.OrderStatus.PENDING);</highlight></codeline>
<codeline lineno="216"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight></codeline>
<codeline lineno="217"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>assertNotNull(foundOrders);</highlight></codeline>
<codeline lineno="218"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>assertEquals(1,<sp/>foundOrders.size());</highlight></codeline>
<codeline lineno="219"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>verify(<ref refid="classcom_1_1gmp_1_1mes_1_1service_1_1ProductionOrderServiceTest_1a84d82946eb9c5e5335966b87245d5030" kindref="member">productionOrderRepository</ref>,<sp/>times(1)).findByStatus(ProductionOrder.OrderStatus.PENDING);</highlight></codeline>
<codeline lineno="220"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="221"><highlight class="normal"></highlight></codeline>
<codeline lineno="222"><highlight class="normal"><sp/><sp/><sp/><sp/>@Test</highlight></codeline>
<codeline lineno="223" refid="classcom_1_1gmp_1_1mes_1_1service_1_1ProductionOrderServiceTest_1a707b2073cb408032be88fd0c20b98f14" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="classcom_1_1gmp_1_1mes_1_1service_1_1ProductionOrderServiceTest_1a707b2073cb408032be88fd0c20b98f14" kindref="member">testGenerateOrderNumber</ref>()<sp/>{</highlight></codeline>
<codeline lineno="224"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>String<sp/>orderNumber<sp/>=<sp/><ref refid="classcom_1_1gmp_1_1mes_1_1service_1_1ProductionOrderServiceTest_1a99d41fca2e3cffc7d152b2c303d72c32" kindref="member">productionOrderService</ref>.<ref refid="classcom_1_1gmp_1_1mes_1_1service_1_1ProductionOrderService_1a1adf7453af9b106cec2f7f8eba476f98" kindref="member">generateOrderNumber</ref>();</highlight></codeline>
<codeline lineno="225"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight></codeline>
<codeline lineno="226"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>assertNotNull(orderNumber);</highlight></codeline>
<codeline lineno="227"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>assertTrue(orderNumber.startsWith(</highlight><highlight class="stringliteral">&quot;ORD-&quot;</highlight><highlight class="normal">));</highlight></codeline>
<codeline lineno="228"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>assertTrue(orderNumber.length()<sp/>&gt;<sp/>10);</highlight></codeline>
<codeline lineno="229"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="230"><highlight class="normal">}</highlight></codeline>
    </programlisting>
    <location file="mes-service/src/test/java/com/gmp/mes/service/ProductionOrderServiceTest.java"/>
  </compounddef>
</doxygen>
