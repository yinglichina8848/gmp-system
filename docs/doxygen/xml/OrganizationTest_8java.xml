<?xml version='1.0' encoding='UTF-8' standalone='no'?>
<doxygen xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="compound.xsd" version="1.9.8" xml:lang="en-US">
  <compounddef id="OrganizationTest_8java" kind="file" language="Java">
    <compoundname>OrganizationTest.java</compoundname>
    <includes local="no">org.junit.jupiter.api.Test</includes>
    <incdepgraph>
      <node id="1">
        <label>auth-service/src/test/java/com/gmp/auth/entity/OrganizationTest.java</label>
        <link refid="OrganizationTest_8java"/>
        <childnode refid="2" relation="include">
        </childnode>
      </node>
      <node id="2">
        <label>org.junit.jupiter.api.Test</label>
      </node>
    </incdepgraph>
    <innerclass refid="classcom_1_1gmp_1_1auth_1_1entity_1_1OrganizationTest" prot="package">com::gmp::auth::entity::OrganizationTest</innerclass>
    <innernamespace refid="namespacecom_1_1gmp_1_1auth_1_1entity">com::gmp::auth::entity</innernamespace>
    <briefdescription>
    </briefdescription>
    <detaileddescription>
    </detaileddescription>
    <programlisting>
<codeline lineno="1"><highlight class="keyword">package<sp/></highlight><highlight class="normal">com.gmp.auth.entity;</highlight></codeline>
<codeline lineno="2"><highlight class="normal"></highlight></codeline>
<codeline lineno="3"><highlight class="normal"></highlight><highlight class="keyword">import</highlight><highlight class="normal"><sp/>org.junit.jupiter.api.Test;</highlight></codeline>
<codeline lineno="4"><highlight class="normal"></highlight><highlight class="keyword">import</highlight><highlight class="normal"><sp/>org.springframework.test.context.ActiveProfiles;</highlight></codeline>
<codeline lineno="5"><highlight class="normal"></highlight></codeline>
<codeline lineno="6"><highlight class="normal"></highlight><highlight class="keyword">import</highlight><highlight class="normal"><sp/>java.time.LocalDateTime;</highlight></codeline>
<codeline lineno="7"><highlight class="normal"></highlight></codeline>
<codeline lineno="8"><highlight class="normal"></highlight><highlight class="keyword">import</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">static</highlight><highlight class="normal"><sp/>org.assertj.core.api.Assertions.assertThat;</highlight></codeline>
<codeline lineno="9"><highlight class="normal"></highlight></codeline>
<codeline lineno="24"><highlight class="normal">@ActiveProfiles(</highlight><highlight class="stringliteral">&quot;test&quot;</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="25" refid="classcom_1_1gmp_1_1auth_1_1entity_1_1OrganizationTest" refkind="compound"><highlight class="normal">class<sp/><ref refid="classcom_1_1gmp_1_1auth_1_1entity_1_1OrganizationTest" kindref="compound">OrganizationTest</ref><sp/>{</highlight></codeline>
<codeline lineno="26"><highlight class="normal"></highlight></codeline>
<codeline lineno="27"><highlight class="normal"><sp/><sp/><sp/><sp/>@Test</highlight></codeline>
<codeline lineno="28" refid="classcom_1_1gmp_1_1auth_1_1entity_1_1OrganizationTest_1aaa370cae04b588906260587e99c582bd" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="classcom_1_1gmp_1_1auth_1_1entity_1_1OrganizationTest_1aaa370cae04b588906260587e99c582bd" kindref="member">testOrganizationCreation</ref>()<sp/>{</highlight></codeline>
<codeline lineno="29"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Given:<sp/>创建一个完整的组织实例</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="30"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="classcom_1_1gmp_1_1auth_1_1entity_1_1Organization" kindref="compound">Organization</ref><sp/>org<sp/>=<sp/><ref refid="classcom_1_1gmp_1_1auth_1_1entity_1_1Organization" kindref="compound">Organization</ref>.builder()</highlight></codeline>
<codeline lineno="31"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>.<ref refid="classcom_1_1gmp_1_1auth_1_1entity_1_1Organization_1a666a840c32f6dee3b29cde95583eb394" kindref="member">orgCode</ref>(</highlight><highlight class="stringliteral">&quot;ORG_DEPT&quot;</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="32"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>.orgName(</highlight><highlight class="stringliteral">&quot;部门管理组织&quot;</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="33"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>.orgType(<ref refid="classcom_1_1gmp_1_1auth_1_1entity_1_1Organization" kindref="compound">Organization</ref>.<ref refid="enumcom_1_1gmp_1_1auth_1_1entity_1_1Organization_1_1OrganizationType" kindref="compound">OrganizationType</ref>.<ref refid="enumcom_1_1gmp_1_1auth_1_1entity_1_1Organization_1_1OrganizationType_1a816deea8a7913d90eca0382f8fc29cc4" kindref="member">DEPARTMENT</ref>)</highlight></codeline>
<codeline lineno="34"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>.description(</highlight><highlight class="stringliteral">&quot;负责企业部门管理&quot;</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="35"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>.manager(</highlight><highlight class="stringliteral">&quot;张经理&quot;</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="36"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>.gmpRelevant(</highlight><highlight class="keyword">false</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="37"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>.orgStatus(<ref refid="classcom_1_1gmp_1_1auth_1_1entity_1_1Organization" kindref="compound">Organization</ref>.<ref refid="enumcom_1_1gmp_1_1auth_1_1entity_1_1Organization_1_1OrganizationStatus" kindref="compound">OrganizationStatus</ref>.<ref refid="enumcom_1_1gmp_1_1auth_1_1entity_1_1Organization_1_1OrganizationStatus_1a9d280902b2fe9f1d8a67318e3e5a3990" kindref="member">ACTIVE</ref>)</highlight></codeline>
<codeline lineno="38"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>.hierarchyLevel(1)</highlight></codeline>
<codeline lineno="39"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>.build();</highlight></codeline>
<codeline lineno="40"><highlight class="normal"></highlight></codeline>
<codeline lineno="41"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>When<sp/>&amp;<sp/>Then:<sp/>验证组织基本信息正确创建</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="42"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>assertThat(org.getOrgCode()).isEqualTo(</highlight><highlight class="stringliteral">&quot;ORG_DEPT&quot;</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="43"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>assertThat(org.getOrgName()).isEqualTo(</highlight><highlight class="stringliteral">&quot;部门管理组织&quot;</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="44"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>assertThat(org.getOrgType()).isEqualTo(<ref refid="classcom_1_1gmp_1_1auth_1_1entity_1_1Organization" kindref="compound">Organization</ref>.<ref refid="enumcom_1_1gmp_1_1auth_1_1entity_1_1Organization_1_1OrganizationType" kindref="compound">OrganizationType</ref>.<ref refid="enumcom_1_1gmp_1_1auth_1_1entity_1_1Organization_1_1OrganizationType_1a816deea8a7913d90eca0382f8fc29cc4" kindref="member">DEPARTMENT</ref>);</highlight></codeline>
<codeline lineno="45"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>assertThat(org.getManager()).isEqualTo(</highlight><highlight class="stringliteral">&quot;张经理&quot;</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="46"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>assertThat(org.getGmpRelevant()).isFalse();</highlight></codeline>
<codeline lineno="47"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>assertThat(org.<ref refid="classcom_1_1gmp_1_1auth_1_1entity_1_1Organization_1a741dc1c5bc6b30aa5f15a979768007b7" kindref="member">isActive</ref>()).isTrue();</highlight></codeline>
<codeline lineno="48"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="49"><highlight class="normal"></highlight></codeline>
<codeline lineno="50"><highlight class="normal"><sp/><sp/><sp/><sp/>@Test</highlight></codeline>
<codeline lineno="51" refid="classcom_1_1gmp_1_1auth_1_1entity_1_1OrganizationTest_1a5e50665c2cb4392d226bc3588ebfc35f" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="classcom_1_1gmp_1_1auth_1_1entity_1_1OrganizationTest_1a5e50665c2cb4392d226bc3588ebfc35f" kindref="member">testOrganizationTypeEnum</ref>()<sp/>{</highlight></codeline>
<codeline lineno="52"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Test<sp/>DEPARTMENT类型</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="53"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>assertThat(<ref refid="classcom_1_1gmp_1_1auth_1_1entity_1_1Organization" kindref="compound">Organization</ref>.<ref refid="enumcom_1_1gmp_1_1auth_1_1entity_1_1Organization_1_1OrganizationType" kindref="compound">OrganizationType</ref>.<ref refid="enumcom_1_1gmp_1_1auth_1_1entity_1_1Organization_1_1OrganizationType_1a816deea8a7913d90eca0382f8fc29cc4" kindref="member">DEPARTMENT</ref>.getDescription()).isEqualTo(</highlight><highlight class="stringliteral">&quot;部门管理&quot;</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="54"><highlight class="normal"></highlight></codeline>
<codeline lineno="55"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Test<sp/>PRODUCTION类型</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="56"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>assertThat(<ref refid="classcom_1_1gmp_1_1auth_1_1entity_1_1Organization" kindref="compound">Organization</ref>.<ref refid="enumcom_1_1gmp_1_1auth_1_1entity_1_1Organization_1_1OrganizationType" kindref="compound">OrganizationType</ref>.<ref refid="enumcom_1_1gmp_1_1auth_1_1entity_1_1Organization_1_1OrganizationType_1a1e6456f08828215c9d70e2cacb37f8d2" kindref="member">PRODUCTION</ref>.getDescription()).isEqualTo(</highlight><highlight class="stringliteral">&quot;生产管理&quot;</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="57"><highlight class="normal"></highlight></codeline>
<codeline lineno="58"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Test<sp/>QUALITY类型<sp/>(GMP相关)</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="59"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>assertThat(<ref refid="classcom_1_1gmp_1_1auth_1_1entity_1_1Organization" kindref="compound">Organization</ref>.<ref refid="enumcom_1_1gmp_1_1auth_1_1entity_1_1Organization_1_1OrganizationType" kindref="compound">OrganizationType</ref>.<ref refid="enumcom_1_1gmp_1_1auth_1_1entity_1_1Organization_1_1OrganizationType_1a8994375c9c169aebfee3e2b4dbdbd81d" kindref="member">QUALITY</ref>.getDescription()).isEqualTo(</highlight><highlight class="stringliteral">&quot;质量管理&quot;</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="60"><highlight class="normal"></highlight></codeline>
<codeline lineno="61"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>验证所有枚举值都有描述</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="62"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>(<ref refid="classcom_1_1gmp_1_1auth_1_1entity_1_1Organization" kindref="compound">Organization</ref>.<ref refid="enumcom_1_1gmp_1_1auth_1_1entity_1_1Organization_1_1OrganizationType" kindref="compound">OrganizationType</ref><sp/>type<sp/>:<sp/><ref refid="classcom_1_1gmp_1_1auth_1_1entity_1_1Organization" kindref="compound">Organization</ref>.<ref refid="enumcom_1_1gmp_1_1auth_1_1entity_1_1Organization_1_1OrganizationType" kindref="compound">OrganizationType</ref>.values())<sp/>{</highlight></codeline>
<codeline lineno="63"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>assertThat(type.getDescription()).isNotNull();</highlight></codeline>
<codeline lineno="64"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>assertThat(type.getDescription()).isNotEmpty();</highlight></codeline>
<codeline lineno="65"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="66"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="67"><highlight class="normal"></highlight></codeline>
<codeline lineno="68"><highlight class="normal"><sp/><sp/><sp/><sp/>@Test</highlight></codeline>
<codeline lineno="69" refid="classcom_1_1gmp_1_1auth_1_1entity_1_1OrganizationTest_1a09f266ce27221cb35cf6d9269514f374" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="classcom_1_1gmp_1_1auth_1_1entity_1_1OrganizationTest_1a09f266ce27221cb35cf6d9269514f374" kindref="member">testOrganizationStatusEnum</ref>()<sp/>{</highlight></codeline>
<codeline lineno="70"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Test<sp/>ACTIVE状态</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="71"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>assertThat(<ref refid="classcom_1_1gmp_1_1auth_1_1entity_1_1Organization" kindref="compound">Organization</ref>.<ref refid="enumcom_1_1gmp_1_1auth_1_1entity_1_1Organization_1_1OrganizationStatus" kindref="compound">OrganizationStatus</ref>.<ref refid="enumcom_1_1gmp_1_1auth_1_1entity_1_1Organization_1_1OrganizationStatus_1a9d280902b2fe9f1d8a67318e3e5a3990" kindref="member">ACTIVE</ref>.getDescription()).isEqualTo(</highlight><highlight class="stringliteral">&quot;正常运行&quot;</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="72"><highlight class="normal"></highlight></codeline>
<codeline lineno="73"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Test<sp/>ARCHIVED状态</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="74"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>assertThat(<ref refid="classcom_1_1gmp_1_1auth_1_1entity_1_1Organization" kindref="compound">Organization</ref>.<ref refid="enumcom_1_1gmp_1_1auth_1_1entity_1_1Organization_1_1OrganizationStatus" kindref="compound">OrganizationStatus</ref>.<ref refid="enumcom_1_1gmp_1_1auth_1_1entity_1_1Organization_1_1OrganizationStatus_1aa5863db65e2fea78ea7d9adb7a01f22e" kindref="member">ARCHIVED</ref>.getDescription()).isEqualTo(</highlight><highlight class="stringliteral">&quot;已归档&quot;</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="75"><highlight class="normal"></highlight></codeline>
<codeline lineno="76"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>验证所有状态都有描述</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="77"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>(<ref refid="classcom_1_1gmp_1_1auth_1_1entity_1_1Organization" kindref="compound">Organization</ref>.<ref refid="enumcom_1_1gmp_1_1auth_1_1entity_1_1Organization_1_1OrganizationStatus" kindref="compound">OrganizationStatus</ref><sp/>status<sp/>:<sp/><ref refid="classcom_1_1gmp_1_1auth_1_1entity_1_1Organization" kindref="compound">Organization</ref>.<ref refid="enumcom_1_1gmp_1_1auth_1_1entity_1_1Organization_1_1OrganizationStatus" kindref="compound">OrganizationStatus</ref>.values())<sp/>{</highlight></codeline>
<codeline lineno="78"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>assertThat(status.getDescription()).isNotNull();</highlight></codeline>
<codeline lineno="79"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>assertThat(status.getDescription()).isNotEmpty();</highlight></codeline>
<codeline lineno="80"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="81"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="82"><highlight class="normal"></highlight></codeline>
<codeline lineno="83"><highlight class="normal"><sp/><sp/><sp/><sp/>@Test</highlight></codeline>
<codeline lineno="84" refid="classcom_1_1gmp_1_1auth_1_1entity_1_1OrganizationTest_1a8d1f545b9f202723278d2bd200700e8e" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="classcom_1_1gmp_1_1auth_1_1entity_1_1OrganizationTest_1a8d1f545b9f202723278d2bd200700e8e" kindref="member">testIsActive</ref>()<sp/>{</highlight></codeline>
<codeline lineno="85"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Given:<sp/>不同状态的组织</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="86"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="classcom_1_1gmp_1_1auth_1_1entity_1_1Organization" kindref="compound">Organization</ref><sp/>activeOrg<sp/>=<sp/><ref refid="classcom_1_1gmp_1_1auth_1_1entity_1_1Organization" kindref="compound">Organization</ref>.builder()</highlight></codeline>
<codeline lineno="87"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>.<ref refid="classcom_1_1gmp_1_1auth_1_1entity_1_1Organization_1aab9f3954addcc83a4360bf503664c8f5" kindref="member">orgStatus</ref>(<ref refid="classcom_1_1gmp_1_1auth_1_1entity_1_1Organization" kindref="compound">Organization</ref>.<ref refid="enumcom_1_1gmp_1_1auth_1_1entity_1_1Organization_1_1OrganizationStatus" kindref="compound">OrganizationStatus</ref>.<ref refid="enumcom_1_1gmp_1_1auth_1_1entity_1_1Organization_1_1OrganizationStatus_1a9d280902b2fe9f1d8a67318e3e5a3990" kindref="member">ACTIVE</ref>)</highlight></codeline>
<codeline lineno="88"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>.build();</highlight></codeline>
<codeline lineno="89"><highlight class="normal"></highlight></codeline>
<codeline lineno="90"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="classcom_1_1gmp_1_1auth_1_1entity_1_1Organization" kindref="compound">Organization</ref><sp/>inactiveOrg<sp/>=<sp/><ref refid="classcom_1_1gmp_1_1auth_1_1entity_1_1Organization" kindref="compound">Organization</ref>.builder()</highlight></codeline>
<codeline lineno="91"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>.<ref refid="classcom_1_1gmp_1_1auth_1_1entity_1_1Organization_1aab9f3954addcc83a4360bf503664c8f5" kindref="member">orgStatus</ref>(<ref refid="classcom_1_1gmp_1_1auth_1_1entity_1_1Organization" kindref="compound">Organization</ref>.<ref refid="enumcom_1_1gmp_1_1auth_1_1entity_1_1Organization_1_1OrganizationStatus" kindref="compound">OrganizationStatus</ref>.<ref refid="enumcom_1_1gmp_1_1auth_1_1entity_1_1Organization_1_1OrganizationStatus_1aad61a2fb4a37ef1678945eb275e1ae29" kindref="member">INACTIVE</ref>)</highlight></codeline>
<codeline lineno="92"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>.build();</highlight></codeline>
<codeline lineno="93"><highlight class="normal"></highlight></codeline>
<codeline lineno="94"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="classcom_1_1gmp_1_1auth_1_1entity_1_1Organization" kindref="compound">Organization</ref><sp/>archivedOrg<sp/>=<sp/><ref refid="classcom_1_1gmp_1_1auth_1_1entity_1_1Organization" kindref="compound">Organization</ref>.builder()</highlight></codeline>
<codeline lineno="95"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>.<ref refid="classcom_1_1gmp_1_1auth_1_1entity_1_1Organization_1aab9f3954addcc83a4360bf503664c8f5" kindref="member">orgStatus</ref>(<ref refid="classcom_1_1gmp_1_1auth_1_1entity_1_1Organization" kindref="compound">Organization</ref>.<ref refid="enumcom_1_1gmp_1_1auth_1_1entity_1_1Organization_1_1OrganizationStatus" kindref="compound">OrganizationStatus</ref>.<ref refid="enumcom_1_1gmp_1_1auth_1_1entity_1_1Organization_1_1OrganizationStatus_1aa5863db65e2fea78ea7d9adb7a01f22e" kindref="member">ARCHIVED</ref>)</highlight></codeline>
<codeline lineno="96"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>.build();</highlight></codeline>
<codeline lineno="97"><highlight class="normal"></highlight></codeline>
<codeline lineno="98"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Then:<sp/>验证状态判断</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="99"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>assertThat(activeOrg.<ref refid="classcom_1_1gmp_1_1auth_1_1entity_1_1Organization_1a741dc1c5bc6b30aa5f15a979768007b7" kindref="member">isActive</ref>()).isTrue();</highlight></codeline>
<codeline lineno="100"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>assertThat(inactiveOrg.<ref refid="classcom_1_1gmp_1_1auth_1_1entity_1_1Organization_1a741dc1c5bc6b30aa5f15a979768007b7" kindref="member">isActive</ref>()).isFalse();</highlight></codeline>
<codeline lineno="101"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>assertThat(archivedOrg.<ref refid="classcom_1_1gmp_1_1auth_1_1entity_1_1Organization_1a741dc1c5bc6b30aa5f15a979768007b7" kindref="member">isActive</ref>()).isFalse();</highlight></codeline>
<codeline lineno="102"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="103"><highlight class="normal"></highlight></codeline>
<codeline lineno="104"><highlight class="normal"><sp/><sp/><sp/><sp/>@Test</highlight></codeline>
<codeline lineno="105" refid="classcom_1_1gmp_1_1auth_1_1entity_1_1OrganizationTest_1a611d317695ae699f059d7cb1e0a36073" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="classcom_1_1gmp_1_1auth_1_1entity_1_1OrganizationTest_1a611d317695ae699f059d7cb1e0a36073" kindref="member">testGetFullPathWithParent</ref>()<sp/>{</highlight></codeline>
<codeline lineno="106"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Given:<sp/>创建父子组织关系</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="107"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="classcom_1_1gmp_1_1auth_1_1entity_1_1Organization" kindref="compound">Organization</ref><sp/>parentOrg<sp/>=<sp/><ref refid="classcom_1_1gmp_1_1auth_1_1entity_1_1Organization" kindref="compound">Organization</ref>.builder()</highlight></codeline>
<codeline lineno="108"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>.<ref refid="classcom_1_1gmp_1_1auth_1_1entity_1_1Organization_1a5a0a379668e59b325f92f14626ef8613" kindref="member">orgName</ref>(</highlight><highlight class="stringliteral">&quot;生产中心&quot;</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="109"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>.build();</highlight></codeline>
<codeline lineno="110"><highlight class="normal"></highlight></codeline>
<codeline lineno="111"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="classcom_1_1gmp_1_1auth_1_1entity_1_1Organization" kindref="compound">Organization</ref><sp/>childOrg<sp/>=<sp/><ref refid="classcom_1_1gmp_1_1auth_1_1entity_1_1Organization" kindref="compound">Organization</ref>.builder()</highlight></codeline>
<codeline lineno="112"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>.<ref refid="classcom_1_1gmp_1_1auth_1_1entity_1_1Organization_1a5a0a379668e59b325f92f14626ef8613" kindref="member">orgName</ref>(</highlight><highlight class="stringliteral">&quot;A车间&quot;</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="113"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>.parent(parentOrg)</highlight></codeline>
<codeline lineno="114"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>.build();</highlight></codeline>
<codeline lineno="115"><highlight class="normal"></highlight></codeline>
<codeline lineno="116"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Then:<sp/>验证完整路径计算</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="117"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>assertThat(parentOrg.<ref refid="classcom_1_1gmp_1_1auth_1_1entity_1_1Organization_1ae9fedbfac48c1705afaba411bf550f7f" kindref="member">getFullPath</ref>()).isEqualTo(</highlight><highlight class="stringliteral">&quot;生产中心&quot;</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="118"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>assertThat(childOrg.<ref refid="classcom_1_1gmp_1_1auth_1_1entity_1_1Organization_1ae9fedbfac48c1705afaba411bf550f7f" kindref="member">getFullPath</ref>()).isEqualTo(</highlight><highlight class="stringliteral">&quot;生产中心<sp/>&gt;<sp/>A车间&quot;</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="119"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="120"><highlight class="normal"></highlight></codeline>
<codeline lineno="121"><highlight class="normal"><sp/><sp/><sp/><sp/>@Test</highlight></codeline>
<codeline lineno="122" refid="classcom_1_1gmp_1_1auth_1_1entity_1_1OrganizationTest_1abd84aac8f9071da1f4703669f3667262" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="classcom_1_1gmp_1_1auth_1_1entity_1_1OrganizationTest_1abd84aac8f9071da1f4703669f3667262" kindref="member">testGetFullPathWithoutParent</ref>()<sp/>{</highlight></codeline>
<codeline lineno="123"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Given:<sp/>创建顶级组织</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="124"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="classcom_1_1gmp_1_1auth_1_1entity_1_1Organization" kindref="compound">Organization</ref><sp/>rootOrg<sp/>=<sp/><ref refid="classcom_1_1gmp_1_1auth_1_1entity_1_1Organization" kindref="compound">Organization</ref>.builder()</highlight></codeline>
<codeline lineno="125"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>.<ref refid="classcom_1_1gmp_1_1auth_1_1entity_1_1Organization_1a5a0a379668e59b325f92f14626ef8613" kindref="member">orgName</ref>(</highlight><highlight class="stringliteral">&quot;GMP信息系统&quot;</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="126"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>.build();</highlight></codeline>
<codeline lineno="127"><highlight class="normal"></highlight></codeline>
<codeline lineno="128"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Then:<sp/>验证根组织的完整路径</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="129"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>assertThat(rootOrg.<ref refid="classcom_1_1gmp_1_1auth_1_1entity_1_1Organization_1ae9fedbfac48c1705afaba411bf550f7f" kindref="member">getFullPath</ref>()).isEqualTo(</highlight><highlight class="stringliteral">&quot;GMP信息系统&quot;</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="130"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="131"><highlight class="normal"></highlight></codeline>
<codeline lineno="132"><highlight class="normal"><sp/><sp/><sp/><sp/>@Test</highlight></codeline>
<codeline lineno="133" refid="classcom_1_1gmp_1_1auth_1_1entity_1_1OrganizationTest_1a9503bafc1fd7a05c78153f9a927ee925" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="classcom_1_1gmp_1_1auth_1_1entity_1_1OrganizationTest_1a9503bafc1fd7a05c78153f9a927ee925" kindref="member">testIsGmpOrganization</ref>()<sp/>{</highlight></codeline>
<codeline lineno="134"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Given:<sp/>创建不同类型的组织</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="135"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="classcom_1_1gmp_1_1auth_1_1entity_1_1Organization" kindref="compound">Organization</ref><sp/>qualityOrg<sp/>=<sp/><ref refid="classcom_1_1gmp_1_1auth_1_1entity_1_1Organization" kindref="compound">Organization</ref>.builder()</highlight></codeline>
<codeline lineno="136"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>.<ref refid="classcom_1_1gmp_1_1auth_1_1entity_1_1Organization_1a9be69a803f605fdde53628cbf1497d64" kindref="member">orgType</ref>(<ref refid="classcom_1_1gmp_1_1auth_1_1entity_1_1Organization" kindref="compound">Organization</ref>.<ref refid="enumcom_1_1gmp_1_1auth_1_1entity_1_1Organization_1_1OrganizationType" kindref="compound">OrganizationType</ref>.<ref refid="enumcom_1_1gmp_1_1auth_1_1entity_1_1Organization_1_1OrganizationType_1a8994375c9c169aebfee3e2b4dbdbd81d" kindref="member">QUALITY</ref>)</highlight></codeline>
<codeline lineno="137"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>.build();</highlight></codeline>
<codeline lineno="138"><highlight class="normal"></highlight></codeline>
<codeline lineno="139"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="classcom_1_1gmp_1_1auth_1_1entity_1_1Organization" kindref="compound">Organization</ref><sp/>productionOrg<sp/>=<sp/><ref refid="classcom_1_1gmp_1_1auth_1_1entity_1_1Organization" kindref="compound">Organization</ref>.builder()</highlight></codeline>
<codeline lineno="140"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>.<ref refid="classcom_1_1gmp_1_1auth_1_1entity_1_1Organization_1a9be69a803f605fdde53628cbf1497d64" kindref="member">orgType</ref>(<ref refid="classcom_1_1gmp_1_1auth_1_1entity_1_1Organization" kindref="compound">Organization</ref>.<ref refid="enumcom_1_1gmp_1_1auth_1_1entity_1_1Organization_1_1OrganizationType" kindref="compound">OrganizationType</ref>.<ref refid="enumcom_1_1gmp_1_1auth_1_1entity_1_1Organization_1_1OrganizationType_1a1e6456f08828215c9d70e2cacb37f8d2" kindref="member">PRODUCTION</ref>)</highlight></codeline>
<codeline lineno="141"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>.build();</highlight></codeline>
<codeline lineno="142"><highlight class="normal"></highlight></codeline>
<codeline lineno="143"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="classcom_1_1gmp_1_1auth_1_1entity_1_1Organization" kindref="compound">Organization</ref><sp/>complianceOrg<sp/>=<sp/><ref refid="classcom_1_1gmp_1_1auth_1_1entity_1_1Organization" kindref="compound">Organization</ref>.builder()</highlight></codeline>
<codeline lineno="144"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>.<ref refid="classcom_1_1gmp_1_1auth_1_1entity_1_1Organization_1a9be69a803f605fdde53628cbf1497d64" kindref="member">orgType</ref>(<ref refid="classcom_1_1gmp_1_1auth_1_1entity_1_1Organization" kindref="compound">Organization</ref>.<ref refid="enumcom_1_1gmp_1_1auth_1_1entity_1_1Organization_1_1OrganizationType" kindref="compound">OrganizationType</ref>.<ref refid="enumcom_1_1gmp_1_1auth_1_1entity_1_1Organization_1_1OrganizationType_1af6fc3277cbd81f0d4a0df729f71555be" kindref="member">COMPLIANCE</ref>)</highlight></codeline>
<codeline lineno="145"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>.build();</highlight></codeline>
<codeline lineno="146"><highlight class="normal"></highlight></codeline>
<codeline lineno="147"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="classcom_1_1gmp_1_1auth_1_1entity_1_1Organization" kindref="compound">Organization</ref><sp/>trainingOrg<sp/>=<sp/><ref refid="classcom_1_1gmp_1_1auth_1_1entity_1_1Organization" kindref="compound">Organization</ref>.builder()</highlight></codeline>
<codeline lineno="148"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>.<ref refid="classcom_1_1gmp_1_1auth_1_1entity_1_1Organization_1a9be69a803f605fdde53628cbf1497d64" kindref="member">orgType</ref>(<ref refid="classcom_1_1gmp_1_1auth_1_1entity_1_1Organization" kindref="compound">Organization</ref>.<ref refid="enumcom_1_1gmp_1_1auth_1_1entity_1_1Organization_1_1OrganizationType" kindref="compound">OrganizationType</ref>.<ref refid="enumcom_1_1gmp_1_1auth_1_1entity_1_1Organization_1_1OrganizationType_1a702f238f48dd8c969d503ee6c502b30d" kindref="member">TRAINING</ref>)</highlight></codeline>
<codeline lineno="149"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>.build();</highlight></codeline>
<codeline lineno="150"><highlight class="normal"></highlight></codeline>
<codeline lineno="151"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="classcom_1_1gmp_1_1auth_1_1entity_1_1Organization" kindref="compound">Organization</ref><sp/>hrOrg<sp/>=<sp/><ref refid="classcom_1_1gmp_1_1auth_1_1entity_1_1Organization" kindref="compound">Organization</ref>.builder()</highlight></codeline>
<codeline lineno="152"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>.<ref refid="classcom_1_1gmp_1_1auth_1_1entity_1_1Organization_1a9be69a803f605fdde53628cbf1497d64" kindref="member">orgType</ref>(<ref refid="classcom_1_1gmp_1_1auth_1_1entity_1_1Organization" kindref="compound">Organization</ref>.<ref refid="enumcom_1_1gmp_1_1auth_1_1entity_1_1Organization_1_1OrganizationType" kindref="compound">OrganizationType</ref>.<ref refid="enumcom_1_1gmp_1_1auth_1_1entity_1_1Organization_1_1OrganizationType_1a1929a67e8d21febb284bc5767f56d791" kindref="member">HR</ref>)</highlight></codeline>
<codeline lineno="153"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>.gmpRelevant(</highlight><highlight class="keyword">true</highlight><highlight class="normal">)<sp/></highlight><highlight class="comment">//<sp/>明确标记为GMP相关</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="154"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>.build();</highlight></codeline>
<codeline lineno="155"><highlight class="normal"></highlight></codeline>
<codeline lineno="156"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="classcom_1_1gmp_1_1auth_1_1entity_1_1Organization" kindref="compound">Organization</ref><sp/>normalDeptOrg<sp/>=<sp/><ref refid="classcom_1_1gmp_1_1auth_1_1entity_1_1Organization" kindref="compound">Organization</ref>.builder()</highlight></codeline>
<codeline lineno="157"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>.<ref refid="classcom_1_1gmp_1_1auth_1_1entity_1_1Organization_1a9be69a803f605fdde53628cbf1497d64" kindref="member">orgType</ref>(<ref refid="classcom_1_1gmp_1_1auth_1_1entity_1_1Organization" kindref="compound">Organization</ref>.<ref refid="enumcom_1_1gmp_1_1auth_1_1entity_1_1Organization_1_1OrganizationType" kindref="compound">OrganizationType</ref>.<ref refid="enumcom_1_1gmp_1_1auth_1_1entity_1_1Organization_1_1OrganizationType_1a816deea8a7913d90eca0382f8fc29cc4" kindref="member">DEPARTMENT</ref>)</highlight></codeline>
<codeline lineno="158"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>.gmpRelevant(</highlight><highlight class="keyword">false</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="159"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>.build();</highlight></codeline>
<codeline lineno="160"><highlight class="normal"></highlight></codeline>
<codeline lineno="161"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Then:<sp/>验证GMP组织识别</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="162"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>assertThat(qualityOrg.<ref refid="classcom_1_1gmp_1_1auth_1_1entity_1_1Organization_1ac456bca40848d3fed1a38aa7201bd550" kindref="member">isGmpOrganization</ref>()).isTrue();<sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>质量组织默认GMP相关</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="163"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>assertThat(productionOrg.<ref refid="classcom_1_1gmp_1_1auth_1_1entity_1_1Organization_1ac456bca40848d3fed1a38aa7201bd550" kindref="member">isGmpOrganization</ref>()).isTrue();<sp/><sp/></highlight><highlight class="comment">//<sp/>生产组织默认GMP相关</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="164"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>assertThat(complianceOrg.<ref refid="classcom_1_1gmp_1_1auth_1_1entity_1_1Organization_1ac456bca40848d3fed1a38aa7201bd550" kindref="member">isGmpOrganization</ref>()).isTrue();<sp/><sp/></highlight><highlight class="comment">//<sp/>合规组织默认GMP相关</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="165"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>assertThat(trainingOrg.<ref refid="classcom_1_1gmp_1_1auth_1_1entity_1_1Organization_1ac456bca40848d3fed1a38aa7201bd550" kindref="member">isGmpOrganization</ref>()).isTrue();<sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>培训组织默认GMP相关</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="166"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>assertThat(hrOrg.<ref refid="classcom_1_1gmp_1_1auth_1_1entity_1_1Organization_1ac456bca40848d3fed1a38aa7201bd550" kindref="member">isGmpOrganization</ref>()).isTrue();<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>明确标记为GMP相关</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="167"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>assertThat(normalDeptOrg.<ref refid="classcom_1_1gmp_1_1auth_1_1entity_1_1Organization_1ac456bca40848d3fed1a38aa7201bd550" kindref="member">isGmpOrganization</ref>()).isFalse();<sp/></highlight><highlight class="comment">//<sp/>普通部门非GMP相关</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="168"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="169"><highlight class="normal"></highlight></codeline>
<codeline lineno="170"><highlight class="normal"><sp/><sp/><sp/><sp/>@Test</highlight></codeline>
<codeline lineno="171" refid="classcom_1_1gmp_1_1auth_1_1entity_1_1OrganizationTest_1ab1f7f413e1ac65ae8edf5894f575d23c" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="classcom_1_1gmp_1_1auth_1_1entity_1_1OrganizationTest_1ab1f7f413e1ac65ae8edf5894f575d23c" kindref="member">testGetResponsibleManager</ref>()<sp/>{</highlight></codeline>
<codeline lineno="172"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Given:<sp/>组织有GMP责任人和普通负责人</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="173"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="classcom_1_1gmp_1_1auth_1_1entity_1_1Organization" kindref="compound">Organization</ref><sp/>orgWithBothManagers<sp/>=<sp/><ref refid="classcom_1_1gmp_1_1auth_1_1entity_1_1Organization" kindref="compound">Organization</ref>.builder()</highlight></codeline>
<codeline lineno="174"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>.<ref refid="classcom_1_1gmp_1_1auth_1_1entity_1_1Organization_1a033c178e8a9f7a589d0723bb67395e84" kindref="member">manager</ref>(</highlight><highlight class="stringliteral">&quot;张经理&quot;</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="175"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>.gmpResponsible(</highlight><highlight class="stringliteral">&quot;李总监&quot;</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="176"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>.build();</highlight></codeline>
<codeline lineno="177"><highlight class="normal"></highlight></codeline>
<codeline lineno="178"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Given:<sp/>组织只有普通负责人</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="179"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="classcom_1_1gmp_1_1auth_1_1entity_1_1Organization" kindref="compound">Organization</ref><sp/>orgWithManagerOnly<sp/>=<sp/><ref refid="classcom_1_1gmp_1_1auth_1_1entity_1_1Organization" kindref="compound">Organization</ref>.builder()</highlight></codeline>
<codeline lineno="180"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>.<ref refid="classcom_1_1gmp_1_1auth_1_1entity_1_1Organization_1a033c178e8a9f7a589d0723bb67395e84" kindref="member">manager</ref>(</highlight><highlight class="stringliteral">&quot;王经理&quot;</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="181"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>.build();</highlight></codeline>
<codeline lineno="182"><highlight class="normal"></highlight></codeline>
<codeline lineno="183"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Given:<sp/>组织无任何负责人</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="184"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="classcom_1_1gmp_1_1auth_1_1entity_1_1Organization" kindref="compound">Organization</ref><sp/>orgWithoutManagers<sp/>=<sp/><ref refid="classcom_1_1gmp_1_1auth_1_1entity_1_1Organization" kindref="compound">Organization</ref>.builder()</highlight></codeline>
<codeline lineno="185"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>.build();</highlight></codeline>
<codeline lineno="186"><highlight class="normal"></highlight></codeline>
<codeline lineno="187"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Then:<sp/>验证负责人获取逻辑</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="188"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>assertThat(orgWithBothManagers.<ref refid="classcom_1_1gmp_1_1auth_1_1entity_1_1Organization_1a646e81c24f9a4a31d8610f6668ea1be4" kindref="member">getResponsibleManager</ref>()).isEqualTo(</highlight><highlight class="stringliteral">&quot;李总监&quot;</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="189"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>assertThat(orgWithManagerOnly.<ref refid="classcom_1_1gmp_1_1auth_1_1entity_1_1Organization_1a646e81c24f9a4a31d8610f6668ea1be4" kindref="member">getResponsibleManager</ref>()).isEqualTo(</highlight><highlight class="stringliteral">&quot;王经理&quot;</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="190"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>assertThat(orgWithoutManagers.<ref refid="classcom_1_1gmp_1_1auth_1_1entity_1_1Organization_1a646e81c24f9a4a31d8610f6668ea1be4" kindref="member">getResponsibleManager</ref>()).isNull();</highlight></codeline>
<codeline lineno="191"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="192"><highlight class="normal"></highlight></codeline>
<codeline lineno="193"><highlight class="normal"><sp/><sp/><sp/><sp/>@Test</highlight></codeline>
<codeline lineno="194" refid="classcom_1_1gmp_1_1auth_1_1entity_1_1OrganizationTest_1aa488557f2179fc186cb3ad9b6e229dbf" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="classcom_1_1gmp_1_1auth_1_1entity_1_1OrganizationTest_1aa488557f2179fc186cb3ad9b6e229dbf" kindref="member">testOrganizationHierarchy</ref>()<sp/>{</highlight></codeline>
<codeline lineno="195"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Given:<sp/>创建多级组织架构</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="196"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="classcom_1_1gmp_1_1auth_1_1entity_1_1Organization" kindref="compound">Organization</ref><sp/>company<sp/>=<sp/><ref refid="classcom_1_1gmp_1_1auth_1_1entity_1_1Organization" kindref="compound">Organization</ref>.builder()</highlight></codeline>
<codeline lineno="197"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>.<ref refid="classcom_1_1gmp_1_1auth_1_1entity_1_1Organization_1a666a840c32f6dee3b29cde95583eb394" kindref="member">orgCode</ref>(</highlight><highlight class="stringliteral">&quot;ORG_COMPANY&quot;</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="198"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>.orgName(</highlight><highlight class="stringliteral">&quot;GMP医药有限公司&quot;</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="199"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>.hierarchyLevel(1)</highlight></codeline>
<codeline lineno="200"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>.build();</highlight></codeline>
<codeline lineno="201"><highlight class="normal"></highlight></codeline>
<codeline lineno="202"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="classcom_1_1gmp_1_1auth_1_1entity_1_1Organization" kindref="compound">Organization</ref><sp/>dept<sp/>=<sp/><ref refid="classcom_1_1gmp_1_1auth_1_1entity_1_1Organization" kindref="compound">Organization</ref>.builder()</highlight></codeline>
<codeline lineno="203"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>.<ref refid="classcom_1_1gmp_1_1auth_1_1entity_1_1Organization_1a666a840c32f6dee3b29cde95583eb394" kindref="member">orgCode</ref>(</highlight><highlight class="stringliteral">&quot;ORG_DEPT&quot;</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="204"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>.orgName(</highlight><highlight class="stringliteral">&quot;生产部门&quot;</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="205"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>.hierarchyLevel(2)</highlight></codeline>
<codeline lineno="206"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>.parent(company)</highlight></codeline>
<codeline lineno="207"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>.build();</highlight></codeline>
<codeline lineno="208"><highlight class="normal"></highlight></codeline>
<codeline lineno="209"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="classcom_1_1gmp_1_1auth_1_1entity_1_1Organization" kindref="compound">Organization</ref><sp/>workshop<sp/>=<sp/><ref refid="classcom_1_1gmp_1_1auth_1_1entity_1_1Organization" kindref="compound">Organization</ref>.builder()</highlight></codeline>
<codeline lineno="210"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>.<ref refid="classcom_1_1gmp_1_1auth_1_1entity_1_1Organization_1a666a840c32f6dee3b29cde95583eb394" kindref="member">orgCode</ref>(</highlight><highlight class="stringliteral">&quot;ORG_WS&quot;</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="211"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>.orgName(</highlight><highlight class="stringliteral">&quot;A车间&quot;</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="212"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>.hierarchyLevel(3)</highlight></codeline>
<codeline lineno="213"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>.parent(dept)</highlight></codeline>
<codeline lineno="214"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>.build();</highlight></codeline>
<codeline lineno="215"><highlight class="normal"></highlight></codeline>
<codeline lineno="216"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Then:<sp/>验证层级关系</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="217"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>assertThat(company.getHierarchyLevel()).isEqualTo(1);</highlight></codeline>
<codeline lineno="218"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>assertThat(company.getParent()).isNull();</highlight></codeline>
<codeline lineno="219"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>assertThat(company.<ref refid="classcom_1_1gmp_1_1auth_1_1entity_1_1Organization_1ae9fedbfac48c1705afaba411bf550f7f" kindref="member">getFullPath</ref>()).isEqualTo(</highlight><highlight class="stringliteral">&quot;GMP医药有限公司&quot;</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="220"><highlight class="normal"></highlight></codeline>
<codeline lineno="221"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>assertThat(dept.getHierarchyLevel()).isEqualTo(2);</highlight></codeline>
<codeline lineno="222"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>assertThat(dept.getParent()).isSameAs(company);</highlight></codeline>
<codeline lineno="223"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>assertThat(dept.<ref refid="classcom_1_1gmp_1_1auth_1_1entity_1_1Organization_1ae9fedbfac48c1705afaba411bf550f7f" kindref="member">getFullPath</ref>()).isEqualTo(</highlight><highlight class="stringliteral">&quot;GMP医药有限公司<sp/>&gt;<sp/>生产部门&quot;</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="224"><highlight class="normal"></highlight></codeline>
<codeline lineno="225"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>assertThat(workshop.getHierarchyLevel()).isEqualTo(3);</highlight></codeline>
<codeline lineno="226"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>assertThat(workshop.getParent()).isSameAs(dept);</highlight></codeline>
<codeline lineno="227"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>assertThat(workshop.<ref refid="classcom_1_1gmp_1_1auth_1_1entity_1_1Organization_1ae9fedbfac48c1705afaba411bf550f7f" kindref="member">getFullPath</ref>()).isEqualTo(</highlight><highlight class="stringliteral">&quot;GMP医药有限公司<sp/>&gt;<sp/>生产部门<sp/>&gt;<sp/>A车间&quot;</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="228"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="229"><highlight class="normal"></highlight></codeline>
<codeline lineno="230"><highlight class="normal"><sp/><sp/><sp/><sp/>@Test</highlight></codeline>
<codeline lineno="231" refid="classcom_1_1gmp_1_1auth_1_1entity_1_1OrganizationTest_1a7ab1d3ec2b38fd7b4fb7d0d2f879da79" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="classcom_1_1gmp_1_1auth_1_1entity_1_1OrganizationTest_1a7ab1d3ec2b38fd7b4fb7d0d2f879da79" kindref="member">testAuditFields</ref>()<sp/>{</highlight></codeline>
<codeline lineno="232"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>LocalDateTime<sp/>now<sp/>=<sp/>LocalDateTime.now();</highlight></codeline>
<codeline lineno="233"><highlight class="normal"></highlight></codeline>
<codeline lineno="234"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Given:<sp/>设置审计字段</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="235"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="classcom_1_1gmp_1_1auth_1_1entity_1_1Organization" kindref="compound">Organization</ref><sp/>org<sp/>=<sp/><ref refid="classcom_1_1gmp_1_1auth_1_1entity_1_1Organization" kindref="compound">Organization</ref>.builder()</highlight></codeline>
<codeline lineno="236"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>.<ref refid="classcom_1_1gmp_1_1auth_1_1entity_1_1Organization_1a4c4aee66a76de1fe8224ee87775bd424" kindref="member">createdAt</ref>(now)</highlight></codeline>
<codeline lineno="237"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>.updatedAt(now)</highlight></codeline>
<codeline lineno="238"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>.createdBy(1L)</highlight></codeline>
<codeline lineno="239"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>.updatedBy(1L)</highlight></codeline>
<codeline lineno="240"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>.version(1)</highlight></codeline>
<codeline lineno="241"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>.build();</highlight></codeline>
<codeline lineno="242"><highlight class="normal"></highlight></codeline>
<codeline lineno="243"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Then:<sp/>验证审计字段</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="244"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>assertThat(org.getCreatedAt()).isEqualTo(now);</highlight></codeline>
<codeline lineno="245"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>assertThat(org.getUpdatedAt()).isEqualTo(now);</highlight></codeline>
<codeline lineno="246"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>assertThat(org.getCreatedBy()).isEqualTo(1L);</highlight></codeline>
<codeline lineno="247"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>assertThat(org.getUpdatedBy()).isEqualTo(1L);</highlight></codeline>
<codeline lineno="248"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>assertThat(org.getVersion()).isEqualTo(1);</highlight></codeline>
<codeline lineno="249"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="250"><highlight class="normal"></highlight></codeline>
<codeline lineno="251"><highlight class="normal"><sp/><sp/><sp/><sp/>@Test</highlight></codeline>
<codeline lineno="252" refid="classcom_1_1gmp_1_1auth_1_1entity_1_1OrganizationTest_1a4269b04baa8d876b201b6c49a518b4d4" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="classcom_1_1gmp_1_1auth_1_1entity_1_1OrganizationTest_1a4269b04baa8d876b201b6c49a518b4d4" kindref="member">testOrganizationValidation</ref>()<sp/>{</highlight></codeline>
<codeline lineno="253"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Test<sp/>valid<sp/>organization<sp/>codes</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="254"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="classcom_1_1gmp_1_1auth_1_1entity_1_1Organization" kindref="compound">Organization</ref><sp/>validOrg<sp/>=<sp/><ref refid="classcom_1_1gmp_1_1auth_1_1entity_1_1Organization" kindref="compound">Organization</ref>.builder()</highlight></codeline>
<codeline lineno="255"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>.<ref refid="classcom_1_1gmp_1_1auth_1_1entity_1_1Organization_1a666a840c32f6dee3b29cde95583eb394" kindref="member">orgCode</ref>(</highlight><highlight class="stringliteral">&quot;ORG_DEPT_001&quot;</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="256"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>.orgName(</highlight><highlight class="stringliteral">&quot;测试组织&quot;</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="257"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>.build();</highlight></codeline>
<codeline lineno="258"><highlight class="normal"></highlight></codeline>
<codeline lineno="259"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>assertThat(validOrg.getOrgCode()).matches(</highlight><highlight class="stringliteral">&quot;^[A-Z0-9_]+$&quot;</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="260"><highlight class="normal"></highlight></codeline>
<codeline lineno="261"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Test<sp/>invalid<sp/>organization<sp/>codes<sp/>(should<sp/>be<sp/>validated<sp/>by<sp/>@Pattern<sp/>annotation<sp/>in<sp/>practice)</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="262"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>assertThat(</highlight><highlight class="stringliteral">&quot;ORG_DEPT&quot;</highlight><highlight class="normal">).matches(</highlight><highlight class="stringliteral">&quot;^[A-Z_]+$&quot;</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="263"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>assertThat(</highlight><highlight class="stringliteral">&quot;org_dept&quot;</highlight><highlight class="normal">).doesNotMatch(</highlight><highlight class="stringliteral">&quot;^[A-Z_]+$&quot;</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="264"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>assertThat(</highlight><highlight class="stringliteral">&quot;ORG-DEPT&quot;</highlight><highlight class="normal">).doesNotMatch(</highlight><highlight class="stringliteral">&quot;^[A-Z_]+$&quot;</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="265"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="266"><highlight class="normal"></highlight></codeline>
<codeline lineno="267"><highlight class="normal"><sp/><sp/><sp/><sp/>@Test</highlight></codeline>
<codeline lineno="268" refid="classcom_1_1gmp_1_1auth_1_1entity_1_1OrganizationTest_1ac06277f7846e188591db1f3711e9d976" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="classcom_1_1gmp_1_1auth_1_1entity_1_1OrganizationTest_1ac06277f7846e188591db1f3711e9d976" kindref="member">testGmpCompliance</ref>()<sp/>{</highlight></codeline>
<codeline lineno="269"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Given:<sp/>GMP合规组织</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="270"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="classcom_1_1gmp_1_1auth_1_1entity_1_1Organization" kindref="compound">Organization</ref><sp/>gmpOrg<sp/>=<sp/><ref refid="classcom_1_1gmp_1_1auth_1_1entity_1_1Organization" kindref="compound">Organization</ref>.builder()</highlight></codeline>
<codeline lineno="271"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>.<ref refid="classcom_1_1gmp_1_1auth_1_1entity_1_1Organization_1a5a0a379668e59b325f92f14626ef8613" kindref="member">orgName</ref>(</highlight><highlight class="stringliteral">&quot;质量管理中心&quot;</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="272"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>.orgType(<ref refid="classcom_1_1gmp_1_1auth_1_1entity_1_1Organization" kindref="compound">Organization</ref>.<ref refid="enumcom_1_1gmp_1_1auth_1_1entity_1_1Organization_1_1OrganizationType" kindref="compound">OrganizationType</ref>.<ref refid="enumcom_1_1gmp_1_1auth_1_1entity_1_1Organization_1_1OrganizationType_1a8994375c9c169aebfee3e2b4dbdbd81d" kindref="member">QUALITY</ref>)</highlight></codeline>
<codeline lineno="273"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>.gmpRelevant(</highlight><highlight class="keyword">true</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="274"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>.gmpRequirements(</highlight><highlight class="stringliteral">&quot;必须符合《中国药典》GMP要求&quot;</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="275"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>.gmpResponsible(</highlight><highlight class="stringliteral">&quot;质量总监&quot;</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="276"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>.build();</highlight></codeline>
<codeline lineno="277"><highlight class="normal"></highlight></codeline>
<codeline lineno="278"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Given:<sp/>非GMP组织</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="279"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="classcom_1_1gmp_1_1auth_1_1entity_1_1Organization" kindref="compound">Organization</ref><sp/>normalOrg<sp/>=<sp/><ref refid="classcom_1_1gmp_1_1auth_1_1entity_1_1Organization" kindref="compound">Organization</ref>.builder()</highlight></codeline>
<codeline lineno="280"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>.<ref refid="classcom_1_1gmp_1_1auth_1_1entity_1_1Organization_1a5a0a379668e59b325f92f14626ef8613" kindref="member">orgName</ref>(</highlight><highlight class="stringliteral">&quot;行政办公室&quot;</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="281"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>.orgType(<ref refid="classcom_1_1gmp_1_1auth_1_1entity_1_1Organization" kindref="compound">Organization</ref>.<ref refid="enumcom_1_1gmp_1_1auth_1_1entity_1_1Organization_1_1OrganizationType" kindref="compound">OrganizationType</ref>.<ref refid="enumcom_1_1gmp_1_1auth_1_1entity_1_1Organization_1_1OrganizationType_1a816deea8a7913d90eca0382f8fc29cc4" kindref="member">DEPARTMENT</ref>)</highlight></codeline>
<codeline lineno="282"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>.gmpRelevant(</highlight><highlight class="keyword">false</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="283"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>.build();</highlight></codeline>
<codeline lineno="284"><highlight class="normal"></highlight></codeline>
<codeline lineno="285"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Then:<sp/>验证GMP合规性</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="286"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>assertThat(gmpOrg.<ref refid="classcom_1_1gmp_1_1auth_1_1entity_1_1Organization_1ac456bca40848d3fed1a38aa7201bd550" kindref="member">isGmpOrganization</ref>()).isTrue();</highlight></codeline>
<codeline lineno="287"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>assertThat(gmpOrg.getGmpRequirements()).contains(</highlight><highlight class="stringliteral">&quot;GMP&quot;</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="288"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>assertThat(gmpOrg.<ref refid="classcom_1_1gmp_1_1auth_1_1entity_1_1Organization_1a646e81c24f9a4a31d8610f6668ea1be4" kindref="member">getResponsibleManager</ref>()).isEqualTo(</highlight><highlight class="stringliteral">&quot;质量总监&quot;</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="289"><highlight class="normal"></highlight></codeline>
<codeline lineno="290"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>assertThat(normalOrg.<ref refid="classcom_1_1gmp_1_1auth_1_1entity_1_1Organization_1ac456bca40848d3fed1a38aa7201bd550" kindref="member">isGmpOrganization</ref>()).isFalse();</highlight></codeline>
<codeline lineno="291"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>assertThat(normalOrg.getGmpRequirements()).isNull();</highlight></codeline>
<codeline lineno="292"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="293"><highlight class="normal"></highlight></codeline>
<codeline lineno="294"><highlight class="normal"><sp/><sp/><sp/><sp/>@Test</highlight></codeline>
<codeline lineno="295" refid="classcom_1_1gmp_1_1auth_1_1entity_1_1OrganizationTest_1ac3e9ab7ce75b53037bb5cd277fc44569" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="classcom_1_1gmp_1_1auth_1_1entity_1_1OrganizationTest_1ac3e9ab7ce75b53037bb5cd277fc44569" kindref="member">testOrganizationBuilderDefaultValues</ref>()<sp/>{</highlight></codeline>
<codeline lineno="296"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Given:<sp/>使用默认值创建组织</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="297"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="classcom_1_1gmp_1_1auth_1_1entity_1_1Organization" kindref="compound">Organization</ref><sp/>org<sp/>=<sp/><ref refid="classcom_1_1gmp_1_1auth_1_1entity_1_1Organization" kindref="compound">Organization</ref>.builder()</highlight></codeline>
<codeline lineno="298"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>.<ref refid="classcom_1_1gmp_1_1auth_1_1entity_1_1Organization_1a666a840c32f6dee3b29cde95583eb394" kindref="member">orgCode</ref>(</highlight><highlight class="stringliteral">&quot;ORG_TEST&quot;</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="299"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>.orgName(</highlight><highlight class="stringliteral">&quot;测试组织&quot;</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="300"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>.build();</highlight></codeline>
<codeline lineno="301"><highlight class="normal"></highlight></codeline>
<codeline lineno="302"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Then:<sp/>验证默认值</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="303"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>assertThat(org.getOrgStatus()).isEqualTo(<ref refid="classcom_1_1gmp_1_1auth_1_1entity_1_1Organization" kindref="compound">Organization</ref>.<ref refid="enumcom_1_1gmp_1_1auth_1_1entity_1_1Organization_1_1OrganizationStatus" kindref="compound">OrganizationStatus</ref>.<ref refid="enumcom_1_1gmp_1_1auth_1_1entity_1_1Organization_1_1OrganizationStatus_1a9d280902b2fe9f1d8a67318e3e5a3990" kindref="member">ACTIVE</ref>);</highlight></codeline>
<codeline lineno="304"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>assertThat(org.getHierarchyLevel()).isEqualTo(1);</highlight></codeline>
<codeline lineno="305"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>assertThat(org.getGmpRelevant()).isFalse();</highlight></codeline>
<codeline lineno="306"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>assertThat(org.getVersion()).isEqualTo(1);</highlight></codeline>
<codeline lineno="307"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="308"><highlight class="normal"></highlight></codeline>
<codeline lineno="309"><highlight class="normal"><sp/><sp/><sp/><sp/>@Test</highlight></codeline>
<codeline lineno="310" refid="classcom_1_1gmp_1_1auth_1_1entity_1_1OrganizationTest_1a81b32249c536a79c9b1e8bdffb401809" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="classcom_1_1gmp_1_1auth_1_1entity_1_1OrganizationTest_1a81b32249c536a79c9b1e8bdffb401809" kindref="member">testNestedOrganizationHierarchy</ref>()<sp/>{</highlight></codeline>
<codeline lineno="311"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Given:<sp/>创建复杂的组织层级结构</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="312"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*</highlight></codeline>
<codeline lineno="313"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>*<sp/>公司</highlight></codeline>
<codeline lineno="314"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>*<sp/>├──<sp/>生产部门</highlight></codeline>
<codeline lineno="315"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>*<sp/>│<sp/><sp/><sp/>├──<sp/>A车间</highlight></codeline>
<codeline lineno="316"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>*<sp/>│<sp/><sp/><sp/>└──<sp/>B车间</highlight></codeline>
<codeline lineno="317"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>*<sp/>├──<sp/>质量部门</highlight></codeline>
<codeline lineno="318"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>*<sp/>│<sp/><sp/><sp/>└──<sp/>检验实验室</highlight></codeline>
<codeline lineno="319"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>*<sp/>└──<sp/>行政部门</highlight></codeline>
<codeline lineno="320"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="321"><highlight class="normal"></highlight></codeline>
<codeline lineno="322"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="classcom_1_1gmp_1_1auth_1_1entity_1_1Organization" kindref="compound">Organization</ref><sp/>company<sp/>=<sp/><ref refid="classcom_1_1gmp_1_1auth_1_1entity_1_1Organization" kindref="compound">Organization</ref>.builder()</highlight></codeline>
<codeline lineno="323"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>.<ref refid="classcom_1_1gmp_1_1auth_1_1entity_1_1Organization_1a666a840c32f6dee3b29cde95583eb394" kindref="member">orgCode</ref>(</highlight><highlight class="stringliteral">&quot;ORG_COMPANY&quot;</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="324"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>.orgName(</highlight><highlight class="stringliteral">&quot;GMP医药公司&quot;</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="325"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>.hierarchyLevel(1)</highlight></codeline>
<codeline lineno="326"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>.build();</highlight></codeline>
<codeline lineno="327"><highlight class="normal"></highlight></codeline>
<codeline lineno="328"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="classcom_1_1gmp_1_1auth_1_1entity_1_1Organization" kindref="compound">Organization</ref><sp/>prodDept<sp/>=<sp/><ref refid="classcom_1_1gmp_1_1auth_1_1entity_1_1Organization" kindref="compound">Organization</ref>.builder()</highlight></codeline>
<codeline lineno="329"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>.<ref refid="classcom_1_1gmp_1_1auth_1_1entity_1_1Organization_1a666a840c32f6dee3b29cde95583eb394" kindref="member">orgCode</ref>(</highlight><highlight class="stringliteral">&quot;ORG_PROD&quot;</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="330"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>.orgName(</highlight><highlight class="stringliteral">&quot;生产部门&quot;</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="331"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>.hierarchyLevel(2)</highlight></codeline>
<codeline lineno="332"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>.parent(company)</highlight></codeline>
<codeline lineno="333"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>.build();</highlight></codeline>
<codeline lineno="334"><highlight class="normal"></highlight></codeline>
<codeline lineno="335"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="classcom_1_1gmp_1_1auth_1_1entity_1_1Organization" kindref="compound">Organization</ref><sp/>qualityDept<sp/>=<sp/><ref refid="classcom_1_1gmp_1_1auth_1_1entity_1_1Organization" kindref="compound">Organization</ref>.builder()</highlight></codeline>
<codeline lineno="336"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>.<ref refid="classcom_1_1gmp_1_1auth_1_1entity_1_1Organization_1a666a840c32f6dee3b29cde95583eb394" kindref="member">orgCode</ref>(</highlight><highlight class="stringliteral">&quot;ORG_QUALITY&quot;</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="337"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>.orgName(</highlight><highlight class="stringliteral">&quot;质量部门&quot;</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="338"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>.hierarchyLevel(2)</highlight></codeline>
<codeline lineno="339"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>.parent(company)</highlight></codeline>
<codeline lineno="340"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>.build();</highlight></codeline>
<codeline lineno="341"><highlight class="normal"></highlight></codeline>
<codeline lineno="342"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="classcom_1_1gmp_1_1auth_1_1entity_1_1Organization" kindref="compound">Organization</ref><sp/>workshopA<sp/>=<sp/><ref refid="classcom_1_1gmp_1_1auth_1_1entity_1_1Organization" kindref="compound">Organization</ref>.builder()</highlight></codeline>
<codeline lineno="343"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>.<ref refid="classcom_1_1gmp_1_1auth_1_1entity_1_1Organization_1a666a840c32f6dee3b29cde95583eb394" kindref="member">orgCode</ref>(</highlight><highlight class="stringliteral">&quot;ORG_WS_A&quot;</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="344"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>.orgName(</highlight><highlight class="stringliteral">&quot;A车间&quot;</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="345"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>.hierarchyLevel(3)</highlight></codeline>
<codeline lineno="346"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>.parent(prodDept)</highlight></codeline>
<codeline lineno="347"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>.build();</highlight></codeline>
<codeline lineno="348"><highlight class="normal"></highlight></codeline>
<codeline lineno="349"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="classcom_1_1gmp_1_1auth_1_1entity_1_1Organization" kindref="compound">Organization</ref><sp/>workshopB<sp/>=<sp/><ref refid="classcom_1_1gmp_1_1auth_1_1entity_1_1Organization" kindref="compound">Organization</ref>.builder()</highlight></codeline>
<codeline lineno="350"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>.<ref refid="classcom_1_1gmp_1_1auth_1_1entity_1_1Organization_1a666a840c32f6dee3b29cde95583eb394" kindref="member">orgCode</ref>(</highlight><highlight class="stringliteral">&quot;ORG_WS_B&quot;</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="351"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>.orgName(</highlight><highlight class="stringliteral">&quot;B车间&quot;</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="352"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>.hierarchyLevel(3)</highlight></codeline>
<codeline lineno="353"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>.parent(prodDept)</highlight></codeline>
<codeline lineno="354"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>.build();</highlight></codeline>
<codeline lineno="355"><highlight class="normal"></highlight></codeline>
<codeline lineno="356"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="classcom_1_1gmp_1_1auth_1_1entity_1_1Organization" kindref="compound">Organization</ref><sp/>lab<sp/>=<sp/><ref refid="classcom_1_1gmp_1_1auth_1_1entity_1_1Organization" kindref="compound">Organization</ref>.builder()</highlight></codeline>
<codeline lineno="357"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>.<ref refid="classcom_1_1gmp_1_1auth_1_1entity_1_1Organization_1a666a840c32f6dee3b29cde95583eb394" kindref="member">orgCode</ref>(</highlight><highlight class="stringliteral">&quot;ORG_LAB&quot;</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="358"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>.orgName(</highlight><highlight class="stringliteral">&quot;检验实验室&quot;</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="359"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>.hierarchyLevel(3)</highlight></codeline>
<codeline lineno="360"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>.parent(qualityDept)</highlight></codeline>
<codeline lineno="361"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>.build();</highlight></codeline>
<codeline lineno="362"><highlight class="normal"></highlight></codeline>
<codeline lineno="363"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Then:<sp/>验证完整的层级路径</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="364"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>assertThat(company.<ref refid="classcom_1_1gmp_1_1auth_1_1entity_1_1Organization_1ae9fedbfac48c1705afaba411bf550f7f" kindref="member">getFullPath</ref>()).isEqualTo(</highlight><highlight class="stringliteral">&quot;GMP医药公司&quot;</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="365"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>assertThat(prodDept.<ref refid="classcom_1_1gmp_1_1auth_1_1entity_1_1Organization_1ae9fedbfac48c1705afaba411bf550f7f" kindref="member">getFullPath</ref>()).isEqualTo(</highlight><highlight class="stringliteral">&quot;GMP医药公司<sp/>&gt;<sp/>生产部门&quot;</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="366"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>assertThat(qualityDept.<ref refid="classcom_1_1gmp_1_1auth_1_1entity_1_1Organization_1ae9fedbfac48c1705afaba411bf550f7f" kindref="member">getFullPath</ref>()).isEqualTo(</highlight><highlight class="stringliteral">&quot;GMP医药公司<sp/>&gt;<sp/>质量部门&quot;</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="367"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>assertThat(workshopA.<ref refid="classcom_1_1gmp_1_1auth_1_1entity_1_1Organization_1ae9fedbfac48c1705afaba411bf550f7f" kindref="member">getFullPath</ref>()).isEqualTo(</highlight><highlight class="stringliteral">&quot;GMP医药公司<sp/>&gt;<sp/>生产部门<sp/>&gt;<sp/>A车间&quot;</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="368"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>assertThat(workshopB.<ref refid="classcom_1_1gmp_1_1auth_1_1entity_1_1Organization_1ae9fedbfac48c1705afaba411bf550f7f" kindref="member">getFullPath</ref>()).isEqualTo(</highlight><highlight class="stringliteral">&quot;GMP医药公司<sp/>&gt;<sp/>生产部门<sp/>&gt;<sp/>B车间&quot;</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="369"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>assertThat(lab.<ref refid="classcom_1_1gmp_1_1auth_1_1entity_1_1Organization_1ae9fedbfac48c1705afaba411bf550f7f" kindref="member">getFullPath</ref>()).isEqualTo(</highlight><highlight class="stringliteral">&quot;GMP医药公司<sp/>&gt;<sp/>质量部门<sp/>&gt;<sp/>检验实验室&quot;</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="370"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="371"><highlight class="normal">}</highlight></codeline>
    </programlisting>
    <location file="auth-service/src/test/java/com/gmp/auth/entity/OrganizationTest.java"/>
  </compounddef>
</doxygen>
