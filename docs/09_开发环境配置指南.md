# Mac M3 Mini GMPç³»ç»Ÿå¼€å‘ç¯å¢ƒå®‰è£…éƒ¨ç½²æŒ‡å—

## ğŸ–¥ï¸ ç³»ç»Ÿè¦æ±‚

### ç¡¬ä»¶è¦æ±‚
- **Mac M3 Mini** (2023æ¬¾æˆ–æ›´æ–°)
- **å†…å­˜**: æœ€å°‘16GB (æ¨è32GB)
- **å­˜å‚¨**: æœ€å°‘512GB SSD (æ¨è1TB)
- **ç½‘ç»œ**: ç¨³å®šç½‘ç»œè¿æ¥ç”¨äºä¸‹è½½ä¾èµ–

### è½¯ä»¶è¦æ±‚
- **macOS**: Ventura 13.0 æˆ–æ›´æ–°ç‰ˆæœ¬
- **Xcode**: 15.0 æˆ–æ›´æ–°ç‰ˆæœ¬ (ç”¨äºç¼–è¯‘å·¥å…·)

## ğŸ“¦ å¼€å‘ç¯å¢ƒå®‰è£…æ­¥éª¤

### ç¬¬ä¸€æ­¥ï¼šå®‰è£…Homebrew (macOSåŒ…ç®¡ç†å™¨)
```bash
# æ‰“å¼€ç»ˆç«¯ï¼Œæ‰§è¡Œä»¥ä¸‹å‘½ä»¤å®‰è£…Homebrew
/bin/bash -c "$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/HEAD/install.sh)"

# å°†Homebrewæ·»åŠ åˆ°PATH
echo 'eval "$(/opt/homebrew/bin/brew shellenv)"' >> ~/.zshrc
eval "$(/opt/homebrew/bin/brew shellenv)"

# éªŒè¯å®‰è£…
brew --version
```

### ç¬¬äºŒæ­¥ï¼šå®‰è£…Javaå¼€å‘ç¯å¢ƒ
```bash
# å®‰è£…OpenJDK 17 (æ¨èç”¨äºSpring Boot 3.x)
brew install openjdk@17

# åˆ›å»ºç¬¦å·é“¾æ¥
sudo ln -sfn /opt/homebrew/opt/openjdk@17/libexec/openjdk.jdk /Library/Java/JavaVirtualMachines/openjdk-17.jdk

# é…ç½®ç¯å¢ƒå˜é‡
echo 'export PATH="/opt/homebrew/opt/openjdk@17/bin:$PATH"' >> ~/.zshrc
echo 'export JAVA_HOME=$(/usr/libexec/java_home -v 17)' >> ~/.zshrc

# é‡æ–°åŠ è½½é…ç½®
source ~/.zshrc

# éªŒè¯å®‰è£…
java -version
javac -version
```

### ç¬¬ä¸‰æ­¥ï¼šå®‰è£…Mavenæ„å»ºå·¥å…·
```bash
# å®‰è£…Maven
brew install maven

# é…ç½®Mavenç¯å¢ƒå˜é‡
echo 'export MAVEN_HOME=/opt/homebrew/opt/maven' >> ~/.zshrc
echo 'export PATH="$MAVEN_HOME/bin:$PATH"' >> ~/.zshrc

# é‡æ–°åŠ è½½é…ç½®
source ~/.zshrc

# éªŒè¯å®‰è£…
mvn --version
```

### ç¬¬å››æ­¥ï¼šå®‰è£…Node.jså’Œnpm
```bash
# å®‰è£…Node.js (LTSç‰ˆæœ¬)
brew install node

# éªŒè¯å®‰è£…
node --version
npm --version

# é…ç½®npmé•œåƒæº (å›½å†…ç”¨æˆ·æ¨è)
npm config set registry https://registry.npmmirror.com
```

### ç¬¬äº”æ­¥ï¼šå®‰è£…Docker Desktop
```bash
# ä¸‹è½½Docker Desktop for Mac M1/M3
# è®¿é—®: https://www.docker.com/products/docker-desktop/
# ä¸‹è½½Apple Siliconç‰ˆæœ¬ (é€‚ç”¨äºM1/M3èŠ¯ç‰‡)

# æˆ–è€…ä½¿ç”¨Homebrewå®‰è£… (æ¨è)
brew install --cask docker

# å¯åŠ¨Docker
open /Applications/Docker.app

# ç­‰å¾…Dockerå®Œå…¨å¯åŠ¨ï¼ŒéªŒè¯å®‰è£…
docker --version
docker-compose --version
```

### ç¬¬å…­æ­¥ï¼šå®‰è£…æ•°æ®åº“å·¥å…·
```bash
# å®‰è£…PostgreSQL
brew install postgresql@14
brew services start postgresql@14

# å®‰è£…Redis
brew install redis
brew services start redis

# éªŒè¯å®‰è£…
psql --version
redis-server --version
```

### ç¬¬ä¸ƒæ­¥ï¼šå®‰è£…å¼€å‘IDE
```bash
# å®‰è£…Visual Studio Code
brew install --cask visual-studio-code

# å®‰è£…IntelliJ IDEA (æ¨èç”¨äºJavaå¼€å‘)
brew install --cask intellij-idea

# å®‰è£…å¿…è¦çš„VS Codeæ’ä»¶
code --install-extension vscjava.vscode-java-pack
code --install-extension pivotal.vscode-spring-boot
code --install-extension ms-azuretools.vscode-docker
code --install-extension dbaeumer.vscode-eslint
code --install-extension esbenp.prettier-vscode
```

### ç¬¬å…«æ­¥ï¼šå®‰è£…Gitå’Œé…ç½®
```bash
# å®‰è£…Git
brew install git

# é…ç½®Gitç”¨æˆ·ä¿¡æ¯
git config --global user.name "Your Name"
git config --global user.email "your.email@example.com"

# é…ç½®Gitåˆ«å
git config --global alias.co checkout
git config --global alias.br branch
git config --global alias.ci commit
git config --global alias.st status
```

## ğŸš€ GMPç³»ç»Ÿå¼€å‘ç¯å¢ƒé…ç½®

### 1. åˆ›å»ºé¡¹ç›®ç›®å½•ç»“æ„
```bash
# åˆ›å»ºå·¥ä½œç›®å½•
mkdir -p ~/Projects/GMPSystem
cd ~/Projects/GMPSystem

# åˆ›å»ºå¾®æœåŠ¡ç›®å½•ç»“æ„
mkdir -p {gmp-gateway,gmp-auth,gmp-qms,gmp-mes,gmp-lims,gmp-edms,gmp-common,gmp-frontend}
```

### 2. é…ç½®PostgreSQLæ•°æ®åº“
```bash
# åˆ›å»ºGMPæ•°æ®åº“
psql postgres

# åœ¨PostgreSQLä¸­æ‰§è¡Œ
CREATE DATABASE gmp_system;
CREATE USER gmp_user WITH PASSWORD 'gmp_password';
GRANT ALL PRIVILEGES ON DATABASE gmp_system TO gmp_user;
\q

# éªŒè¯è¿æ¥
psql -h localhost -U gmp_user -d gmp_system
```

### 3. åˆ›å»ºDockerå¼€å‘ç¯å¢ƒ
```bash
# åˆ›å»ºdocker-compose.ymlæ–‡ä»¶
cat > docker-compose.dev.yml << 'EOF'
version: '3.8'

services:
  # PostgreSQLæ•°æ®åº“
  postgres:
    image: postgres:14-alpine
    environment:
      POSTGRES_DB: gmp_system
      POSTGRES_USER: gmp_user
      POSTGRES_PASSWORD: gmp_password
    ports:
      - "5432:5432"
    volumes:
      - postgres_data:/var/lib/postgresql/data
      - ./init-db.sql:/docker-entrypoint-initdb.d/init-db.sql
    networks:
      - gmp_network

  # Redisç¼“å­˜
  redis:
    image: redis:7-alpine
    ports:
      - "6379:6379"
    volumes:
      - redis_data:/data
    networks:
      - gmp_network

  # MinIOå¯¹è±¡å­˜å‚¨
  minio:
    image: minio/minio:latest
    ports:
      - "9000:9000"
      - "9001:9001"
    environment:
      MINIO_ROOT_USER: minioadmin
      MINIO_ROOT_PASSWORD: minioadmin
    volumes:
      - minio_data:/data
    command: server /data --console-address ":9001"
    networks:
      - gmp_network

  # RabbitMQæ¶ˆæ¯é˜Ÿåˆ—
  rabbitmq:
    image: rabbitmq:3-management-alpine
    ports:
      - "5672:5672"
      - "15672:15672"
    environment:
      RABBITMQ_DEFAULT_USER: gmp_user
      RABBITMQ_DEFAULT_PASS: gmp_password
    volumes:
      - rabbitmq_data:/var/lib/rabbitmq
    networks:
      - gmp_network

  # Nginxåå‘ä»£ç†
  nginx:
    image: nginx:alpine
    ports:
      - "80:80"
      - "443:443"
    volumes:
      - ./nginx.conf:/etc/nginx/nginx.conf
      - ./ssl:/etc/nginx/ssl
    depends_on:
      - gmp-frontend
    networks:
      - gmp_network

volumes:
  postgres_data:
  redis_data:
  minio_data:
  rabbitmq_data:

networks:
  gmp_network:
    driver: bridge
EOF
```

### 4. åˆ›å»ºåˆå§‹åŒ–æ•°æ®åº“è„šæœ¬
```bash
cat > init-db.sql << 'EOF'
-- åˆ›å»ºæ•°æ®åº“è¡¨ç©ºé—´
CREATE TABLESPACE gmp_data OWNER gmp_user LOCATION '/var/lib/postgresql/data/gmp_data';

-- è®¾ç½®é»˜è®¤è¡¨ç©ºé—´
SET default_tablespace = gmp_data;

-- åˆ›å»ºæ‰©å±•
CREATE EXTENSION IF NOT EXISTS "uuid-ossp";
CREATE EXTENSION IF NOT EXISTS "pgcrypto";

-- è®¾ç½®æ—¶åŒº
SET timezone = 'Asia/Shanghai';

-- åˆ›å»ºæ¨¡å¼
CREATE SCHEMA IF NOT EXISTS gmp_qms AUTHORIZATION gmp_user;
CREATE SCHEMA IF NOT EXISTS gmp_mes AUTHORIZATION gmp_user;
CREATE SCHEMA IF NOT EXISTS gmp_lims AUTHORIZATION gmp_user;
CREATE SCHEMA IF NOT EXISTS gmp_edms AUTHORIZATION gmp_user;

-- æˆæƒ
GRANT ALL ON SCHEMA gmp_qms TO gmp_user;
GRANT ALL ON SCHEMA gmp_mes TO gmp_user;
GRANT ALL ON SCHEMA gmp_lims TO gmp_user;
GRANT ALL ON SCHEMA gmp_edms TO gmp_user;
EOF
```

### 5. åˆ›å»ºNginxé…ç½®
```bash
cat > nginx.conf << 'EOF'
events {
    worker_connections 1024;
}

http {
    upstream frontend {
        server gmp-frontend:3000;
    }
    
    upstream gateway {
        server gmp-gateway:8080;
    }
    
    server {
        listen 80;
        server_name localhost;
        
        # å‰ç«¯é™æ€èµ„æº
        location / {
            proxy_pass http://frontend;
            proxy_set_header Host $host;
            proxy_set_header X-Real-IP $remote_addr;
            proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
            proxy_set_header X-Forwarded-Proto $scheme;
        }
        
        # APIç½‘å…³
        location /api/ {
            proxy_pass http://gateway;
            proxy_set_header Host $host;
            proxy_set_header X-Real-IP $remote_addr;
            proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
            proxy_set_header X-Forwarded-Proto $scheme;
            
            # è¶…æ—¶è®¾ç½®
            proxy_connect_timeout 60s;
            proxy_send_timeout 60s;
            proxy_read_timeout 60s;
        }
        
        # WebSocketæ”¯æŒ
        location /ws/ {
            proxy_pass http://gateway;
            proxy_http_version 1.1;
            proxy_set_header Upgrade $http_upgrade;
            proxy_set_header Connection "upgrade";
            proxy_set_header Host $host;
            proxy_set_header X-Real-IP $remote_addr;
            proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
            proxy_set_header X-Forwarded-Proto $scheme;
        }
    }
}
EOF
```

## ğŸ”§ é¡¹ç›®é…ç½®

### 1. åˆ›å»ºçˆ¶é¡¹ç›®pom.xml
```bash
cat > pom.xml << 'EOF'
<?xml version="1.0" encoding="UTF-8"?>
<project xmlns="http://maven.apache.org/POM/4.0.0"
         xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
    <modelVersion>4.0.0</modelVersion>
    
    <groupId>com.gmp</groupId>
    <artifactId>gmp-system</artifactId>
    <version>1.0.0-SNAPSHOT</version>
    <packaging>pom</packaging>
    
    <name>GMPä¿¡æ¯ç®¡ç†ç³»ç»Ÿ</name>
    <description>ç¬¦åˆGMPæ ‡å‡†çš„åŒ»è¯ä¼ä¸šä¿¡æ¯ç®¡ç†ç³»ç»Ÿ</description>
    
    <properties>
        <maven.compiler.source>17</maven.compiler.source>
        <maven.compiler.target>17</maven.compiler.target>
        <project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>
        <spring-boot.version>3.2.0</spring-boot.version>
        <spring-cloud.version>2023.0.0</spring-cloud.version>
    </properties>
    
    <modules>
        <module>gmp-common</module>
        <module>gmp-gateway</module>
        <module>gmp-auth</module>
        <module>gmp-qms</module>
        <module>gmp-mes</module>
        <module>gmp-lims</module>
        <module>gmp-edms</module>
    </modules>
    
    <dependencyManagement>
        <dependencies>
            <dependency>
                <groupId>org.springframework.boot</groupId>
                <artifactId>spring-boot-dependencies</artifactId>
                <version>${spring-boot.version}</version>
                <type>pom</type>
                <scope>import</scope>
            </dependency>
            <dependency>
                <groupId>org.springframework.cloud</groupId>
                <artifactId>spring-cloud-dependencies</artifactId>
                <version>${spring-cloud.version}</version>
                <type>pom</type>
                <scope>import</scope>
            </dependency>
        </dependencies>
    </dependencyManagement>
    
    <build>
        <plugins>
            <plugin>
                <groupId>org.springframework.boot</groupId>
                <artifactId>spring-boot-maven-plugin</artifactId>
                <version>${spring-boot.version}</version>
            </plugin>
        </plugins>
    </build>
</project>
EOF
```

### 2. åˆ›å»ºå‰ç«¯Vue.jsé¡¹ç›®
```bash
cd gmp-frontend

# ä½¿ç”¨Viteåˆ›å»ºVue3é¡¹ç›®
npm create vite@latest . -- --template vue

# å®‰è£…ä¾èµ–
npm install

# å®‰è£…UIç»„ä»¶åº“
npm install element-plus

# å®‰è£…HTTPå®¢æˆ·ç«¯
npm install axios

# å®‰è£…çŠ¶æ€ç®¡ç†
npm install pinia

# å®‰è£…è·¯ç”±
npm install vue-router@4

# å®‰è£…å›¾æ ‡åº“
npm install @element-plus/icons-vue
```

### 3. åˆ›å»ºå‰ç«¯é…ç½®æ–‡ä»¶
```bash
cat > vite.config.js << 'EOF'
import { defineConfig } from 'vite'
import vue from '@vitejs/plugin-vue'
import { resolve } from 'path'

export default defineConfig({
  plugins: [vue()],
  resolve: {
    alias: {
      '@': resolve(__dirname, 'src')
    }
  },
  server: {
    port: 3000,
    proxy: {
      '/api': {
        target: 'http://localhost:8080',
        changeOrigin: true,
        rewrite: (path) => path.replace(/^\/api/, '')
      }
    }
  },
  build: {
    outDir: 'dist',
    assetsDir: 'assets',
    sourcemap: true
  }
})
EOF
```

## ğŸ§ª æµ‹è¯•ç¯å¢ƒéªŒè¯

### 1. å¯åŠ¨åŸºç¡€è®¾æ–½æœåŠ¡
```bash
# å¯åŠ¨Dockerå¼€å‘ç¯å¢ƒ
docker-compose -f docker-compose.dev.yml up -d

# æ£€æŸ¥æœåŠ¡çŠ¶æ€
docker-compose -f docker-compose.dev.yml ps

# éªŒè¯æ•°æ®åº“è¿æ¥
docker exec -it gmpsystem-postgres-1 psql -U gmp_user -d gmp_system -c "SELECT version();"

# éªŒè¯Redisè¿æ¥
docker exec -it gmpsystem-redis-1 redis-cli ping
```

### 2. åˆ›å»ºæµ‹è¯•æ•°æ®
```bash
# è¿æ¥åˆ°PostgreSQL
docker exec -it gmpsystem-postgres-1 psql -U gmp_user -d gmp_system

# åˆ›å»ºæµ‹è¯•è¡¨
CREATE TABLE test_table (
    id SERIAL PRIMARY KEY,
    name VARCHAR(100),
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

-- æ’å…¥æµ‹è¯•æ•°æ®
INSERT INTO test_table (name) VALUES ('Test 1'), ('Test 2'), ('Test 3');

-- æŸ¥è¯¢æ•°æ®
SELECT * FROM test_table;

-- é€€å‡º
\q
```

### 3. éªŒè¯Redisç¼“å­˜
```bash
# è¿æ¥åˆ°Redis
docker exec -it gmpsystem-redis-1 redis-cli

# è®¾ç½®æµ‹è¯•é”®å€¼
SET test_key "Hello GMP System"

# è·å–å€¼
GET test_key

# é€€å‡º
EXIT
```

## ğŸ“‹ å¼€å‘ç¯å¢ƒæ£€æŸ¥æ¸…å•

### âœ… å¿…é¡»éªŒè¯çš„é¡¹ç›®
- [ ] Java 17 å·²æ­£ç¡®å®‰è£…å¹¶é…ç½®
- [ ] Maven å¯ä»¥æ­£å¸¸æ„å»ºé¡¹ç›®
- [ ] Node.js å’Œ npm å·²å®‰è£…
- [ ] Docker Desktop æ­£å¸¸è¿è¡Œ
- [ ] PostgreSQL å¯ä»¥è¿æ¥
- [ ] Redis å¯ä»¥è¿æ¥
- [ ] MinIO æ§åˆ¶å°å¯ä»¥è®¿é—® (http://localhost:9001)
- [ ] RabbitMQ ç®¡ç†ç•Œé¢å¯ä»¥è®¿é—® (http://localhost:15672)

### ğŸ”§ å¸¸ç”¨å‘½ä»¤é€ŸæŸ¥
```bash
# æŸ¥çœ‹Javaç‰ˆæœ¬
java -version

# æŸ¥çœ‹Mavenç‰ˆæœ¬
mvn --version

# æŸ¥çœ‹Node.jsç‰ˆæœ¬
node --version

# æŸ¥çœ‹Dockerç‰ˆæœ¬
docker --version

# æŸ¥çœ‹PostgreSQLçŠ¶æ€
brew services list | grep postgresql

# æŸ¥çœ‹RedisçŠ¶æ€
brew services list | grep redis

# å¯åŠ¨Dockerå¼€å‘ç¯å¢ƒ
docker-compose -f docker-compose.dev.yml up -d

# åœæ­¢Dockerå¼€å‘ç¯å¢ƒ
docker-compose -f docker-compose.dev.yml down

# æŸ¥çœ‹Dockerå®¹å™¨æ—¥å¿—
docker-compose -f docker-compose.dev.yml logs -f [service-name]
```

## ğŸš¨ å¸¸è§é—®é¢˜è§£å†³

### 1. Dockerå®¹å™¨æ— æ³•å¯åŠ¨
```bash
# æ£€æŸ¥DockerçŠ¶æ€
docker info

# æ¸…ç†Dockerç¼“å­˜
docker system prune -a

# é‡æ–°åˆ›å»ºå®¹å™¨
docker-compose -f docker-compose.dev.yml down
docker-compose -f docker-compose.dev.yml up -d --build
```

### 2. PostgreSQLè¿æ¥å¤±è´¥
```bash
# æ£€æŸ¥PostgreSQLæœåŠ¡çŠ¶æ€
brew services list | grep postgresql

# é‡å¯PostgreSQLæœåŠ¡
brew services restart postgresql@14

# æ£€æŸ¥ç«¯å£å ç”¨
lsof -i :5432
```

### 3. Javaç‰ˆæœ¬å†²çª
```bash
# æŸ¥çœ‹æ‰€æœ‰Javaç‰ˆæœ¬
/usr/libexec/java_home -V

# è®¾ç½®é»˜è®¤Javaç‰ˆæœ¬
export JAVA_HOME=$(/usr/libexec/java_home -v 17)
```

### 4. Mavenæ„å»ºå¤±è´¥
```bash
# æ¸…ç†Mavenç¼“å­˜
mvn clean

# å¼ºåˆ¶æ›´æ–°ä¾èµ–
mvn clean install -U

# æŸ¥çœ‹è¯¦ç»†é”™è¯¯ä¿¡æ¯
mvn clean install -X
```

## ğŸ“š ä¸‹ä¸€æ­¥æ“ä½œ

1. **å¯¼å…¥é¡¹ç›®åˆ°IDE**: ä½¿ç”¨IntelliJ IDEAæˆ–VS Codeæ‰“å¼€é¡¹ç›®
2. **é…ç½®åº”ç”¨å±æ€§**: ä¿®æ”¹å„å¾®æœåŠ¡çš„application.ymlæ–‡ä»¶
3. **å¯åŠ¨åç«¯æœåŠ¡**: ä¾æ¬¡å¯åŠ¨å„ä¸ªå¾®æœåŠ¡
4. **å¯åŠ¨å‰ç«¯åº”ç”¨**: åœ¨gmp-frontendç›®å½•è¿è¡Œnpm run dev
5. **è®¿é—®ç³»ç»Ÿ**: æ‰“å¼€æµè§ˆå™¨è®¿é—® http://localhost

å¼€å‘ç¯å¢ƒç°åœ¨å·²ç»å®Œå…¨é…ç½®å®Œæˆï¼Œå¯ä»¥å¼€å§‹è¿›è¡ŒGMPç³»ç»Ÿçš„å¼€å‘å·¥ä½œäº†ï¼